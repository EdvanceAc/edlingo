import{r as a,j as e,u as Ye,C as Ir,b as es,Z as Ee,H as rs,M as Lr,c as ss,d as He,e as he,B as ye,G as dr,f as ns,N as jr,S as Ze,R as ae,h as ur,V as ar,i as je,k as is,l as ts,m as os,U as Re,L as as,n as ls,o as ds,X as Tr,T as us,p as Rr,q as Ce,P as ke,s as $e,t as de,A as Fr,F as cs,v as ms,w as Qe,x as cr,y as Gr,z as De,D as Oe,E as ps,I as Ur,J as _e,K as Mr,W as Er,O as er,Q as bs,Y as We,_ as Fe,$ as Ke,a0 as zr,a1 as fs,a2 as lr,a3 as Ns,a4 as Dr,a5 as ir,a6 as Ge,a7 as wr,a8 as Vr,a9 as rr,aa as Hr,ab as xs,ac as Sr,ad as Ar,ae as gs,af as hs,ag as vs,ah as oe,ai as ys}from"./react-vendor-BELnPC2w.js";import{f as js,_ as tr}from"./vendor-DmMlebpE.js";import{m as E,A as be}from"./framer-motion-DgTvmtou.js";import{t as Es,c as Ds}from"./styling-BTGVH9Kg.js";import{G as ws,a as Vs}from"./ai-google-DmYW_pRz.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerPolicy&&(t.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?t.credentials="include":i.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(i){if(i.ep)return;i.ep=!0;const t=s(i);fetch(i.href,t)}})();const Ss="https://ecglfwqylqchdyuhmtuv.supabase.co",As="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjZ2xmd3F5bHFjaGR5dWhtdHV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MTEyOTAsImV4cCI6MjA2NzM4NzI5MH0.RU5QRPClm4WuxVu2Q2nTe8kpKEX0YN_e-y4gH8PM5J0",ge=js(Ss,As),Cr=async()=>{try{const{data:o,error:r}=await ge.from("user_profiles").select("id").limit(1);if(r&&r.code==="42P01")return console.warn("Database schema not found. Please run migrations."),{connected:!0,error:"Database schema not set up"};if(r&&r.code!=="PGRST116")throw r;return{connected:!0,error:null}}catch(o){return console.error("Supabase connection error:",o),{connected:!1,error:o.message}}};class Cs{constructor(){this.client=ge,this.isConnected=!1,this.init()}async init(){try{const r=await Cr();this.isConnected=r.connected,this.isConnected?(console.log("‚úÖ Supabase connected successfully"),await this.verifyDatabaseSchema()):(console.warn("‚ö†Ô∏è Supabase connection failed:",r.error),console.warn("üìã Please check SETUP_DATABASE.md for database setup instructions"))}catch(r){console.error("‚ùå Failed to initialize Supabase service:",r),console.warn("üìã Please check SETUP_DATABASE.md for database setup instructions")}}async verifyDatabaseSchema(){try{const{error:r}=await this.client.from("user_profiles").select("id").limit(1);r&&r.code==="42P01"&&(console.error("‚ùå Database tables not found. Please run the database migration."),console.warn("üìã See SETUP_DATABASE.md for setup instructions"),this.isConnected=!1)}catch(r){console.warn("‚ö†Ô∏è Could not verify database schema:",r.message)}}getConnectionStatus(){return this.isConnected}async signUp(r,s,n={}){try{const{data:i,error:t}=await this.client.auth.signUp({email:r,password:s,options:{data:n}});if(t)throw t;return{success:!0,data:i}}catch(i){return console.error("Sign up error:",i),{success:!1,error:i.message}}}async signIn(r,s){try{const{data:n,error:i}=await this.client.auth.signInWithPassword({email:r,password:s});if(i)throw i;return{success:!0,data:n}}catch(n){return console.error("Sign in error:",n),{success:!1,error:n.message}}}async signOut(){try{const{error:r}=await this.client.auth.signOut();if(r)throw r;return{success:!0}}catch(r){return console.error("Sign out error:",r),{success:!1,error:r.message}}}async getCurrentUser(){try{const{data:{user:r},error:s}=await this.client.auth.getUser();if(s)throw s;return{success:!0,user:r}}catch(r){return console.error("Get current user error:",r),{success:!1,error:r.message}}}async signInWithGoogle(){try{const{data:r,error:s}=await this.client.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(s)throw s;return{success:!0,data:r}}catch(r){return console.error("Google sign in error:",r),{success:!1,error:r.message}}}async resetPassword(r){try{const{data:s,error:n}=await this.client.auth.resetPasswordForEmail(r,{redirectTo:`${window.location.origin}/reset-password`});if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Reset password error:",s),{success:!1,error:s.message}}}async updatePassword(r){try{const{data:s,error:n}=await this.client.auth.updateUser({password:r});if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Update password error:",s),{success:!1,error:s.message}}}async getSession(){try{const{data:{session:r},error:s}=await this.client.auth.getSession();if(s)throw s;return{success:!0,session:r}}catch(r){return console.error("Get session error:",r),{success:!1,error:r.message}}}onAuthStateChange(r){return this.client.auth.onAuthStateChange(r)}async saveUserProgress(r,s){try{const{data:n,error:i}=await this.client.from("user_progress").upsert({user_id:r,...s,updated_at:new Date().toISOString()});if(i)throw i;return{success:!0,data:n}}catch(n){return console.error("Save progress error:",n),{success:!1,error:n.message}}}async getUserProgress(r){try{const{data:s,error:n}=await this.client.from("user_progress").select("*").eq("user_id",r).single();if(n&&n.code!=="PGRST116")throw n;return{success:!0,data:s||null}}catch(s){return console.error("Get progress error:",s),{success:!1,error:s.message}}}async saveLearningSession(r,s){try{const{data:n,error:i}=await this.client.from("learning_sessions").insert({user_id:r,...s,created_at:new Date().toISOString()});if(i)throw i;return{success:!0,data:n}}catch(n){return console.error("Save session error:",n),{success:!1,error:n.message}}}async getUserSessions(r,s=10){try{const{data:n,error:i}=await this.client.from("learning_sessions").select("*").eq("user_id",r).order("created_at",{ascending:!1}).limit(s);if(i)throw i;return{success:!0,data:n||[]}}catch(n){return console.error("Get sessions error:",n),{success:!1,error:n.message}}}async saveVocabulary(r,s){try{if(!this.isConnected)return{success:!1,error:"Database not connected. Please check SETUP_DATABASE.md for setup instructions."};const{data:n,error:i}=await this.client.from("user_vocabulary").upsert({user_id:r,...s,updated_at:new Date().toISOString()});if(i){if(i.code==="42P01")return{success:!1,error:"Database tables not found. Please run the database migration. See SETUP_DATABASE.md"};throw i}return{success:!0,data:n}}catch(n){return console.error("Save vocabulary error:",n),{success:!1,error:n.message||"Failed to save vocabulary. Please check your database connection."}}}async getUserVocabulary(r){try{if(!this.isConnected)return{success:!1,error:"Database not connected. Please check SETUP_DATABASE.md for setup instructions.",data:[]};const{data:s,error:n}=await this.client.from("user_vocabulary").select("*").eq("user_id",r).order("updated_at",{ascending:!1});if(n){if(n.code==="42P01")return{success:!1,error:"Database tables not found. Please run the database migration. See SETUP_DATABASE.md",data:[]};throw n}return{success:!0,data:s||[]}}catch(s){return console.error("Get vocabulary error:",s),{success:!1,error:s.message||"Failed to load vocabulary. Please check your database connection.",data:[]}}}subscribeToUserProgress(r,s){return this.client.channel("user_progress_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_progress",filter:`user_id=eq.${r}`},s).subscribe()}async createAssessmentSession(r,s,n){try{const{data:i,error:t}=await this.client.from("assessment_sessions").insert({user_id:r,target_language:s,assessment_type:n,status:"in_progress",created_at:new Date().toISOString()}).select().single();if(t)throw t;return{success:!0,data:i}}catch(i){return console.error("Create assessment session error:",i),{success:!1,error:i.message}}}async getAssessmentTasks(r){try{const{data:s,error:n}=await this.client.from("assessment_tasks").select("*").eq("session_id",r).order("task_order");if(n)throw n;return{success:!0,data:s||[]}}catch(s){return console.error("Get assessment tasks error:",s),{success:!1,error:s.message}}}async submitAssessmentResponse(r,s,n=null){try{const{data:i,error:t}=await this.client.from("assessment_tasks").update({user_response:s,audio_response_url:n,completed_at:new Date().toISOString()}).eq("id",r).select().single();if(t)throw t;return{success:!0,data:i}}catch(i){return console.error("Submit assessment response error:",i),{success:!1,error:i.message}}}async updateAssessmentSession(r,s){try{const{data:n,error:i}=await this.client.from("assessment_sessions").update({...s,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(i)throw i;return{success:!0,data:n}}catch(n){return console.error("Update assessment session error:",n),{success:!1,error:n.message}}}async getAssessmentCriteria(r,s){try{const{data:n,error:i}=await this.client.from("assessment_criteria").select("*").eq("skill_area",r).eq("cefr_level",s).single();if(i&&i.code!=="PGRST116")throw i;return{success:!0,data:n||null}}catch(n){return console.error("Get assessment criteria error:",n),{success:!1,error:n.message}}}async saveUserProficiencyProfile(r,s){try{const{data:n,error:i}=await this.client.from("user_proficiency_profiles").upsert({user_id:r,...s,updated_at:new Date().toISOString()}).select().single();if(i)throw i;return{success:!0,data:n}}catch(n){return console.error("Save proficiency profile error:",n),{success:!1,error:n.message}}}async getUserProficiencyProfile(r){try{const{data:s,error:n}=await this.client.from("user_proficiency_profiles").select("*").eq("user_id",r).single();if(n&&n.code!=="PGRST116")throw n;return{success:!0,data:s||null}}catch(s){return console.error("Get proficiency profile error:",s),{success:!1,error:s.message}}}async getContentModules(r=null,s=null,n=null){try{let i=this.client.from("content_modules").select("*").eq("is_active",!0).order("order_index");r&&(i=i.eq("language",r)),s&&(i=i.eq("cefr_level",s)),n&&(i=i.eq("module_type",n));const{data:t,error:l}=await i;if(l)throw l;return{success:!0,data:t||[]}}catch(i){return console.error("Get content modules error:",i),{success:!1,error:i.message}}}async getContentModule(r){try{const{data:s,error:n}=await this.client.from("content_modules").select("*").eq("id",r).eq("is_active",!0).single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Get content module error:",s),{success:!1,error:s.message}}}async createContentModule(r){try{const{data:s,error:n}=await this.client.from("content_modules").insert({...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Create content module error:",s),{success:!1,error:s.message}}}async updateContentModule(r,s){try{const{data:n,error:i}=await this.client.from("content_modules").update({...s,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(i)throw i;return{success:!0,data:n}}catch(n){return console.error("Update content module error:",n),{success:!1,error:n.message}}}async deleteContentModule(r){try{const{data:s,error:n}=await this.client.from("content_modules").update({is_active:!1}).eq("id",r).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Delete content module error:",s),{success:!1,error:s.message}}}async getAssignment(r){try{const{data:s,error:n}=await this.client.from("content_modules").select("*").eq("id",r).eq("module_type","assignment").eq("is_active",!0).single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Get assignment error:",s),{success:!1,error:s.message}}}async getTest(r){try{const{data:s,error:n}=await this.client.from("content_modules").select("*").eq("id",r).eq("module_type","test").eq("is_active",!0).single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Get test error:",s),{success:!1,error:s.message}}}async createCEFRAssessmentQuestion(r){try{const{data:s,error:n}=await this.client.from("cefr_assessment_questions").insert({question_type:r.questionType,cefr_level:r.cefrLevel,skill_type:r.skillType,question_text:r.questionText,instructions:r.instructions,points:r.points,options:r.options||null,correct_answer:r.correctAnswer||null,media_files:r.mediaFiles||null,assessment_criteria:r.assessmentCriteria||null,expected_response:r.expectedResponse||null,difficulty_level:r.difficultyLevel||"medium",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Create CEFR assessment question error:",s),{success:!1,error:s.message}}}async getCEFRAssessmentQuestions(r={}){try{let s=this.client.from("cefr_assessment_questions").select("*").eq("is_active",!0).order("created_at",{ascending:!1});r.cefrLevel&&(s=s.eq("cefr_level",r.cefrLevel)),r.skillType&&(s=s.eq("skill_type",r.skillType)),r.questionType&&(s=s.eq("question_type",r.questionType));const{data:n,error:i}=await s;if(i)throw i;return{success:!0,data:n||[]}}catch(s){return console.error("Get CEFR assessment questions error:",s),{success:!1,error:s.message}}}async updateCEFRAssessmentQuestion(r,s){try{const{data:n,error:i}=await this.client.from("cefr_assessment_questions").update({...s,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(i)throw i;return{success:!0,data:n}}catch(n){return console.error("Update CEFR assessment question error:",n),{success:!1,error:n.message}}}async deleteCEFRAssessmentQuestion(r){try{const{data:s,error:n}=await this.client.from("cefr_assessment_questions").update({is_active:!1}).eq("id",r).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return console.error("Delete CEFR assessment question error:",s),{success:!1,error:s.message}}}async testConnection(){return await Cr()}async syncData(){try{console.log("üîÑ Starting data sync...");const r=await this.getCurrentUser();if(r.success&&r.user){const s=await this.getUserProgress(r.user.id),n=await this.getUserVocabulary(r.user.id),i=await this.getUserSessions(r.user.id,5);return console.log("‚úÖ Data sync completed"),{success:!0,data:{progress:s.data,vocabulary:n.data,sessions:i.data}}}return{success:!1,error:"No authenticated user"}}catch(r){return console.error("‚ùå Data sync failed:",r),{success:!1,error:r.message}}}}const R=new Cs,or=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"})),Or=a.createContext({}),Ve=()=>{const o=a.useContext(Or);if(!o)throw new Error("useAuth must be used within an AuthProvider");return o},ks=({children:o})=>{const[r,s]=a.useState(null),[n,i]=a.useState(!0),[t,l]=a.useState(null);a.useEffect(()=>{var h;let p=!0;(async()=>{try{if(await R.getConnectionStatus()){const{success:x,session:N}=await R.getSession();p&&x&&N&&(l(N),s(N.user))}else{console.warn("Supabase not connected, using fallback authentication");const x={id:"00000000-0000-0000-0000-000000000001",email:"dev@edlingo.com",user_metadata:{name:"Development User"}};s(x),l({user:x})}}catch(v){console.error("Error getting initial session:",v),console.warn("Authentication error, using fallback user");const x={id:"00000000-0000-0000-0000-000000000001",email:"dev@edlingo.com",user_metadata:{name:"Development User"}};s(x),l({user:x})}finally{p&&i(!1)}})();let f;try{const v=R.onAuthStateChange(async(x,N)=>{p&&(l(N),s((N==null?void 0:N.user)??null),i(!1))});f=(h=v==null?void 0:v.data)==null?void 0:h.subscription}catch(v){console.warn("Could not set up auth state listener:",v)}return()=>{p=!1,f==null||f.unsubscribe()}},[]);const C={user:r,session:t,loading:n,signUp:async(p,D,f={})=>{try{i(!0);const h=await R.signUp(p,D,f);return h.success?{data:h.data,error:null}:{data:null,error:new Error(h.error)}}catch(h){return{data:null,error:h}}finally{i(!1)}},signIn:async(p,D)=>{try{i(!0);const f=await R.signIn(p,D);return f.success?{data:f.data,error:null}:{data:null,error:new Error(f.error)}}catch(f){return{data:null,error:f}}finally{i(!1)}},signInWithGoogle:async()=>{try{i(!0);const p=await R.signInWithGoogle();return p.success?{data:p.data,error:null}:{data:null,error:new Error(p.error)}}catch(p){return{data:null,error:p}}finally{i(!1)}},signOut:async()=>{try{i(!0);const p=await R.signOut();return p.success?(s(null),l(null),{error:null}):{error:new Error(p.error)}}catch(p){return{error:p}}finally{i(!1)}},resetPassword:async p=>{try{const D=await R.resetPassword(p);return D.success?{data:D.data,error:null}:{data:null,error:new Error(D.error)}}catch(D){return{data:null,error:D}}},updatePassword:async p=>{try{const D=await R.updatePassword(p);return D.success?{data:D.data,error:null}:{data:null,error:new Error(D.error)}}catch(D){return{data:null,error:D}}}};return e.jsxDEV(Or.Provider,{value:C,children:o},void 0,!1,{fileName:"/opt/build/repo/src/renderer/contexts/AuthContext.jsx",lineNumber:200,columnNumber:5},void 0)},qr=a.createContext({userProgress:{},dailyGoal:30,streak:0,totalXP:0,level:1,achievements:[],updateProgress:()=>{},addXP:()=>{},completeLesson:()=>{},setDailyGoal:()=>{},getProgressStats:()=>{}}),Ne=()=>{const o=a.useContext(qr);if(o===void 0)throw new Error("useProgress must be used within a ProgressProvider");return o},kr={totalXP:0,level:1,streak:0,daily_goal:30,daily_progress:0,lastStudyDate:null,lessonsCompleted:0,wordsLearned:0,pronunciationAccuracy:0,chat_messages:0,achievements:[],weeklyStats:{monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,saturday:0,sunday:0},subjects:{vocabulary:{xp:0,level:1,progress:0},grammar:{xp:0,level:1,progress:0},pronunciation:{xp:0,level:1,progress:0},conversation:{xp:0,level:1,progress:0}}},_r=[{id:"first_lesson",name:"First Steps",description:"Complete your first lesson",xp:50,icon:"üéØ"},{id:"streak_3",name:"Getting Started",description:"Maintain a 3-day streak",xp:100,icon:"üî•"},{id:"streak_7",name:"Week Warrior",description:"Maintain a 7-day streak",xp:200,icon:"‚ö°"},{id:"streak_30",name:"Month Master",description:"Maintain a 30-day streak",xp:500,icon:"üëë"},{id:"words_100",name:"Word Collector",description:"Learn 100 new words",xp:150,icon:"üìö"},{id:"words_500",name:"Vocabulary Expert",description:"Learn 500 new words",xp:300,icon:"üß†"},{id:"pronunciation_master",name:"Perfect Pronunciation",description:"Achieve 95% accuracy in pronunciation",xp:250,icon:"üé§"},{id:"chat_enthusiast",name:"Chat Enthusiast",description:"Send 100 chat messages",xp:100,icon:"üí¨"},{id:"level_10",name:"Rising Star",description:"Reach level 10",xp:300,icon:"‚≠ê"},{id:"level_25",name:"Language Learner",description:"Reach level 25",xp:500,icon:"üåü"},{id:"daily_goal_week",name:"Consistent Learner",description:"Meet daily goal for 7 days",xp:200,icon:"üìà"}];function _s({children:o}){const{user:r}=Ve(),[s,n]=a.useState(kr);a.useEffect(()=>{(async()=>{if(r!=null&&r.id)try{const{data:D,error:f}=await ge.from("user_progress").select("*").eq("user_id",r.id).single();if(f&&f.code!=="PGRST116")throw f;if(D)n(h=>({...h,...D}));else{const h={...kr,user_id:r.id},{error:v}=await ge.from("user_progress").upsert(h);if(v)throw v;n(h)}}catch(D){console.error("Failed to fetch progress:",D)}})()},[r==null?void 0:r.id]),a.useEffect(()=>{if(!(r!=null&&r.id))return;const p=ge.channel("user_progress_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_progress",filter:`user_id=eq.${r.id}`},D=>{D.new&&n(f=>({...f,...D.new}))}).subscribe();return()=>{p.unsubscribe()}},[r==null?void 0:r.id]),a.useEffect(()=>{(async()=>{var D,f;try{const h=await((f=(D=window.electronAPI)==null?void 0:D.loadProgress)==null?void 0:f.call(D));if(h)n(v=>({...v,...h}));else{const v=localStorage.getItem("lingo-progress");v&&n(x=>({...x,...JSON.parse(v)}))}}catch(h){console.warn("Failed to load progress:",h);const v=localStorage.getItem("lingo-progress");v&&n(x=>({...x,...JSON.parse(v)}))}})()},[]),a.useEffect(()=>{(async()=>{var D,f;try{await((f=(D=window.electronAPI)==null?void 0:D.saveProgress)==null?void 0:f.call(D,s))}catch(h){console.warn("Failed to save progress via Electron API:",h)}localStorage.setItem("lingo-progress",JSON.stringify(s))})()},[s]);const i=a.useCallback(p=>Math.floor(Math.sqrt(p/100))+1,[]),t=a.useCallback(p=>Math.pow(p,2)*100,[]),l=a.useCallback(()=>{const p=new Date().toDateString(),D=s.lastStudyDate;if(!D)return 1;const f=new Date(D),v=new Date(p).getTime()-f.getTime(),x=Math.ceil(v/(1e3*60*60*24));return x===1?s.streak+1:x===0?s.streak:1},[s.lastStudyDate,s.streak]),u=a.useCallback(p=>{const D=[];return _r.forEach(f=>{if(p.achievements.includes(f.id))return;let h=!1;switch(f.id){case"first_lesson":h=p.lessonsCompleted>=1;break;case"streak_3":h=p.streak>=3;break;case"streak_7":h=p.streak>=7;break;case"streak_30":h=p.streak>=30;break;case"words_100":h=p.wordsLearned>=100;break;case"words_500":h=p.wordsLearned>=500;break;case"pronunciation_master":h=p.pronunciationAccuracy>=95;break;case"chat_enthusiast":h=p.chat_messages>=100;break;case"level_10":h=p.level>=10;break;case"level_25":h=p.level>=25;break;case"daily_goal_week":h=Object.values(p.weeklyStats).reduce((N,g)=>g>=p.daily_goal?N+1:0,0)>=7;break}h&&D.push(f)}),D},[]),m=a.useCallback(async(p,D=null)=>{r!=null&&r.id&&n(f=>{const h=f.totalXP+p,v=i(h),x=l();let N={...f,totalXP:h,level:v,streak:x,lastStudyDate:new Date().toDateString()};if(D&&N.subjects[D]){const S=N.subjects[D].xp+p,A=i(S);N.subjects[D]={...N.subjects[D],xp:S,level:A}}const g=u(N);return g.length>0&&(N.achievements=[...N.achievements,...g.map(S=>S.id)],N.totalXP+=g.reduce((S,A)=>S+A.xp,0),N.level=i(N.totalXP),g.forEach(S=>{var A,F;(F=(A=window.electronAPI)==null?void 0:A.showNotification)==null||F.call(A,`Achievement Unlocked: ${S.name}`,{body:S.description,icon:S.icon})})),ge.from("user_progress").upsert({user_id:r.id,...N}),N})},[r==null?void 0:r.id,i,l,u]),d=a.useCallback(async p=>{r!=null&&r.id&&(n(D=>{p.xp;const f={...D,lessonsCompleted:D.lessonsCompleted+1,wordsLearned:D.wordsLearned+(p.newWords||0),dailyProgress:D.dailyProgress+(p.duration||5)},h=new Date().toLocaleDateString("en-US",{weekday:"lowercase"});return f.weeklyStats[h]!==void 0&&(f.weeklyStats[h]+=p.duration||5),ge.from("user_progress").upsert({user_id:r.id,...f}),f}),m(p.xp||50,p.subject))},[r==null?void 0:r.id,m]),c=a.useCallback(async p=>{r!=null&&r.id&&n(D=>{const f={...D,...p};return ge.from("user_progress").upsert({user_id:r.id,...f}),f})},[r==null?void 0:r.id]),b=a.useCallback(async p=>{r!=null&&r.id&&n(D=>{const f={...D,daily_goal:p};return ge.from("user_progress").upsert({user_id:r.id,...f}),f})},[r==null?void 0:r.id]),w=a.useCallback(()=>{const p=s.level,D=s.totalXP,f=t(p-1),h=t(p),v=(D-f)/(h-f)*100;return{level:p,xp:D,progressToNextLevel:Math.min(v,100),xpToNextLevel:h-D,streak:s.streak,dailyProgress:s.daily_progress,dailyGoal:s.daily_goal,dailyGoalProgress:s.daily_progress/s.daily_goal*100,achievements:(s.achievements||[]).map(x=>_r.find(N=>N.id===x)).filter(Boolean),weeklyStats:s.weeklyStats}},[s,t]),C={userProgress:s,dailyGoal:s.daily_goal,streak:s.streak,totalXP:s.totalXP,level:s.level,achievements:s.achievements,updateProgress:c,addXP:m,completeLesson:d,setDailyGoal:b,getProgressStats:w};return e.jsxDEV(qr.Provider,{value:C,children:o},void 0,!1,{fileName:"/opt/build/repo/src/renderer/providers/ProgressProvider.jsx",lineNumber:409,columnNumber:5},this)}const Ps=[{name:"Dashboard",href:"/",icon:rs,description:"Overview and progress"},{name:"Chat",href:"/chat",icon:Lr,description:"Basic conversation practice"},{name:"Enhanced Chat",href:"/enhanced-chat",icon:ss,description:"Advanced AI conversations"},{name:"Live Conversation",href:"/live-conversation",icon:He,description:"Real-time conversation practice"},{name:"Pronunciation",href:"/pronunciation",icon:he,description:"Speech practice and feedback"},{name:"Vocabulary",href:"/vocabulary",icon:ye,description:"Learn new words and phrases"},{name:"Grammar",href:"/grammar",icon:dr,description:"Grammar exercises and rules"},{name:"Assessment",href:"/assessment",icon:ns,description:"Language proficiency assessment"}],Is=({collapsed:o,onToggle:r})=>{const s=Ye(),{level:n,totalXP:i,streak:t}=Ne();return e.jsxDEV(E.div,{className:"h-full bg-card border-r border-border flex flex-col",initial:!1,animate:{width:o?"80px":"280px"},transition:{duration:.3,ease:"easeInOut"},children:[e.jsxDEV("div",{className:"p-4 border-b border-border",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[!o&&e.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-primary/80 rounded-lg flex items-center justify-center",children:e.jsxDEV("span",{className:"text-sm font-bold text-white",children:"E"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:93,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:92,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-lg font-bold text-foreground",children:"EdLingo"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:96,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Learn & Practice"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:97,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:95,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:86,columnNumber:13},void 0),e.jsxDEV("button",{onClick:r,className:"p-2 rounded-lg hover:bg-accent transition-colors","aria-label":o?"Expand sidebar":"Collapse sidebar",children:o?e.jsxDEV(Ir,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:108,columnNumber:15},void 0):e.jsxDEV(es,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:110,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:102,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:84,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:83,columnNumber:7},void 0),!o&&e.jsxDEV(E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 border-b border-border",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:e.jsxDEV(Ee,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:129,columnNumber:19},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:128,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:["Level ",n]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:132,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[i," XP"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:133,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:131,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:127,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("p",{className:"text-sm font-medium",children:t},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"day streak"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:136,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:126,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxDEV("span",{children:"Progress"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:145,columnNumber:17},void 0),e.jsxDEV("span",{children:"75%"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:146,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:144,columnNumber:15},void 0),e.jsxDEV("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsxDEV(E.div,{initial:{width:0},animate:{width:"75%"},transition:{duration:1,delay:.5},className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:149,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:148,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:143,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:124,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:118,columnNumber:9},void 0),e.jsxDEV("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:Ps.map((l,u)=>{const m=l.icon,d=s.pathname===l.href;return e.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:u*.1},children:e.jsxDEV(jr,{to:l.href,className:({isActive:c})=>`
                  group relative flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200
                  ${c?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-accent"}
                `,children:[e.jsxDEV(m,{className:`w-5 h-5 flex-shrink-0 ${d?"text-primary-foreground":""}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:184,columnNumber:17},void 0),!o&&e.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"truncate",children:l.name},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:193,columnNumber:21},void 0),e.jsxDEV("p",{className:`text-xs truncate ${d?"text-primary-foreground/80":"text-muted-foreground"}`,children:l.description},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:194,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:187,columnNumber:19},void 0),o&&e.jsxDEV("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded-md shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:l.name},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:204,columnNumber:19},void 0),d&&e.jsxDEV(E.div,{layoutId:"activeTab",className:"absolute inset-0 bg-primary rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:211,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:174,columnNumber:15},void 0)},l.href,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:168,columnNumber:13},void 0)})},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:162,columnNumber:7},void 0),e.jsxDEV("div",{className:"p-4 border-t border-border",children:e.jsxDEV(jr,{to:"/settings",className:({isActive:l})=>`
            group relative flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200
            ${l?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-accent"}
          `,children:[e.jsxDEV(Ze,{className:"w-5 h-5 flex-shrink-0"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:235,columnNumber:11},void 0),!o&&e.jsxDEV(E.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:"Settings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:238,columnNumber:13},void 0),o&&e.jsxDEV("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded-md shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Settings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:249,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:225,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:224,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Sidebar.jsx",lineNumber:76,columnNumber:5},void 0)},Br=a.createContext({theme:"light",setTheme:()=>null,toggleTheme:()=>null}),$r=()=>{const o=a.useContext(Br);if(o===void 0)throw new Error("useTheme must be used within a ThemeProvider");return o};function Ls({children:o,defaultTheme:r="light",storageKey:s="lingo-theme"}){const[n,i]=a.useState(r);a.useEffect(()=>{(async()=>{var m,d;try{const c=await((d=(m=window.electronAPI)==null?void 0:m.getTheme)==null?void 0:d.call(m));if(c&&c.success&&c.theme)i(c.theme);else{const b=localStorage.getItem(s);b&&i(b)}}catch(c){console.warn("Failed to load theme:",c);const b=localStorage.getItem(s);b&&i(b)}})()},[s]),a.useEffect(()=>{const u=window.document.documentElement;u.classList.remove("light","dark"),u.classList.add(n),(async()=>{var d,c;try{await((c=(d=window.electronAPI)==null?void 0:d.setTheme)==null?void 0:c.call(d,n))}catch(b){console.warn("Failed to save theme via Electron API:",b)}localStorage.setItem(s,n)})()},[n,s]);const l={theme:n,setTheme:i,toggleTheme:()=>{i(u=>u==="light"?"dark":"light")}};return e.jsxDEV(Br.Provider,{value:l,children:o},void 0,!1,{fileName:"/opt/build/repo/src/renderer/providers/ThemeProvider.jsx",lineNumber:78,columnNumber:5},this)}const Qr=a.createContext({isRecording:!1,isPlaying:!1,audioLevel:0,startRecording:()=>{},stopRecording:()=>{},playAudio:()=>{},stopAudio:()=>{},speakText:()=>{},analyzeAudio:()=>{}}),Me=()=>{const o=a.useContext(Qr);if(o===void 0)throw new Error("useAudio must be used within an AudioProvider");return o};function Ts({children:o}){const[r,s]=a.useState(!1),[n,i]=a.useState(!1),[t,l]=a.useState(0),u=a.useRef(null),m=a.useRef(null),d=a.useRef(null),c=a.useRef(null),b=a.useRef(null),w=a.useCallback(async()=>{try{m.current||(m.current=new(window.AudioContext||window.webkitAudioContext),d.current=m.current.createAnalyser(),d.current.fftSize=256),m.current.state==="suspended"&&await m.current.resume()}catch(N){console.error("Failed to initialize audio context:",N)}},[]),C=a.useCallback(async()=>{try{await w();const N=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});m.current.createMediaStreamSource(N).connect(d.current);const S=new Uint8Array(d.current.frequencyBinCount),A=()=>{d.current.getByteFrequencyData(S);const G=S.reduce(($,_)=>$+_,0)/S.length;l(G/255),r&&(b.current=requestAnimationFrame(A))};u.current=new MediaRecorder(N);const F=[];u.current.ondataavailable=G=>{F.push(G.data)},u.current.onstop=async()=>{var $,_;const G=new Blob(F,{type:"audio/wav"});try{const O=await G.arrayBuffer(),Y=await((_=($=window.electronAPI)==null?void 0:$.analyzeAudio)==null?void 0:_.call($,O));console.log("Audio analysis result:",Y)}catch(O){console.error("Failed to analyze audio:",O)}N.getTracks().forEach(O=>O.stop()),l(0),b.current&&cancelAnimationFrame(b.current)},u.current.start(),s(!0),A()}catch(N){console.error("Failed to start recording:",N),s(!1)}},[w,r]),p=a.useCallback(()=>{u.current&&r&&(u.current.stop(),s(!1))},[r]),D=a.useCallback(async N=>{try{await w(),c.current&&(c.current.pause(),c.current=null);const g=new Audio;N instanceof Blob?g.src=URL.createObjectURL(N):g.src=N,g.onloadstart=()=>i(!0),g.onended=()=>{i(!1),c.current=null},g.onerror=()=>{i(!1),c.current=null,console.error("Failed to play audio")},c.current=g,await g.play()}catch(g){console.error("Failed to play audio:",g),i(!1)}},[w]),f=a.useCallback(()=>{c.current&&(c.current.pause(),c.current=null,i(!1))},[]),h=a.useCallback(async(N,g={})=>{var S;try{if((S=window.electronAPI)!=null&&S.speakText){await window.electronAPI.speakText(N,g);return}if("speechSynthesis"in window){const A=new SpeechSynthesisUtterance(N);g.rate&&(A.rate=g.rate),g.pitch&&(A.pitch=g.pitch),g.volume&&(A.volume=g.volume),g.lang&&(A.lang=g.lang),A.onstart=()=>i(!0),A.onend=()=>i(!1),A.onerror=()=>i(!1),speechSynthesis.speak(A)}else console.warn("Text-to-speech not supported")}catch(A){console.error("Failed to speak text:",A),i(!1)}},[]),v=a.useCallback(async(N,g)=>{var S;try{return(S=window.electronAPI)!=null&&S.analyzeAudio?await window.electronAPI.analyzeAudio(N,g):(console.warn("Audio analysis not available"),{accuracy:Math.random()*.3+.7,feedback:"Audio analysis not available in this environment",suggestions:[]})}catch(A){return console.error("Failed to analyze audio:",A),{accuracy:0,feedback:"Analysis failed",suggestions:[]}}},[]);ae.useEffect(()=>()=>{b.current&&cancelAnimationFrame(b.current),c.current&&c.current.pause(),m.current&&m.current.close()},[]);const x={isRecording:r,isPlaying:n,audioLevel:t,startRecording:C,stopRecording:p,playAudio:D,stopAudio:f,speakText:h,analyzeAudio:v};return e.jsxDEV(Qr.Provider,{value:x,children:o},void 0,!1,{fileName:"/opt/build/repo/src/renderer/providers/AudioProvider.jsx",lineNumber:260,columnNumber:5},this)}var Se={};class le{static validate(){const r={VITE_SUPABASE_URL:Se.VITE_SUPABASE_URL,VITE_SUPABASE_ANON_KEY:Se.VITE_SUPABASE_ANON_KEY},s=Object.entries(r).filter(([n,i])=>!i).map(([n])=>n);return s.length>0&&(console.warn(`‚ö†Ô∏è Missing environment variables: ${s.join(", ")}`),console.warn("Some features may not work properly. Please check your .env file.")),s.length===0}static get(){return{app:{environment:"development",debug:!0},supabase:{url:Se.VITE_SUPABASE_URL||"https://ecglfwqylqchdyuhmtuv.supabase.co",anonKey:Se.VITE_SUPABASE_ANON_KEY,enabled:!!(Se.VITE_SUPABASE_URL&&Se.VITE_SUPABASE_ANON_KEY)},database:{syncInterval:3e4,retryAttempts:3,offlineMode:!0}}}static getSupabaseConfig(){return this.get().supabase}static isDatabaseEnabled(){return this.get().supabase.enabled}}class Rs{constructor(){this.isOnline=navigator.onLine,this.syncQueue=[],this.syncInProgress=!1,this.lastSyncTime=null,this.config=le.get().database,this.init()}init(){window.addEventListener("online",()=>{this.isOnline=!0,console.log("üåê Connection restored - starting sync"),this.syncPendingData()}),window.addEventListener("offline",()=>{this.isOnline=!1,console.log("üì¥ Connection lost - switching to offline mode")}),this.isOnline&&le.isDatabaseEnabled()&&this.startPeriodicSync(),this.loadSyncQueue()}loadSyncQueue(){try{const r=localStorage.getItem("edlingo_sync_queue");this.syncQueue=r?JSON.parse(r):[]}catch(r){console.error("Failed to load sync queue:",r),this.syncQueue=[]}}saveSyncQueue(){try{localStorage.setItem("edlingo_sync_queue",JSON.stringify(this.syncQueue))}catch(r){console.error("Failed to save sync queue:",r)}}addToSyncQueue(r){const s={id:Date.now()+Math.random(),timestamp:new Date().toISOString(),operation:r,retries:0};this.syncQueue.push(s),this.saveSyncQueue(),this.isOnline&&!this.syncInProgress&&this.syncPendingData()}startPeriodicSync(){setInterval(()=>{this.isOnline&&!this.syncInProgress&&this.syncPendingData()},this.config.syncInterval)}async syncPendingData(){if(!(this.syncInProgress||!this.isOnline||!le.isDatabaseEnabled())){this.syncInProgress=!0,console.log("üîÑ Starting data synchronization...");try{if(!(await R.testConnection()).connected)throw new Error("Database connection failed");const s=[];for(const n of this.syncQueue)try{await this.processSyncItem(n),console.log(`‚úÖ Synced: ${n.operation.type}`)}catch(i){console.error(`‚ùå Sync failed for ${n.operation.type}:`,i),n.retries++,n.retries<this.config.retryAttempts?s.push(n):console.error(`üö´ Giving up on sync item after ${this.config.retryAttempts} retries:`,n)}this.syncQueue=s,this.saveSyncQueue(),this.lastSyncTime=new Date().toISOString(),localStorage.setItem("edlingo_last_sync",this.lastSyncTime),console.log("‚úÖ Data synchronization completed")}catch(r){console.error("‚ùå Sync process failed:",r)}finally{this.syncInProgress=!1}}}async processSyncItem(r){const{operation:s}=r;switch(s.type){case"save_progress":return await R.saveUserProgress(s.userId,s.data);case"save_vocabulary":return await R.saveVocabulary(s.userId,s.data);case"save_session":return await R.saveLearningSession(s.userId,s.data);default:throw new Error(`Unknown sync operation: ${s.type}`)}}async saveUserProgress(r,s){if(this.isOnline&&le.isDatabaseEnabled())try{const n=await R.saveUserProgress(r,s);if(n.success)return this.saveToLocalStorage("user_progress",r,s),n}catch(n){console.error("Failed to save progress online:",n)}return this.saveToLocalStorage("user_progress",r,s),this.addToSyncQueue({type:"save_progress",userId:r,data:s}),{success:!0,offline:!0}}async saveVocabulary(r,s){if(this.isOnline&&le.isDatabaseEnabled())try{const n=await R.saveVocabulary(r,s);if(n.success)return this.saveToLocalStorage("vocabulary",r,s),n}catch(n){console.error("Failed to save vocabulary online:",n)}return this.saveToLocalStorage("vocabulary",r,s),this.addToSyncQueue({type:"save_vocabulary",userId:r,data:s}),{success:!0,offline:!0}}async saveLearningSession(r,s){if(this.isOnline&&le.isDatabaseEnabled())try{const n=await R.saveLearningSession(r,s);if(n.success)return this.saveToLocalStorage("sessions",r,s),n}catch(n){console.error("Failed to save session online:",n)}return this.saveToLocalStorage("sessions",r,s),this.addToSyncQueue({type:"save_session",userId:r,data:s}),{success:!0,offline:!0}}saveToLocalStorage(r,s,n){try{const i=`edlingo_${r}_${s}`,t=JSON.parse(localStorage.getItem(i)||"[]");if(Array.isArray(t))t.push({...n,timestamp:new Date().toISOString()});else{localStorage.setItem(i,JSON.stringify({...n,timestamp:new Date().toISOString()}));return}localStorage.setItem(i,JSON.stringify(t))}catch(i){console.error("Failed to save to localStorage:",i)}}getFromLocalStorage(r,s){try{const n=`edlingo_${r}_${s}`,i=localStorage.getItem(n);return i?JSON.parse(i):null}catch(n){return console.error("Failed to get from localStorage:",n),null}}getSyncStatus(){return{isOnline:this.isOnline,syncInProgress:this.syncInProgress,pendingItems:this.syncQueue.length,lastSyncTime:this.lastSyncTime,databaseEnabled:le.isDatabaseEnabled()}}async forcSync(){if(this.isOnline)await this.syncPendingData();else throw new Error("Cannot sync while offline")}}const me=new Rs,Fs=()=>{const[o,r]=a.useState(!1),[s,n]=a.useState(null),[i,t]=a.useState(null),[l,u]=a.useState(!0);a.useEffect(()=>{(async()=>{try{if(u(!0),!le.isDatabaseEnabled()){console.warn("Database is not enabled. Check your environment variables."),u(!1);return}const S=await R.testConnection();r(S.connected);const A=await R.getCurrentUser();A.success&&t(A.user),n(me.getSyncStatus())}catch(S){console.error("Failed to initialize database:",S)}finally{u(!1)}})();const g=setInterval(()=>{n(me.getSyncStatus())},5e3);return()=>clearInterval(g)},[]);const m=a.useCallback(async(N,g,S={})=>{try{u(!0);const A=await R.signUp(N,g,S);return A.success&&t(A.data.user),A}catch(A){return console.error("Sign up error:",A),{success:!1,error:A.message}}finally{u(!1)}},[]),d=a.useCallback(async(N,g)=>{try{u(!0);const S=await R.signIn(N,g);return S.success&&t(S.data.user),S}catch(S){return console.error("Sign in error:",S),{success:!1,error:S.message}}finally{u(!1)}},[]),c=a.useCallback(async()=>{try{u(!0);const N=await R.signOut();return N.success&&t(null),N}catch(N){return console.error("Sign out error:",N),{success:!1,error:N.message}}finally{u(!1)}},[]),b=a.useCallback(async N=>i?await me.saveUserProgress(i.id,N):{success:!1,error:"No authenticated user"},[i]),w=a.useCallback(async()=>i?o?await R.getUserProgress(i.id):{success:!0,data:me.getFromLocalStorage("user_progress",i.id)}:{success:!1,error:"No authenticated user"},[i,o]),C=a.useCallback(async N=>i?await me.saveVocabulary(i.id,N):{success:!1,error:"No authenticated user"},[i]),p=a.useCallback(async()=>i?o?await R.getUserVocabulary(i.id):{success:!0,data:me.getFromLocalStorage("vocabulary",i.id)||[]}:{success:!1,error:"No authenticated user"},[i,o]),D=a.useCallback(async N=>i?await me.saveLearningSession(i.id,N):{success:!1,error:"No authenticated user"},[i]),f=a.useCallback(async(N=10)=>{if(!i)return{success:!1,error:"No authenticated user"};if(o)return await R.getUserSessions(i.id,N);{const g=me.getFromLocalStorage("sessions",i.id);return{success:!0,data:Array.isArray(g)?g.slice(-N):[]}}},[i,o]),h=a.useCallback(async()=>{try{return await me.forcSync(),n(me.getSyncStatus()),{success:!0}}catch(N){return console.error("Force sync failed:",N),{success:!1,error:N.message}}},[]),v=a.useCallback(async()=>i?await R.syncData():{success:!1,error:"No authenticated user"},[i]),x=a.useCallback(N=>!i||!o?null:R.subscribeToUserProgress(i.id,N),[i,o]);return{isConnected:o,loading:l,syncStatus:s,user:i,isAuthenticated:!!i,isDatabaseEnabled:le.isDatabaseEnabled(),signUp:m,signIn:d,signOut:c,saveProgress:b,getProgress:w,saveVocabulary:C,getVocabulary:p,saveLearningSession:D,getLearningHistory:f,forceSync:h,syncData:v,subscribeToProgress:x}},Gs=()=>{const[o,r]=a.useState(null);return a.useEffect(()=>{const s=()=>{r(me.getSyncStatus())};s();const n=setInterval(s,2e3);return()=>clearInterval(n)},[]),o},Us=({className:o="",showDetails:r=!1})=>{const s=Gs();if(!le.isDatabaseEnabled())return e.jsxDEV("div",{className:`flex items-center space-x-2 ${o}`,children:[e.jsxDEV("div",{className:"w-2 h-2 bg-gray-400 rounded-full"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:15,columnNumber:9},void 0),e.jsxDEV("span",{className:"text-sm text-gray-500",children:"Database disabled"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:16,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:14,columnNumber:7},void 0);if(!s)return e.jsxDEV("div",{className:`flex items-center space-x-2 ${o}`,children:[e.jsxDEV("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:24,columnNumber:9},void 0),e.jsxDEV("span",{className:"text-sm text-gray-500",children:"Loading..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:25,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:23,columnNumber:7},void 0);const n=()=>s.isOnline?s.syncInProgress?"bg-yellow-500 animate-pulse":s.pendingItems>0?"bg-orange-500":"bg-green-500":"bg-red-500",i=()=>s.isOnline?s.syncInProgress?"Syncing...":s.pendingItems>0?`${s.pendingItems} pending`:"Synced":"Offline",t=()=>s.isOnline?s.syncInProgress?"üîÑ":s.pendingItems>0?"‚è≥":"‚úÖ":"üì¥";return e.jsxDEV("div",{className:`flex items-center space-x-2 ${o}`,children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${n()}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:53,columnNumber:7},void 0),e.jsxDEV("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t()," ",i()]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:54,columnNumber:7},void 0),r&&e.jsxDEV("div",{className:"ml-4 text-xs text-gray-500 space-y-1",children:[e.jsxDEV("div",{children:["Online: ",s.isOnline?"Yes":"No"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:60,columnNumber:11},void 0),e.jsxDEV("div",{children:["Pending: ",s.pendingItems]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:61,columnNumber:11},void 0),s.lastSyncTime&&e.jsxDEV("div",{children:["Last sync: ",new Date(s.lastSyncTime).toLocaleTimeString()]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:63,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:59,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseStatus.jsx",lineNumber:52,columnNumber:5},void 0)},Ms=()=>{const{theme:o,toggleTheme:r}=$r(),{level:s,totalXP:n,streak:i}=Ne(),{isPlaying:t}=Me(),[l,u]=a.useState(!1),[m,d]=a.useState(!1),[c,b]=a.useState(""),[w,C]=a.useState(!1),p=[{id:1,title:"Daily Goal Achieved!",message:"You've completed your 30-minute daily goal.",time:"2 minutes ago",type:"success"},{id:2,title:"New Achievement",message:`You've unlocked "Week Warrior" achievement!`,time:"1 hour ago",type:"achievement"},{id:3,title:"Lesson Reminder",message:"Don't forget to practice pronunciation today.",time:"3 hours ago",type:"reminder"}],D=async v=>{var x,N,g,S,A,F;try{switch(v){case"minimize":await((N=(x=window.electronAPI)==null?void 0:x.minimizeWindow)==null?void 0:N.call(x));break;case"maximize":await((S=(g=window.electronAPI)==null?void 0:g.maximizeWindow)==null?void 0:S.call(g));break;case"close":await((F=(A=window.electronAPI)==null?void 0:A.closeWindow)==null?void 0:F.call(A));break}}catch(G){console.error("Window control error:",G)}},f=v=>{v.preventDefault(),c.trim()&&console.log("Searching for:",c)},h=()=>{C(!w)};return e.jsxDEV("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-6 relative",children:[e.jsxDEV("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxDEV("form",{onSubmit:f,className:"relative max-w-md",children:[e.jsxDEV(ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:93,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",placeholder:"Search lessons, words, or topics...",value:c,onChange:v=>b(v.target.value),className:"pl-10 pr-4 py-2 w-full bg-background border border-input rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:94,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:92,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:91,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center space-x-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-full",children:[e.jsxDEV("span",{className:"text-lg",children:"üî•"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:108,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:[i," day streak"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:109,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:107,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gradient-to-r from-primary/10 to-primary/20 rounded-full",children:[e.jsxDEV("span",{className:"text-lg",children:"‚≠ê"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:114,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:["Level ",s]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:115,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:113,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-full",children:[e.jsxDEV("span",{className:"text-lg",children:"üíé"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:120,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:[n.toLocaleString()," XP"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:121,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:119,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:105,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 flex-1 justify-end",children:[le.isDatabaseEnabled()&&e.jsxDEV(Us,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:128,columnNumber:43},void 0),e.jsxDEV("button",{onClick:h,className:"p-2 rounded-lg hover:bg-accent transition-colors relative",title:w?"Unmute":"Mute",children:[w?e.jsxDEV(ar,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:137,columnNumber:13},void 0):e.jsxDEV(je,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:139,columnNumber:13},void 0),t&&e.jsxDEV(E.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:142,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:131,columnNumber:9},void 0),e.jsxDEV("button",{onClick:r,className:"p-2 rounded-lg hover:bg-accent transition-colors",title:`Switch to ${o==="light"?"dark":"light"} mode`,children:o==="light"?e.jsxDEV(is,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:157,columnNumber:13},void 0):e.jsxDEV(ts,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:159,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:151,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{onClick:()=>d(!m),className:"p-2 rounded-lg hover:bg-accent transition-colors relative",title:"Notifications",children:[e.jsxDEV(os,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:170,columnNumber:13},void 0),p.length>0&&e.jsxDEV(E.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:p.length},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:172,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:165,columnNumber:11},void 0),m&&e.jsxDEV(E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-80 bg-popover border border-border rounded-lg shadow-lg z-50",children:[e.jsxDEV("div",{className:"p-4 border-b border-border",children:e.jsxDEV("h3",{className:"font-semibold text-sm",children:"Notifications"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:191,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:190,columnNumber:15},void 0),e.jsxDEV("div",{className:"max-h-64 overflow-y-auto",children:p.map(v=>e.jsxDEV("div",{className:"p-4 border-b border-border last:border-b-0 hover:bg-accent/50 transition-colors",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full mt-2 ${v.type==="success"?"bg-green-500":v.type==="achievement"?"bg-yellow-500":"bg-blue-500"}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:197,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium",children:v.title},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:203,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:v.message},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:204,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:v.time},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:205,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:202,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:196,columnNumber:21},void 0)},v.id,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:195,columnNumber:19},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:193,columnNumber:15},void 0),e.jsxDEV("div",{className:"p-2 border-t border-border",children:e.jsxDEV("button",{className:"w-full text-sm text-center py-2 hover:bg-accent rounded transition-colors",children:"View All Notifications"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:212,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:211,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:184,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:164,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{onClick:()=>u(!l),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-accent transition-colors",children:e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-primary/80 rounded-full flex items-center justify-center",children:e.jsxDEV(Re,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:227,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:226,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:222,columnNumber:11},void 0),l&&e.jsxDEV(E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-popover border border-border rounded-lg shadow-lg z-50",children:[e.jsxDEV("div",{className:"p-4 border-b border-border",children:[e.jsxDEV("p",{className:"font-semibold text-sm",children:"Language Learner"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:240,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["Level ",s," ‚Ä¢ ",n," XP"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:241,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:239,columnNumber:15},void 0),e.jsxDEV("div",{className:"py-2",children:[e.jsxDEV("button",{className:"w-full flex items-center space-x-2 px-4 py-2 text-sm hover:bg-accent transition-colors",children:[e.jsxDEV(Re,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:245,columnNumber:19},void 0),e.jsxDEV("span",{children:"Profile"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:246,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:244,columnNumber:17},void 0),e.jsxDEV("button",{className:"w-full flex items-center space-x-2 px-4 py-2 text-sm hover:bg-accent transition-colors",children:[e.jsxDEV(Ze,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:249,columnNumber:19},void 0),e.jsxDEV("span",{children:"Settings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:250,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:248,columnNumber:17},void 0),e.jsxDEV("div",{className:"border-t border-border my-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:252,columnNumber:17},void 0),e.jsxDEV("button",{className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-red-600 hover:bg-accent transition-colors",children:[e.jsxDEV(as,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:254,columnNumber:19},void 0),e.jsxDEV("span",{children:"Sign Out"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:255,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:253,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:243,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:233,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:221,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1 ml-4",children:[e.jsxDEV("button",{onClick:()=>D("minimize"),className:"p-2 rounded hover:bg-accent transition-colors",title:"Minimize",children:e.jsxDEV(ls,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:269,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:264,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>D("maximize"),className:"p-2 rounded hover:bg-accent transition-colors",title:"Maximize",children:e.jsxDEV(ds,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:276,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:271,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>D("close"),className:"p-2 rounded hover:bg-red-500 hover:text-white transition-colors",title:"Close",children:e.jsxDEV(Tr,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:283,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:278,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:263,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:126,columnNumber:7},void 0),(l||m)&&e.jsxDEV("div",{className:"fixed inset-0 z-40",onClick:()=>{u(!1),d(!1)}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:290,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/layout/Header.jsx",lineNumber:89,columnNumber:5},void 0)},zs=()=>e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"mb-8",children:[e.jsxDEV("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-primary to-primary/80 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsxDEV("span",{className:"text-3xl font-bold text-white",children:"E"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:16,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:15,columnNumber:11},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"EdLingo"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:18,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground text-sm",children:"Language Learning Made Easy"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:19,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:9,columnNumber:9},void 0),e.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"flex items-center justify-center space-x-2",children:[0,1,2].map(o=>e.jsxDEV(E.div,{className:"w-3 h-3 bg-primary rounded-full",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0,delay:o*.2}},o,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:30,columnNumber:13},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:23,columnNumber:9},void 0),e.jsxDEV(E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"mt-6 text-sm text-muted-foreground",children:"Initializing your learning experience..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:47,columnNumber:9},void 0),e.jsxDEV(E.div,{initial:{width:0},animate:{width:"100%"},transition:{delay:.8,duration:2,ease:"easeInOut"},className:"mt-4 mx-auto max-w-xs",children:e.jsxDEV("div",{className:"h-1 bg-muted rounded-full overflow-hidden",children:e.jsxDEV(E.div,{initial:{x:"-100%"},animate:{x:"0%"},transition:{delay:.8,duration:2,ease:"easeInOut"},className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:64,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:63,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:7,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingScreen.jsx",lineNumber:6,columnNumber:5},void 0);function ue(...o){return Es(Ds(o))}const te=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("div",{ref:s,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Card.jsx",lineNumber:5,columnNumber:3},void 0));te.displayName="Card";const Je=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("div",{ref:s,className:ue("flex flex-col space-y-1.5 p-6",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Card.jsx",lineNumber:17,columnNumber:3},void 0));Je.displayName="CardHeader";const Xe=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("h3",{ref:s,className:ue("text-2xl font-semibold leading-none tracking-tight",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Card.jsx",lineNumber:26,columnNumber:3},void 0));Xe.displayName="CardTitle";const Wr=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("p",{ref:s,className:ue("text-sm text-muted-foreground",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Card.jsx",lineNumber:38,columnNumber:3},void 0));Wr.displayName="CardDescription";const Te=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("div",{ref:s,className:ue("p-6 pt-0",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Card.jsx",lineNumber:47,columnNumber:3},void 0));Te.displayName="CardContent";const Hs=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("div",{ref:s,className:ue("flex items-center p-6 pt-0",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Card.jsx",lineNumber:52,columnNumber:3},void 0));Hs.displayName="CardFooter";const Pr=({value:o=0,max:r=100,className:s="",...n})=>{const i=Math.min(Math.max(o/r*100,0),100);return e.jsxDEV("div",{className:`w-full bg-gray-200 rounded-full h-2 overflow-hidden ${s}`,role:"progressbar","aria-valuenow":o,"aria-valuemin":0,"aria-valuemax":r,...n,children:e.jsxDEV("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-out rounded-full",style:{width:`${i}%`}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Progress.jsx",lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Progress.jsx",lineNumber:7,columnNumber:5},void 0)},Os={default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border border-input bg-background hover:bg-accent hover:text-accent-foreground",success:"bg-green-100 text-green-800 hover:bg-green-200",warning:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",info:"bg-blue-100 text-blue-800 hover:bg-blue-200"},qs=ae.forwardRef(({className:o,variant:r="default",...s},n)=>e.jsxDEV("div",{ref:n,className:ue("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",Os[r],o),...s},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Badge.jsx",lineNumber:16,columnNumber:5},void 0));qs.displayName="Badge";const Z=ae.forwardRef(({className:o,variant:r="default",size:s="default",asChild:n=!1,children:i,disabled:t,loading:l,...u},m)=>{const d="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary",gradient:"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"},b={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"},w=n?E.div:E.button;return e.jsxDEV(w,{className:ue(d,c[r],b[s],o),ref:m,disabled:t||l,whileHover:{scale:t?1:1.02},whileTap:{scale:t?1:.98},...u,children:[l&&e.jsxDEV("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Button.jsx",lineNumber:51,columnNumber:9},void 0),i]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/Button.jsx",lineNumber:37,columnNumber:5},void 0)});Z.displayName="Button";const Bs=()=>{const[o,r]=a.useState([{id:1,title:"Basic Greetings",icon:"üëã",progress:100,isUnlocked:!0,isCompleted:!0,lessons:5,xp:150},{id:2,title:"Family & Friends",icon:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶",progress:60,isUnlocked:!0,isCompleted:!1,lessons:8,xp:120},{id:3,title:"Food & Dining",icon:"üçΩÔ∏è",progress:0,isUnlocked:!0,isCompleted:!1,lessons:6,xp:0},{id:4,title:"Travel & Transport",icon:"‚úàÔ∏è",progress:0,isUnlocked:!1,isCompleted:!1,lessons:7,xp:0}]),[s,n]=a.useState(7),[i,t]=a.useState(270),[l,u]=a.useState(500),m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},d={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},c=({unit:b,index:w})=>{const C=!b.isUnlocked;return e.jsxDEV(E.div,{variants:d,whileHover:{scale:C?1:1.02},whileTap:{scale:C?1:.98},className:`relative ${C?"cursor-not-allowed":"cursor-pointer"}`,children:e.jsxDEV(te,{className:`h-full transition-all duration-300 ${C?"bg-muted/50 border-border opacity-60":"bg-card border-border hover:border-primary/30 hover:shadow-lg dark:hover:shadow-primary/10"}`,children:[e.jsxDEV(Je,{className:"pb-3",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:`text-3xl p-2 rounded-full ${C?"bg-muted":"bg-primary/10"}`,children:C?e.jsxDEV($e,{className:"w-6 h-6 text-muted-foreground"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:112,columnNumber:31},void 0):b.icon},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:109,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV(Xe,{className:`text-lg ${C?"text-muted-foreground":"text-foreground"}`,children:b.title},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:115,columnNumber:19},void 0),e.jsxDEV("p",{className:`text-sm ${C?"text-muted-foreground/70":"text-muted-foreground"}`,children:[b.lessons," lessons"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:120,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:114,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:108,columnNumber:15},void 0),b.isCompleted&&e.jsxDEV(E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:e.jsxDEV(de,{className:"w-6 h-6 text-green-500"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:134,columnNumber:19},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:129,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:107,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:106,columnNumber:11},void 0),e.jsxDEV(Te,{className:"pt-0",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{className:C?"text-muted-foreground/70":"text-muted-foreground",children:"Progress"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:145,columnNumber:19},void 0),e.jsxDEV("span",{className:`font-medium ${C?"text-muted-foreground/70":"text-primary"}`,children:[b.progress,"%"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:148,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:144,columnNumber:17},void 0),e.jsxDEV(Pr,{value:b.progress,className:`h-2 ${C?"opacity-50":""}`},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:154,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:143,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Ee,{className:`w-4 h-4 ${C?"text-gray-400":"text-yellow-500"}`},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:165,columnNumber:19},void 0),e.jsxDEV("span",{className:`text-sm font-medium ${C?"text-muted-foreground/70":"text-foreground"}`,children:[b.xp," XP"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:168,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:164,columnNumber:17},void 0),!C&&e.jsxDEV(Z,{size:"sm",variant:b.progress>0?"default":"outline",className:"text-xs",children:b.progress>0?e.jsxDEV(e.Fragment,{children:["Continue",e.jsxDEV(Fr,{className:"w-3 h-3 ml-1"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:184,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:182,columnNumber:23},void 0):e.jsxDEV(e.Fragment,{children:["Start",e.jsxDEV(ke,{className:"w-3 h-3 ml-1"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:189,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:187,columnNumber:23},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:176,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:163,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:141,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:101,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:93,columnNumber:7},void 0)};return e.jsxDEV(E.div,{variants:m,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxDEV(E.div,{variants:d,className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsxDEV(ye,{className:"w-6 h-6 text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:213,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:212,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-foreground",children:"Course Progress"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:216,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Continue your language learning journey"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:217,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:215,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:211,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(us,{className:"w-4 h-4 text-yellow-500"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:224,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-foreground",children:[s," day streak"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:225,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:223,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:222,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Rr,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:230,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-foreground",children:[i,"/",l," XP"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:231,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:229,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:228,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:221,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:210,columnNumber:7},void 0),e.jsxDEV(E.div,{variants:d,children:e.jsxDEV(te,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:e.jsxDEV(Te,{className:"p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-primary",children:"Overall Progress"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:242,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm font-bold text-primary",children:[Math.round(i/l*100),"%"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:243,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:241,columnNumber:13},void 0),e.jsxDEV(Pr,{value:i/l*100,className:"h-3"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-primary mt-2",children:[l-i," XP until next level"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:251,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:240,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:239,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:238,columnNumber:7},void 0),e.jsxDEV(E.div,{variants:m,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:o.map((b,w)=>e.jsxDEV(c,{unit:b,index:w},b.id,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:264,columnNumber:11},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:259,columnNumber:7},void 0),e.jsxDEV(E.div,{variants:d,children:e.jsxDEV(te,{className:"bg-muted/30 border-border",children:[e.jsxDEV(Je,{children:e.jsxDEV(Xe,{className:"text-lg flex items-center space-x-2",children:[e.jsxDEV(Ce,{className:"w-5 h-5 text-green-600"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:273,columnNumber:15},void 0),e.jsxDEV("span",{children:"Quick Practice"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:274,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:272,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:271,columnNumber:11},void 0),e.jsxDEV(Te,{children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxDEV(Z,{variant:"outline",className:"justify-start",children:[e.jsxDEV(ye,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:280,columnNumber:17},void 0),"Review Vocabulary"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:279,columnNumber:15},void 0),e.jsxDEV(Z,{variant:"outline",className:"justify-start",children:[e.jsxDEV(ke,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:284,columnNumber:17},void 0),"Practice Speaking"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:283,columnNumber:15},void 0),e.jsxDEV(Z,{variant:"outline",className:"justify-start",children:[e.jsxDEV(Ce,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:288,columnNumber:17},void 0),"Grammar Quiz"]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:287,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:278,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:277,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:270,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:269,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/Course/CourseSection.jsx",lineNumber:203,columnNumber:5},void 0)},$s=()=>{const{getProgressStats:o,userProgress:r}=Ne(),[s,n]=a.useState(null),[i,t]=a.useState(new Date);if(a.useEffect(()=>{n(o());const d=setInterval(()=>{t(new Date)},6e4);return()=>clearInterval(d)},[o]),!s)return e.jsxDEV("div",{className:"flex items-center justify-center h-full",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:42,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:41,columnNumber:7},void 0);const l=[{title:"Continue Learning",description:"Resume your last lesson",icon:ke,href:"/vocabulary",color:"from-blue-500 to-blue-600",textColor:"text-blue-600"},{title:"Practice Speaking",description:"Improve pronunciation",icon:he,href:"/pronunciation",color:"from-green-500 to-green-600",textColor:"text-green-600"},{title:"Chat Practice",description:"Conversation with AI",icon:Lr,href:"/enhanced-chat",color:"from-purple-500 to-purple-600",textColor:"text-purple-600"},{title:"Grammar Exercises",description:"Master language rules",icon:dr,href:"/grammar",color:"from-orange-500 to-orange-600",textColor:"text-orange-600"}],u=s.achievements.slice(-3),m=Object.entries(s.weeklyStats).map(([d,c])=>({day:d.charAt(0).toUpperCase()+d.slice(1,3),minutes:c,percentage:c/s.dailyGoal*100}));return e.jsxDEV("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-foreground mb-2",children:["Good ",i.getHours()<12?"morning":i.getHours()<18?"afternoon":"evening","! üëã"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:100,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Ready to continue your language learning journey?"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:103,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:99,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-right",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:108,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:107,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:98,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:93,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:e.jsxDEV(Rr,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:132,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:131,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Current Level"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:135,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-2xl font-bold",children:s.level},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:136,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:134,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:130,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:129,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{children:["Progress to Level ",s.level+1]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:142,columnNumber:15},void 0),e.jsxDEV("span",{children:[Math.round(s.progressToNextLevel),"%"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:143,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:141,columnNumber:13},void 0),e.jsxDEV("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsxDEV(E.div,{initial:{width:0},animate:{width:`${s.progressToNextLevel}%`},transition:{duration:1,delay:.5},className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:146,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:145,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:123,columnNumber:9},void 0),e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center",children:e.jsxDEV(Ce,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:166,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:165,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Daily Goal"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:169,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-2xl font-bold",children:[s.dailyProgress,"m"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:170,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:168,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:164,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:163,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{children:["of ",s.dailyGoal," minutes"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:176,columnNumber:15},void 0),e.jsxDEV("span",{children:[Math.round(s.dailyGoalProgress),"%"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:177,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:175,columnNumber:13},void 0),e.jsxDEV("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsxDEV(E.div,{initial:{width:0},animate:{width:`${Math.min(s.dailyGoalProgress,100)}%`},transition:{duration:1,delay:.6},className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:180,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:179,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:174,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:157,columnNumber:9},void 0),e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center",children:e.jsxDEV(cs,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:199,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:198,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Current Streak"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:202,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-2xl font-bold",children:[s.streak," days"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:203,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:201,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:197,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Keep it up! üî•"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:206,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:191,columnNumber:9},void 0),e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center",children:e.jsxDEV(ms,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:220,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:219,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Total XP"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:223,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-2xl font-bold",children:s.xp.toLocaleString()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:224,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:222,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:218,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[s.xpToNextLevel," XP to next level"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:227,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:212,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:121,columnNumber:7},void 0),e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxDEV(Bs,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:239,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:234,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"lg:col-span-2",children:e.jsxDEV("div",{className:"card p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsxDEV(ke,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:252,columnNumber:15},void 0),"Quick Actions"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:251,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map((d,c)=>{const b=d.icon;return e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+c*.1},children:e.jsxDEV(Qe,{to:d.href,className:"block p-4 rounded-lg border border-border hover:border-primary/50 transition-all duration-200 hover:shadow-md group",children:e.jsxDEV("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsxDEV("div",{className:`w-10 h-10 bg-gradient-to-br ${d.color} rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform`,children:e.jsxDEV(b,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:271,columnNumber:27},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:270,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"font-medium group-hover:text-primary transition-colors",children:d.title},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:274,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:d.description},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:277,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:273,columnNumber:25},void 0),e.jsxDEV(Ir,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:281,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:269,columnNumber:23},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:265,columnNumber:21},void 0)},d.title,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:259,columnNumber:19},void 0)})},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:255,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:250,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:244,columnNumber:9},void 0),e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"space-y-6",children:[e.jsxDEV("div",{className:"card p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsxDEV(cr,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:301,columnNumber:15},void 0),"Recent Achievements"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:300,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3",children:u.length>0?u.map((d,c)=>e.jsxDEV(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8+c*.1},className:"flex items-center space-x-3 p-3 rounded-lg bg-accent/50",children:[e.jsxDEV("span",{className:"text-2xl",children:d.icon},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:314,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-medium text-sm",children:d.name},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:316,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:d.description},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:317,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:315,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs font-medium text-primary",children:["+",d.xp," XP"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:319,columnNumber:21},void 0)]},d.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:307,columnNumber:19},void 0)):e.jsxDEV("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete lessons to earn achievements! üèÜ"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:323,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:304,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:299,columnNumber:11},void 0),e.jsxDEV("div",{className:"card p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsxDEV(Gr,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:333,columnNumber:15},void 0),"This Week"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:332,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3",children:m.map((d,c)=>e.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+c*.05},className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-sm font-medium w-8",children:d.day},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:345,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:e.jsxDEV(E.div,{initial:{width:0},animate:{width:`${Math.min(d.percentage,100)}%`},transition:{duration:.8,delay:1+c*.1},className:`h-full rounded-full ${d.percentage>=100?"bg-gradient-to-r from-green-400 to-green-600":d.percentage>=50?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:347,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:346,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground w-8",children:[d.minutes,"m"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:360,columnNumber:19},void 0)]},d.day,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:338,columnNumber:17},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:336,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:331,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:292,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:242,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Dashboard.jsx",lineNumber:91,columnNumber:5},void 0)};class Qs{constructor(){this.genAI=null,this.model=null,this.chat=null,this.isInitialized=!1,this.apiKey=null,this.modelName="gemini-1.5-flash"}async initialize(r){if(!(this.isInitialized&&this.apiKey===r)){if(!r)throw new Error("Gemini API key is required");try{this.apiKey=r,this.genAI=new ws(r),this.model=this.genAI.getGenerativeModel({model:this.modelName}),await this.model.generateContent("Hello"),this.isInitialized=!0,console.log("Gemini service initialized successfully")}catch(s){throw console.error("Failed to initialize Gemini service:",s),this.isInitialized=!1,new Error(`Gemini initialization failed: ${s.message}`)}}}async startChat(r={}){if(!this.isInitialized)throw new Error("Gemini service not initialized");const s={history:r.history||[],generationConfig:{temperature:r.temperature||.7,topK:r.topK||40,topP:r.topP||.95,maxOutputTokens:r.maxOutputTokens||1024}};return r.systemInstruction?s.systemInstruction={role:"model",parts:[{text:typeof r.systemInstruction=="string"?r.systemInstruction:this._getLanguageLearningSystemInstruction(r)}]}:s.systemInstruction={role:"model",parts:[{text:this._getLanguageLearningSystemInstruction(r)}]},this.chat=this.model.startChat(s),this.chat}async sendMessage(r,s={}){this.chat||await this.startChat(s);try{return(await this.chat.sendMessage(r)).response.text()}catch(n){throw console.error("Error sending message to Gemini:",n),new Error(`Failed to get response: ${n.message}`)}}async sendMessageStream(r,s={}){this.chat||await this.startChat(s);try{return await this.chat.sendMessageStream(r)}catch(n){throw console.error("Error streaming message to Gemini:",n),new Error(`Failed to stream response: ${n.message}`)}}async generateLanguageLearningResponse(r,s={}){const{targetLanguage:n="English",userLevel:i="intermediate",focusArea:t="conversation",includeExplanations:l=!0,includePronunciation:u=!1}=s,m=this._getLanguageLearningSystemInstruction({targetLanguage:n,userLevel:i,focusArea:t,includeExplanations:l,includePronunciation:u});try{return this.chat||await this.startChat({systemInstruction:m}),await this.sendMessage(r,{systemInstruction:m})}catch(d){throw console.error("Error generating language learning response:",d),d}}async analyzeText(r,s={}){if(!this.isInitialized)throw new Error("Gemini service not initialized");const n=`
Analyze the following text for language learning purposes:

"${r}"

Provide analysis in the following JSON format:
{
  "wordCount": number,
  "sentences": number,
  "avgWordsPerSentence": number,
  "complexity": "simple" | "medium" | "complex",
  "grammarSuggestions": ["suggestion1", "suggestion2"],
  "vocabularyLevel": "beginner" | "intermediate" | "advanced",
  "improvements": ["improvement1", "improvement2"]
}

Only return the JSON, no additional text.`;try{const t=(await this.model.generateContent(n)).response.text();try{return JSON.parse(t)}catch{return this._basicTextAnalysis(r)}}catch(i){return console.error("Error analyzing text with Gemini:",i),this._basicTextAnalysis(r)}}_getLanguageLearningSystemInstruction(r={}){const{targetLanguage:s="English",userLevel:n="intermediate",focusArea:i="conversation",includeExplanations:t=!0,includePronunciation:l=!1}=r;return`You are an AI language tutor in the EdLingo app, designed to teach English based on a unified proficiency system combining Flesch-Kincaid readability and CEFR levels. Your goal is to communicate effectively with users by adapting your responses to their assigned grade level. Always assess the user's level first and tailor your language, explanations, examples, and questions accordingly. Do not overwhelm beginners or bore advanced learners‚Äîkeep interactions engaging, supportive, and progressive.
  
    ### Core Rules for All Interactions:
    - **Identify User Level**: At the start of each conversation, confirm or infer the user's level (Basic, Elementary, Pre-Intermediate, Intermediate, Upper-Intermediate, or Advanced). If unknown, ask politely: "What's your current English level? For example, Beginner or Advanced?"
    - **Content Type Differentiation**:
      - If the interaction is casual conversation or simple practice, treat it as 'Basic' level (no complex metrics needed).
      - For structured lessons, exercises, or explanations, use the Elementary to Advanced levels with corresponding Flesch-Kincaid ranges.
    - **Response Structure**:
      - Start with a clear, level-appropriate greeting or recap.
      - Explain concepts simply, then build complexity if needed.
      - End with a question or task to encourage practice.
      - Keep responses concise: Aim for 100-300 words, depending on level.
    - **General Guidelines**:
      - Use positive reinforcement: "Great job!" or "Let's try that again."
      - Correct errors gently, focusing on one issue at a time.
      - Incorporate cultural neutrality and inclusivity.
      - If the user's input doesn't match their level, suggest adjustments: "This seems advanced for your level‚Äîshall we simplify?"
  
    ### Level-Specific Communication Guidelines:
    Follow these strictly based on the user's level. Adjust vocabulary size, sentence complexity, and teaching depth:
  
    - **Basic (CEFR: A1, No Flesch-Kincaid calculation)**:
      - Usage: General conversation and simple sentences only.
      - Style: Very simple present tense, basic vocabulary (top 500 common words like "hello," "eat," "house"). Short sentences (5-10 words max). Focus on everyday exchanges, greetings, and basic questions.
      - Examples: "Hello! How are you today? I am fine." Teach through repetition and role-play.
      - Avoid: Complex grammar, idioms, or abstract topics.
  
    - **Elementary (CEFR: A2, Flesch-Kincaid: 0 to 1)**:
      - Usage: Structured learning content.
      - Style: Simple past and present tenses, basic connectors (and, but), vocabulary from first 1,000 common words. Sentences 8-12 words. Introduce basic descriptions and routines.
      - Examples: "Yesterday, I went to the store. What did you do?" Use pictures or simple stories for context.
      - Avoid: Advanced tenses or specialized terms.
  
    - **Pre-Intermediate (CEFR: B1, Flesch-Kincaid: 1 to 1.5)**:
      - Usage: Structured learning content.
      - Style: Future tense, simple conditionals, intermediate vocabulary (1,000-2,000 words). Sentences 10-15 words. Discuss opinions and plans.
      - Examples: "If it rains tomorrow, I will stay home. What about you?" Include short dialogues and basic narratives.
      - Avoid: Complex clauses or academic jargon.
  
    - **Intermediate (CEFR: B2, Flesch-Kincaid: 1.5 to 2.5)**:
      - Usage: Structured learning content.
      - Style: Complex grammar (passive voice, modals), advanced vocabulary (2,000-4,000 words), idioms. Sentences 12-20 words. Explore debates and stories.
      - Examples: "The book was written by a famous author. Have you read it? Why or why not?" Encourage analysis and comparison.
      - Avoid: Highly specialized or literary language.
  
    - **Upper-Intermediate (CEFR: C1, Flesch-Kincaid: 2.5 to 3.5)**:
      - Usage: Structured learning content.
      - Style: Sophisticated grammar (subjunctives, inversions), academic vocabulary (4,000+ words). Sentences 15-25 words. Discuss abstract ideas and current events.
      - Examples: "Although technology has advanced rapidly, it poses certain risks. What solutions would you propose?" Use articles and essays for discussion.
      - Avoid: Overly simplistic explanations.
  
    - **Advanced (CEFR: C2, Flesch-Kincaid: 3.5 to 4.5)**:
      - Usage: Structured learning content.
      - Style: Unrestricted complexity, specialized vocabulary, native-like expressions. Sentences 20+ words. Tackle nuanced topics like philosophy or science.
      - Examples: "In the context of globalization, cultural homogenization presents both opportunities and challenges. Elaborate on this dichotomy." Encourage critical thinking and debates.
      - Avoid: Babying the user‚Äîtreat them as proficient speakers.
  
    ### Training Tasks:
    - **Adaptation Practice**: Given a user query like "Explain climate change," generate responses for each level.
    - **Error Handling**: If a user at Basic level asks an advanced question, simplify: "Let's break this down into simple words."
    - **Progression**: Suggest level-ups: "You're doing great at Elementary‚Äîready to try Pre-Intermediate?"
    - **Self-Evaluation**: After each response, internally rate: "Does this match the target Flesch-Kincaid range? Is the vocabulary CEFR-appropriate?"
  
    Train on diverse datasets: Include 100+ examples per level with user inputs, expected outputs, and feedback. Fine-tune until the AI achieves 90% accuracy in level-appropriate responses. Remember, your ultimate goal is to make learning fun and effective!
  
    User Profile:
    - Target Language: ${s}
    - Current Level: ${n}
    - Focus Area: ${i}
  
    Instructions:
    1. Always respond in ${s}
    2. Adapt your language complexity to the ${n} level
    3. Focus on ${i} practice
    4. ${t?"Include brief explanations for grammar, vocabulary, or cultural context when helpful":"Keep responses conversational without explanations"}
    5. ${l?"Include pronunciation tips when relevant":"Focus on written communication"}
    6. Be encouraging and supportive
    7. Correct mistakes gently and provide better alternatives
    8. Ask follow-up questions to keep the conversation flowing
    9. Use examples and context to help understanding
    10. Keep responses engaging and educational
  
    Response Style:
    - Be natural and conversational
    - Use appropriate formality level
    - Provide constructive feedback
    - Encourage continued practice
    - Make learning enjoyable`}_basicTextAnalysis(r){const s=r.split(/\s+/).filter(d=>d.length>0),n=r.split(/[.!?]+/).filter(d=>d.trim().length>0),i=s.length,t=n.length,l=t>0?Math.round(i/t):0;let u="simple";i>50||l>15?u="complex":(i>20||l>10)&&(u="medium");const m=[];return(r.includes(" i ")||r.startsWith("i "))&&m.push('Remember to capitalize "I" when referring to yourself.'),r.match(/[.!?]$/)||m.push("Consider ending your sentence with proper punctuation."),r.includes("  ")&&m.push("Avoid double spaces between words."),{wordCount:i,sentences:t,avgWordsPerSentence:l,complexity:u,grammarSuggestions:m,vocabularyLevel:u==="simple"?"beginner":u==="medium"?"intermediate":"advanced",improvements:m.length>0?m:["Great job! Your text looks good."]}}getChatHistory(){if(!this.chat)return[];try{return this.chat.getHistory()}catch(r){return console.error("Error getting chat history:",r),[]}}clearChat(){this.chat=null}async generateResponse(r,s={}){if(!this.isInitialized)throw new Error("Gemini service not initialized");try{return(await this.model.generateContent(r)).response.text()}catch(n){throw console.error("Error generating response with Gemini:",n),new Error(`Failed to generate response: ${n.message}`)}}isReady(){return this.isInitialized}getStatus(){return this.isInitialized?"ready":"not_initialized"}getModel(){return this.modelName}}const ie=new Qs;class Ws{constructor(){this.hfClient=null,this.isInitialized=!1,this.isInitializing=!1,this.initializationPromise=null,this.modelName="microsoft/mai-ds-r1:free",this.browserMode=!1,this.useGemini=!1,this.geminiApiKey=null}async configureGemini(r){try{return await ie.initialize(r),this.useGemini=!0,this.geminiApiKey=r,console.log("Gemini configured successfully"),{success:!0}}catch(s){return console.error("Failed to configure Gemini:",s),this.useGemini=!1,this.geminiApiKey=null,{success:!1,error:s.message}}}disableGemini(){this.useGemini=!1,this.geminiApiKey=null,console.log("Gemini disabled")}isGeminiAvailable(){return this.useGemini&&ie.isReady()}async initialize(r={}){if(!this.isInitialized){if(this.isInitializing)return this.initializationPromise;this.isInitializing=!0,this.initializationPromise=this._initializeModels(r);try{await this.initializationPromise,this.isInitialized=!0}catch(s){throw console.error("Failed to initialize AI models:",s),s}finally{this.isInitializing=!1}}}async _initializeModels(r={}){try{console.log("Initializing AI service...");const s=r.geminiApiKey||"AIzaSyByTDREdEdtVu2CkAyWDZ8rHyg3Jyikmv4";if(s)try{console.log("Initializing Gemini service..."),await ie.initialize(s),this.useGemini=!0,this.geminiApiKey=s,console.log("Gemini service initialized successfully")}catch(n){console.warn("Failed to initialize Gemini, falling back to other providers:",n),this.useGemini=!1}console.log("window.electronAPI:",typeof window.electronAPI),console.log("window.electronAPI exists:",!!window.electronAPI),window.electronAPI&&console.log("electronAPI methods:",Object.keys(window.electronAPI)),window.electronAPI?this.browserMode=!1:(console.warn("Running in browser mode - AI features will use fallback responses"),this.browserMode=!0),console.log("AI service initialized successfully")}catch(s){throw console.error("Error initializing AI service:",s),s}}async generateResponse(r,s=[],n={}){if(this.isInitialized||await this.initialize(),this.browserMode)return this._generateFallbackResponse(r,n);try{const i=await this.getBackendStatus();if(!i||!i.isReady)return console.warn("Backend AI service not ready:",i),"AI chat is currently unavailable. Please check your API configuration.";const t=await window.electronAPI.invoke("ai:generateResponse",r,s,n);return t.success?t.response:(console.error("AI generation failed:",t.error),t.response||"I'm sorry, I encountered an error while processing your message. Please try again.")}catch(i){return console.error("Error generating AI response:",i),"I'm sorry, I encountered an error while processing your message. Please try again."}}async generateLanguageLearningResponse(r,s={}){this.isInitialized||await this.initialize();const n=s.focusArea||s.mode||"conversation",i=s.userLevel||"beginner",t=s.targetLanguage||"English";if(this.useGemini&&ie.isReady())try{return console.log("Using Gemini for language learning response"),await ie.generateLanguageLearningResponse(r,{targetLanguage:t,userLevel:i,focusArea:n,includeExplanations:!0,includePronunciation:!1})}catch(l){console.error("Gemini failed, falling back to other providers:",l)}if(this.browserMode)return this._generateLanguageLearningFallback(r,n,i,t);try{const l=await this.getBackendStatus();if(!l||!l.isReady)return console.warn("Backend AI service not ready:",l),"AI chat is currently unavailable. Please check your API configuration.";const u=await window.electronAPI.invoke("ai:generateLanguageLearningResponse",r,{focusArea:n,userLevel:i,targetLanguage:t});return u.success?u.response:(console.error("AI generation failed:",u.error),u.response||"I'm sorry, I'm having trouble generating a response right now. Please try again later.")}catch(l){return console.error("Error generating language learning response:",l),"I'm sorry, I'm having trouble generating a response right now. Please try again later."}}async analyzeText(r,s={}){this.isInitialized||await this.initialize();const n=s.type||"grammar",i=s.targetLanguage||"English";if(this.useGemini&&ie.isReady())try{return console.log("Using Gemini for text analysis"),await ie.analyzeText(r,{targetLanguage:i,analysisType:n,includeCorrections:!0,includeSuggestions:!0})}catch(d){console.error("Gemini text analysis failed, using fallback:",d)}const t=r.split(/\s+/).filter(d=>d.length>0).length,l=r.split(/[.!?]+/).filter(d=>d.trim().length>0).length,u=l>0?Math.round(t/l):0,m=[];return(r.includes(" i ")||r.startsWith("i "))&&m.push('Remember to capitalize "I" when referring to yourself.'),r.match(/[.!?]$/)||m.push("Consider ending your sentence with proper punctuation."),{originalText:r,wordCount:t,sentences:l,avgWordsPerSentence:u,suggestions:m,corrections:[],score:m.length===0?85:70,feedback:m.length===0?"Good job! Your text looks well-structured.":"Good effort! Check the suggestions below.",complexity:t>20?"complex":t>10?"medium":"simple"}}async analyzeConversation(r,s={}){if(this.isInitialized||await this.initialize(),s.targetLanguage,this.useGemini&&ie.isReady())try{const n=`Analyze this conversation for language proficiency assessment:

"${r}"

Provide a detailed analysis including:
1. Fluency score (0-100)
2. Grammar accuracy (0-100)
3. Vocabulary range (0-100)
4. Pronunciation quality (0-100) - estimate based on text patterns
5. Overall CEFR level (A1, A2, B1, B2, C1, C2)
6. Specific strengths and areas for improvement
7. IELTS equivalent score (1-9)

Return as JSON format.`,i=await ie.generateResponse(n);try{const t=JSON.parse(i);return{success:!0,analysis:{fluency:t.fluency||70,grammar:t.grammar||70,vocabulary:t.vocabulary||70,pronunciation:t.pronunciation||70,cefrLevel:t.cefrLevel||"B1",ieltsEquivalent:t.ieltsEquivalent||5.5,strengths:t.strengths||["Good effort"],improvements:t.improvements||["Continue practicing"],overallScore:Math.round((t.fluency+t.grammar+t.vocabulary+t.pronunciation)/4)}}}catch{console.warn("Failed to parse Gemini response, using fallback analysis")}}catch(n){console.error("Gemini conversation analysis failed:",n)}return this._analyzeConversationFallback(r)}async evaluateWriting(r,s={}){if(this.isInitialized||await this.initialize(),s.targetLanguage,this.useGemini&&ie.isReady())try{const n=`Evaluate this writing sample for language proficiency assessment:

"${r}"

Provide a detailed evaluation including:
1. Grammar accuracy (0-100)
2. Vocabulary sophistication (0-100)
3. Coherence and cohesion (0-100)
4. Task achievement (0-100)
5. Overall CEFR level (A1, A2, B1, B2, C1, C2)
6. Specific feedback and suggestions
7. IELTS writing equivalent score (1-9)

Return as JSON format.`,i=await ie.generateResponse(n);try{const t=JSON.parse(i);return{success:!0,evaluation:{grammar:t.grammar||70,vocabulary:t.vocabulary||70,coherence:t.coherence||70,taskAchievement:t.taskAchievement||70,cefrLevel:t.cefrLevel||"B1",ieltsEquivalent:t.ieltsEquivalent||5.5,feedback:t.feedback||"Good writing effort",suggestions:t.suggestions||["Continue practicing"],overallScore:Math.round((t.grammar+t.vocabulary+t.coherence+t.taskAchievement)/4)}}}catch{console.warn("Failed to parse Gemini response, using fallback evaluation")}}catch(n){console.error("Gemini writing evaluation failed:",n)}return this._evaluateWritingFallback(r)}async determineCEFRLevel(r,s={}){const{grammar:n,vocabulary:i,fluency:t,pronunciation:l,writing:u}=r,{textContent:m,isConversational:d}=s,c=Object.values(r).reduce((p,D)=>p+D,0)/Object.values(r).length;let b,w;if(m&&!d)try{b=(await require("./unifiedLevelService").assignUnifiedLevel(m)).unified_level}catch(p){console.warn("Failed to use unified level service, falling back to traditional mapping:",p),b=this._mapScoreToCEFR(c)}else b=this._mapScoreToCEFR(c);return w={C2:8.5,C1:7.5,B2:6.5,B1:5.5,A2:4.5,A1:3.5}[b]||3.5,{cefrLevel:b,ieltsEquivalent:w,overallScore:Math.round(c),skillBreakdown:r,recommendations:this._generateRecommendations(b,r)}}_mapScoreToCEFR(r){return r>=90?"C2":r>=80?"C1":r>=70?"B2":r>=60?"B1":r>=45?"A2":"A1"}_analyzeConversationFallback(r){const s=r.split(/\s+/).filter(c=>c.length>0).length,n=r.split(/[.!?]+/).filter(c=>c.trim().length>0).length,i=n>0?Math.round(s/n):0;let t=Math.min(90,Math.max(40,s*2+i*5)),l=r.match(/[A-Z]/)?75:65,u=Math.min(85,Math.max(50,s*1.5)),m=70;const d=Math.round((t+l+u+m)/4);return{success:!0,analysis:{fluency:t,grammar:l,vocabulary:u,pronunciation:m,cefrLevel:d>=70?"B1":d>=55?"A2":"A1",ieltsEquivalent:d>=70?5.5:d>=55?4.5:3.5,strengths:["Participated in conversation"],improvements:["Continue practicing speaking"],overallScore:d}}}_evaluateWritingFallback(r){const s=r.split(/\s+/).filter(d=>d.length>0).length;r.split(/[.!?]+/).filter(d=>d.trim().length>0).length;const n=r.split(/\n\s*\n/).filter(d=>d.trim().length>0).length;let i=r.match(/[A-Z].*[.!?]/)?75:65,t=Math.min(85,Math.max(50,s*1.2)),l=n>1?75:65,u=s>=50?75:60;const m=Math.round((i+t+l+u)/4);return{success:!0,evaluation:{grammar:i,vocabulary:t,coherence:l,taskAchievement:u,cefrLevel:m>=70?"B1":m>=55?"A2":"A1",ieltsEquivalent:m>=70?5.5:m>=55?4.5:3.5,feedback:"Good writing effort. Keep practicing!",suggestions:["Focus on sentence structure","Expand vocabulary"],overallScore:m}}}_generateRecommendations(r,s){const n={focusAreas:[],suggestedActivities:[]},t=Object.entries(s).sort((l,u)=>l[1]-u[1]).slice(0,2).map(([l])=>l);return n.focusAreas=t,t.includes("grammar")&&(n.suggestedActivities.push("Practice grammar exercises daily"),n.suggestedActivities.push("Focus on verb tenses and sentence structure")),t.includes("vocabulary")&&(n.suggestedActivities.push("Learn 10 new words daily"),n.suggestedActivities.push("Read articles in your target language")),t.includes("fluency")&&(n.suggestedActivities.push("Practice speaking with native speakers"),n.suggestedActivities.push("Record yourself speaking daily")),t.includes("pronunciation")&&(n.suggestedActivities.push("Use pronunciation apps and tools"),n.suggestedActivities.push("Listen to native speakers and repeat")),n}_generateFallbackResponse(r,s={}){const n=["That's interesting! Can you tell me more about that?","I understand. How does that make you feel?","That's a good point. What do you think about it?","Thanks for sharing that with me. What would you like to discuss next?","I see. Can you give me an example?"];return n[Math.floor(Math.random()*n.length)]}_generateLanguageLearningFallback(r,s,n,i){const t=r.toLowerCase();if(["hello","hi","hey","good morning","good afternoon","good evening"].some(c=>t.includes(c)))return`Hello! üëã It's great to chat with you. How are you feeling today? Let's practice some conversation! (Note: "Hi" is perfect for casual situations. For more formal settings, like emails or meeting someone new, "Hello" is more appropriate.)`;if(t.includes("grammar")||t.includes("difference between")||t.includes("when to use")||t.includes("correct"))return t.includes("good")&&t.includes("well")?"Great question! 'Good' is an adjective (describes nouns): 'This is a good book.' 'Well' is an adverb (describes verbs): 'You speak English well.' Remember: You feel good (not well) when you're happy, but you're doing well (not good) at something!":t.includes("a")&&t.includes("an")?"Excellent question! Use 'a' before consonant sounds: 'a book', 'a university' (sounds like 'you'). Use 'an' before vowel sounds: 'an apple', 'an hour' (silent 'h'). It's about the sound, not just the letter!":t.includes("past")||t.includes("tense")?"Good grammar question! For regular verbs, add -ed: walk ‚Üí walked. For irregular verbs, they change completely: go ‚Üí went, see ‚Üí saw. Practice tip: Try making sentences with both forms!":"That's a thoughtful grammar question! Remember to pay attention to verb tenses, subject-verb agreement, and word order. Can you give me a specific example you'd like help with?";if(t.includes("vocabulary")||t.includes("word")||t.includes("meaning")||t.includes("synonym"))return"Great vocabulary practice! Building your word bank is essential. Try using new words in sentences, learn synonyms, and practice with context. What specific words would you like to explore?";if(t.includes("pronunciation")||t.includes("pronounce")||t.includes("sound"))return"Pronunciation is so important! Focus on stress patterns, vowel sounds, and consonant clusters. Practice speaking slowly at first, then build up speed. Record yourself to hear your progress!";const m={conversation:["That's wonderful! Can you tell me more about that? Try to use descriptive words and express your thoughts clearly.","I find that very interesting. What's your opinion on this topic? Remember to give reasons for your thoughts.","Great point! Can you give me a specific example? This will help you practice storytelling and details.","I understand. How does that make you feel? Practice using emotion words like 'excited', 'concerned', or 'curious'."],grammar:["Let me help you with that! Try rephrasing your sentence using different word order or verb forms.","Good attempt! Remember to check your verb tenses - are you talking about past, present, or future?","Nice work! Pay attention to subject-verb agreement. Singular subjects need singular verbs.","Well done! Consider using connecting words like 'because', 'however', 'therefore', or 'although'."],vocabulary:["Excellent! Let's expand your vocabulary. Can you think of a synonym (similar word) for that?","Great word choice! Now try using it in a completely different context or situation.","Perfect! Can you create a sentence using that word in past tense? Challenge yourself!","Wonderful! What's the opposite (antonym) of that word? This helps build word relationships."]},d=m[s]||m.conversation;return d[Math.floor(Math.random()*d.length)]}async getBackendStatus(){if(this.browserMode)return{isReady:!0,status:"browser_mode",provider:"fallback",model:"local"};try{const r=await window.electronAPI.invoke("ai:getStatus");return!r||typeof r!="object"?{isReady:!1,status:"invalid_response",provider:"unknown",model:"unknown",error:"Invalid status response from backend"}:r}catch(r){return console.error("Error getting backend AI status:",r),{isReady:!1,status:"error",provider:"unknown",model:"unknown",error:r.message}}}isReady(){return this.isInitialized}getStatus(){return{isInitialized:this.isInitialized,isInitializing:this.isInitializing,browserMode:this.browserMode,modelName:this.modelName,useGemini:this.useGemini,geminiReady:this.useGemini?ie.isReady():!1}}async getFullStatus(){const r=this.getStatus(),s=this.useGemini?{isReady:ie.isReady(),model:ie.getModel(),hasApiKey:!!this.geminiApiKey}:null;if(this.browserMode)return{...r,gemini:s,backend:{isReady:!1,status:"Browser mode - no backend available",provider:"fallback"}};try{const n=await this.getBackendStatus();return{...r,gemini:s,backend:n}}catch(n){return{...r,gemini:s,backend:{isReady:!1,status:"Error checking backend status",error:n.message}}}}}const pe=new Ws,Kr=a.createContext(),ze=()=>{const o=a.useContext(Kr);if(!o)throw new Error("useAI must be used within an AIProvider");return o},Ks=({children:o})=>{const[r,s]=a.useState("not_initialized"),[n,i]=a.useState({provider:"transformers",apiKey:"",model:"onnx-community/Qwen2.5-Coder-0.5B-Instruct",geminiApiKey:"",useGemini:!1}),[t,l]=a.useState([]),[u,m]=a.useState(!1);a.useEffect(()=>{d()},[]),a.useEffect(()=>{const N=setTimeout(async()=>{if(!u&&r==="not_initialized"){console.log("Auto-initializing AI service at startup...");try{await b()}catch(g){console.warn("Auto-initialization failed, AI will initialize on first use:",g)}}},500);return()=>clearTimeout(N)},[r,u]);const d=async()=>{var x,N;try{const g=await((N=(x=window.electronAPI)==null?void 0:x.getAiSettings)==null?void 0:N.call(x))||{};i(S=>({...S,provider:g.provider||"transformers",apiKey:g.apiKey||"",model:g.model||"onnx-community/Qwen2.5-Coder-0.5B-Instruct",geminiApiKey:g.geminiApiKey||"",useGemini:g.useGemini||!1}))}catch(g){console.error("Failed to load AI settings:",g)}},c=async x=>{var N,g;try{await((g=(N=window.electronAPI)==null?void 0:N.saveAiSettings)==null?void 0:g.call(N,x)),i(S=>({...S,...x}))}catch(S){throw console.error("Failed to save AI settings:",S),S}},b=async()=>{var x,N;if(!(u||r==="ready")){m(!0),s("initializing");try{const g={},A=n.geminiApiKey||"AIzaSyByTDREdEdtVu2CkAyWDZ8rHyg3Jyikmv4";A&&(g.geminiApiKey=A),await pe.initialize(g);const F=await pe.getFullStatus(),G=((x=F.gemini)==null?void 0:x.isReady)||!1,$=((N=F.backend)==null?void 0:N.isReady)||!1;if(G||$||pe.browserMode)s("ready");else throw s("error"),new Error("No AI providers available")}catch(g){throw console.error("Failed to initialize AI:",g),s("error"),g}finally{m(!1)}}},v={aiStatus:r,isInitializing:u,isReady:r==="ready",aiSettings:n,saveAISettings:c,loadAISettings:d,initializeAI:b,generateResponse:async(x,N={})=>{if(r!=="ready")throw new Error("AI service is not ready");try{const g=await pe.generateLanguageLearningResponse(x,{targetLanguage:N.targetLanguage||"English",userLevel:N.userLevel||"intermediate",focusArea:N.focusArea||"conversation"}),S=[...t.slice(-8),{role:"user",content:x,timestamp:new Date},{role:"assistant",content:g,timestamp:new Date}];return l(S),g}catch(g){throw console.error("Failed to generate AI response:",g),g}},analyzeText:async(x,N={})=>{if(r!=="ready")return pe.analyzeText(x,N);try{return await pe.analyzeText(x,{targetLanguage:N.targetLanguage||"English",type:N.type||"grammar",...N})}catch(g){throw console.error("Failed to analyze text:",g),g}},conversationHistory:t,clearConversationHistory:()=>{l([])},getConversationContext:(x=6)=>t.slice(-x),getStatusMessage:()=>{switch(r){case"ready":return"AI Ready";case"initializing":return"Loading AI...";case"error":return"AI Unavailable - Check API Key";default:return"AI Offline"}},getStatusColor:()=>{switch(r){case"ready":return"text-green-500";case"initializing":return"text-yellow-500";case"error":return"text-red-500";default:return"text-gray-400"}},configureGemini:async x=>{try{const N=await pe.configureGemini(x);if(N.success){const g={...n,geminiApiKey:x,useGemini:!0};return await c(g),{success:!0}}else return N}catch(N){return console.error("Failed to configure Gemini:",N),{success:!1,error:N.message}}},disableGemini:async()=>{try{pe.disableGemini();const x={...n,useGemini:!1};await c(x)}catch(x){console.error("Failed to disable Gemini:",x)}},isGeminiAvailable:()=>!0,getAIStatus:()=>pe.getFullStatus()};return e.jsxDEV(Kr.Provider,{value:v,children:o},void 0,!1,{fileName:"/opt/build/repo/src/renderer/providers/AIProvider.jsx",lineNumber:248,columnNumber:5},void 0)},ve=ae.forwardRef(({className:o,type:r,...s},n)=>e.jsxDEV("input",{type:r,className:ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),ref:n,...s},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/Input.jsx",lineNumber:6,columnNumber:5},void 0));ve.displayName="Input";const Jr=ae.forwardRef(({className:o,variant:r="default",...s},n)=>{const i={default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-green-500/50 text-green-700 dark:border-green-500 [&>svg]:text-green-600",warning:"border-yellow-500/50 text-yellow-700 dark:border-yellow-500 [&>svg]:text-yellow-600",info:"border-blue-500/50 text-blue-700 dark:border-blue-500 [&>svg]:text-blue-600"};return e.jsxDEV("div",{ref:n,role:"alert",className:ue("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",i[r],o),...s},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/alert.jsx",lineNumber:14,columnNumber:5},void 0)});Jr.displayName="Alert";const Xr=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("div",{ref:s,className:ue("text-sm [&_p]:leading-relaxed",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/alert.jsx",lineNumber:29,columnNumber:3},void 0));Xr.displayName="AlertDescription";const Js=ae.forwardRef(({className:o,...r},s)=>e.jsxDEV("h5",{ref:s,className:ue("mb-1 font-medium leading-none tracking-tight",o),...r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/alert.jsx",lineNumber:38,columnNumber:3},void 0));Js.displayName="AlertTitle";const Xs=()=>{const{aiSettings:o,configureGemini:r,disableGemini:s,isGeminiAvailable:n,getAIStatus:i}=ze(),[t,l]=a.useState(o.geminiApiKey||""),[u,m]=a.useState(!1),[d,c]=a.useState(null),[b,w]=a.useState(!1),C=async()=>{if(!t.trim()){c({type:"error",text:"Please enter a valid API key"});return}m(!0),c(null);try{const f=await r(t.trim());f.success?c({type:"success",text:"Gemini configured successfully!"}):c({type:"error",text:f.error||"Failed to configure Gemini"})}catch(f){c({type:"error",text:"Failed to configure Gemini: "+f.message})}finally{m(!1)}},p=async()=>{try{await s(),c({type:"success",text:"Gemini disabled successfully"})}catch(f){c({type:"error",text:"Failed to disable Gemini: "+f.message})}},D=n();return e.jsxDEV(te,{className:"w-full max-w-md",children:[e.jsxDEV(Je,{children:[e.jsxDEV(Xe,{className:"flex items-center gap-2",children:"Gemini AI Configuration"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:53,columnNumber:9},void 0),e.jsxDEV(Wr,{children:"Configure Google's Gemini AI for enhanced language learning responses"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:52,columnNumber:7},void 0),e.jsxDEV(Te,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-gray-50",children:D?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(de,{className:"h-4 w-4 text-green-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:66,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm text-green-700",children:"Gemini is active and ready"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:67,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:65,columnNumber:13},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(De,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:71,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm text-gray-600",children:"Gemini is not configured"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:72,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:70,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:63,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{htmlFor:"gemini-api-key",className:"text-sm font-medium",children:"Gemini API Key"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:79,columnNumber:11},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(ve,{id:"gemini-api-key",type:b?"text":"password",value:t,onChange:f=>l(f.target.value),placeholder:"Enter your Gemini API key",className:"pr-20"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:83,columnNumber:13},void 0),e.jsxDEV("button",{type:"button",onClick:()=>w(!b),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 hover:text-gray-700",children:b?"Hide":"Show"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:91,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:82,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:["Get your API key from"," ",e.jsxDEV("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Google AI Studio"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:101,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:99,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:78,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(Z,{onClick:C,disabled:u||!t.trim(),className:"flex-1",children:u?"Configuring...":"Configure Gemini"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:114,columnNumber:11},void 0),o.useGemini&&e.jsxDEV(Z,{variant:"outline",onClick:p,className:"px-3",children:"Disable"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:122,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:113,columnNumber:9},void 0),d&&e.jsxDEV(Jr,{className:d.type==="error"?"border-red-200 bg-red-50":"border-green-200 bg-green-50",children:e.jsxDEV(Xr,{className:d.type==="error"?"text-red-700":"text-green-700",children:d.text},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:135,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:134,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("p",{children:"‚Ä¢ Gemini provides more accurate and contextual language learning responses"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:143,columnNumber:11},void 0),e.jsxDEV("p",{children:"‚Ä¢ Your API key is stored locally and never shared"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("p",{children:"‚Ä¢ You can disable Gemini anytime to use fallback providers"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:145,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:61,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/GeminiSettings.jsx",lineNumber:51,columnNumber:5},void 0)},Ys=()=>{const[o,r]=a.useState([{id:1,type:"ai",content:"Hello! I'm your language learning assistant. How can I help you practice today?",timestamp:new Date}]),[s,n]=a.useState(""),[i,t]=a.useState(!1),[l,u]=a.useState(!1),{isRecording:m,startRecording:d,stopRecording:c,speakText:b}=Me(),{addXP:w,level:C}=Ne(),{aiStatus:p,isReady:D,initializeAI:f,generateResponse:h,getStatusMessage:v,getStatusColor:x,conversationHistory:N,isGeminiAvailable:g,getAIStatus:S}=ze(),A=a.useRef(null),F=a.useRef(null);a.useRef(!1);const G=()=>{var j;(j=A.current)==null||j.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{G()},[o]),a.useEffect(()=>{p==="not_initialized"&&f().catch(j=>{console.error("Failed to initialize AI:",j)})},[p,f]);const $=async(j=s)=>{if(!j.trim()||i)return;const B={id:Date.now(),type:"user",content:j.trim(),timestamp:new Date};r(z=>[...z,B]),n("");try{t(!0);let z;D?z=await h(j.trim(),{targetLanguage:"English",userLevel:C?C.toString():"intermediate",focusArea:"conversation"}):z=await _(j.trim());const W={id:Date.now()+1,type:"ai",content:z,timestamp:new Date};r(V=>[...V,W]),t(!1),w(10,"conversation")}catch(z){console.error("Failed to get AI response:",z);const W={id:Date.now()+1,type:"ai",content:"Sorry, I'm having trouble responding right now. Please try again.",timestamp:new Date};r(V=>[...V,W]),t(!1)}},_=async j=>{await new Promise(z=>setTimeout(z,1e3+Math.random()*2e3));const B=["That's a great question! Let me help you with that.","I understand what you're asking. Here's how I would explain it...","Excellent! You're making good progress. Let's continue with...","That's correct! Now, let's try something a bit more challenging.","I can help you practice that. Would you like to try some examples?","Good effort! Here's a tip to help you improve...","Perfect! You're getting the hang of it. Let's move on to..."];return B[Math.floor(Math.random()*B.length)]},O=async()=>{if(m)c();else try{await d()}catch(j){console.error("Failed to start recording:",j)}},Y=j=>{b(j,{lang:"en-US",rate:.9})},ee=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),$())};return e.jsxDEV("div",{className:"flex flex-col h-screen bg-background",children:[e.jsxDEV("div",{className:"border-b border-border p-4 flex-shrink-0",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsxDEV(Oe,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:161,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:160,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-xl font-semibold",children:"Chat Practice"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:164,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Practice conversations with AI"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:165,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:163,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:159,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[g()&&e.jsxDEV("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gradient-to-r from-blue-50 to-purple-50 rounded-full border border-blue-200",children:[e.jsxDEV(ps,{className:"w-3 h-3 text-blue-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:174,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-xs font-medium text-blue-700",children:"Gemini"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:175,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:173,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${p==="ready"?"bg-green-500":p==="initializing"?"bg-yellow-500 animate-pulse":p==="error"?"bg-red-500":"bg-gray-400"}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:181,columnNumber:15},void 0),e.jsxDEV("span",{className:x(),children:v()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:186,columnNumber:15},void 0),p==="ready"&&e.jsxDEV(Ee,{className:"w-3 h-3 text-green-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:190,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:180,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>u(!l),className:"p-2 hover:bg-accent rounded-lg transition-colors",title:"AI Settings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:195,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:170,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:158,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:157,columnNumber:7},void 0),l&&e.jsxDEV(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-b border-border p-4 bg-muted/30",children:e.jsxDEV(Xs,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:214,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:208,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[e.jsxDEV(be,{children:o.map(j=>e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`flex ${j.type==="user"?"justify-end":"justify-start"}`,children:e.jsxDEV("div",{className:`flex items-start space-x-3 max-w-xs lg:max-w-md ${j.type==="user"?"flex-row-reverse space-x-reverse":""}`,children:[e.jsxDEV("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${j.type==="user"?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-blue-500 to-purple-600"}`,children:j.type==="user"?e.jsxDEV(Re,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:239,columnNumber:21},void 0):e.jsxDEV(Oe,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:241,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:233,columnNumber:17},void 0),e.jsxDEV("div",{className:`rounded-2xl px-4 py-3 ${j.type==="user"?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-muted-foreground rounded-bl-md"}`,children:[e.jsxDEV("div",{className:"flex items-start space-x-2",children:e.jsxDEV("p",{className:"text-sm flex-1",children:j.content},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:252,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:251,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-2",children:[e.jsxDEV("span",{className:`text-xs ${j.type==="user"?"text-primary-foreground/70":"text-muted-foreground/70"}`,children:j.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:255,columnNumber:21},void 0),j.type==="ai"&&e.jsxDEV("button",{onClick:()=>Y(j.content),className:"ml-2 p-1 rounded hover:bg-accent transition-colors",title:"Listen to message",children:e.jsxDEV(je,{className:"w-3 h-3"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:268,columnNumber:25},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:263,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:254,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:246,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:229,columnNumber:15},void 0)},j.id,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:222,columnNumber:13},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:220,columnNumber:9},void 0),i&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:e.jsxDEV("div",{className:"flex items-start space-x-3 max-w-xs",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsxDEV(Oe,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:287,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:286,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-muted rounded-2xl rounded-bl-md px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Ur,{className:"w-4 h-4 animate-spin text-muted-foreground"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:291,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Thinking..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:292,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:290,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:289,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:285,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:280,columnNumber:11},void 0),e.jsxDEV("div",{ref:A},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:301,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:219,columnNumber:7},void 0),e.jsxDEV("div",{className:"border-t border-border p-4 flex-shrink-0 bg-background",children:[e.jsxDEV("div",{className:"flex items-end space-x-3",children:[e.jsxDEV("button",{onClick:O,className:`p-3 rounded-full transition-all duration-200 ${m?"bg-red-500 text-white animate-pulse":"bg-accent hover:bg-accent/80 text-accent-foreground"}`,title:m?"Stop recording":"Start voice input",children:m?e.jsxDEV(_e,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:318,columnNumber:15},void 0):e.jsxDEV(he,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:320,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:308,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex-1 relative",children:e.jsxDEV("textarea",{ref:F,value:s,onChange:j=>n(j.target.value),onKeyPress:ee,placeholder:"Type your message here...",className:"w-full resize-none rounded-lg border border-input bg-background px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all",rows:1,style:{minHeight:"48px",maxHeight:"120px",height:"auto"},onInput:j=>{j.target.style.height="auto",j.target.style.height=Math.min(j.target.scrollHeight,120)+"px"}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:326,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:325,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>$(),disabled:!s.trim()||i,className:"p-3 bg-primary text-primary-foreground rounded-full hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",title:"Send message",children:e.jsxDEV(Mr,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:353,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:347,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:306,columnNumber:9},void 0),m&&e.jsxDEV(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 flex items-center justify-center space-x-2 text-red-500",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:364,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:"Recording..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:365,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:359,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:305,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Chat.jsx",lineNumber:155,columnNumber:5},void 0)},Zs=()=>{const[o,r]=a.useState([{id:1,type:"ai",content:"Welcome to Enhanced Chat! I can help you with grammar corrections, vocabulary suggestions, and pronunciation feedback. What would you like to practice?",timestamp:new Date,features:{corrections:[],suggestions:[],difficulty:"beginner"}}]),[s,n]=a.useState(""),[i,t]=a.useState(!1),[l,u]=a.useState("conversation"),{level:m}=Ne(),[d,c]=a.useState(m?m.toString():"intermediate"),[b,w]=a.useState(!1),{isRecording:C,startRecording:p,stopRecording:D,speakText:f}=Me(),{addXP:h}=Ne(),{aiStatus:v,isReady:x,generateResponse:N,analyzeText:g,getStatusMessage:S,getStatusColor:A}=ze(),F=a.useRef(null),G=a.useRef(null),$=()=>{var V;(V=F.current)==null||V.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{$()},[o]);const _=async V=>{if(x)try{return await g(V)}catch(k){console.error("AI analysis failed, using fallback:",k)}const U=[],I=[],y=[];return V.toLowerCase().includes("i are")&&U.push({original:"i are",corrected:"I am",explanation:'Use "I am" instead of "I are"'}),V.toLowerCase().includes("good")&&I.push({word:"good",alternatives:["excellent","wonderful","fantastic","outstanding"],level:"intermediate"}),V.split(" ").filter(k=>k.length>4).forEach(k=>{Math.random()>.7&&y.push({word:k.toLowerCase(),definition:`Definition of ${k}`,level:d})}),{corrections:U,suggestions:I,vocabulary:y}},O=async(V,U)=>{if(x)try{return await N(V,{targetLanguage:"English",userLevel:d,focusArea:l})}catch(T){console.error("AI response failed, using fallback:",T)}const I={conversation:["That's interesting! Tell me more about that.","I see what you mean. How do you feel about it?","Great point! Have you considered this perspective?","That's a thoughtful observation. What made you think of that?"],grammar:["Let me help you with the grammar in that sentence.","Good effort! Here are some grammar improvements.","Your grammar is improving! Let's work on these points.","Nice try! Here's how to make it even better."],vocabulary:["Excellent vocabulary usage! Here are some alternatives.","Good word choice! Let me suggest some synonyms.","Your vocabulary is expanding! Try these advanced words.","Great! Here are some related words to learn."],pronunciation:["Let's work on pronunciation for those words.","Good attempt! Here's how to improve your pronunciation.","Your pronunciation is getting better! Focus on these sounds.","Nice work! Let's practice these challenging sounds."]};let y=I[l][Math.floor(Math.random()*I[l].length)];return U.corrections.length>0&&(y+=` I noticed: ${U.corrections[0].explanation}`),U.suggestions.length>0&&l==="vocabulary"&&(y+=` Instead of "${U.suggestions[0].word}", you could try: ${U.suggestions[0].alternatives.slice(0,2).join(", ")}.`),y},Y=async(V=s)=>{if(!V.trim()||i)return;const U=await _(V.trim()),I={id:Date.now(),type:"user",content:V.trim(),timestamp:new Date,analysis:U};r(y=>[...y,I]),n(""),t(!0);try{await new Promise(q=>setTimeout(q,1500+Math.random()*2e3));const y=await O(V.trim(),U),T={id:Date.now()+1,type:"ai",content:y,timestamp:new Date,features:{corrections:(U==null?void 0:U.corrections)||[],suggestions:(U==null?void 0:U.suggestions)||[],vocabulary:(U==null?void 0:U.vocabulary)||[],difficulty:d}};r(q=>[...q,T]);let k=15;U!=null&&U.corrections&&Array.isArray(U.corrections)&&U.corrections.length>0&&(k+=5),U!=null&&U.vocabulary&&Array.isArray(U.vocabulary)&&U.vocabulary.length>0&&(k+=10),h(k,l)}catch(y){console.error("Failed to get AI response:",y);const T={id:Date.now()+1,type:"ai",content:"Sorry, I'm having trouble analyzing your message right now. Please try again.",timestamp:new Date};r(k=>[...k,T])}finally{t(!1)}},ee=async()=>{if(C)D();else try{await p()}catch(V){console.error("Failed to start recording:",V)}},j=V=>{f(V,{lang:"en-US",rate:.9})},B=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),Y())},W={conversation:Oe,grammar:ye,vocabulary:Ce,pronunciation:je}[l];return e.jsxDEV("div",{className:"flex flex-col h-screen bg-background",children:[e.jsxDEV("div",{className:"border-b border-border p-4 flex-shrink-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:e.jsxDEV(W,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:253,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:252,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-xl font-semibold",children:"Enhanced Chat"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:256,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[l.charAt(0).toUpperCase()+l.slice(1)," practice ‚Ä¢ ",d," level"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:257,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:255,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:251,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>w(!b),className:"p-2 rounded-lg hover:bg-accent transition-colors",children:e.jsxDEV(Ze,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:267,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:263,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:250,columnNumber:9},void 0),e.jsxDEV(be,{children:b&&e.jsxDEV(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 p-4 bg-muted rounded-lg",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Chat Mode"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:283,columnNumber:19},void 0),e.jsxDEV("select",{value:l,onChange:V=>u(V.target.value),className:"w-full p-2 rounded border border-input bg-background",children:[e.jsxDEV("option",{value:"conversation",children:"General Conversation"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:289,columnNumber:21},void 0),e.jsxDEV("option",{value:"grammar",children:"Grammar Focus"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:290,columnNumber:21},void 0),e.jsxDEV("option",{value:"vocabulary",children:"Vocabulary Building"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:291,columnNumber:21},void 0),e.jsxDEV("option",{value:"pronunciation",children:"Pronunciation Practice"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:292,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:284,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:282,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Difficulty Level"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:298,columnNumber:19},void 0),e.jsxDEV("select",{value:d,onChange:V=>c(V.target.value),className:"w-full p-2 rounded border border-input bg-background",children:[e.jsxDEV("option",{value:"beginner",children:"Beginner"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:304,columnNumber:21},void 0),e.jsxDEV("option",{value:"intermediate",children:"Intermediate"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:305,columnNumber:21},void 0),e.jsxDEV("option",{value:"advanced",children:"Advanced"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:306,columnNumber:21},void 0),e.jsxDEV("option",{value:"expert",children:"Expert"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:307,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:299,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:297,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:280,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:274,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:272,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:249,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[e.jsxDEV(be,{children:o.map(V=>{var U,I,y,T;return e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`flex ${V.type==="user"?"justify-end":"justify-start"}`,children:e.jsxDEV("div",{className:`flex items-start space-x-3 max-w-xs lg:max-w-md ${V.type==="user"?"flex-row-reverse space-x-reverse":""}`,children:[e.jsxDEV("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${V.type==="user"?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-purple-500 to-pink-600"}`,children:V.type==="user"?e.jsxDEV(Re,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:337,columnNumber:21},void 0):e.jsxDEV(W,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:339,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:331,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:`rounded-2xl px-4 py-3 ${V.type==="user"?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-muted-foreground rounded-bl-md"}`,children:[e.jsxDEV("p",{className:"text-sm",children:V.content},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:350,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-2",children:[e.jsxDEV("span",{className:`text-xs ${V.type==="user"?"text-primary-foreground/70":"text-muted-foreground/70"}`,children:V.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:352,columnNumber:23},void 0),V.type==="ai"&&e.jsxDEV("button",{onClick:()=>j(V.content),className:"ml-2 p-1 rounded hover:bg-accent transition-colors",title:"Listen to message",children:e.jsxDEV(je,{className:"w-3 h-3"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:365,columnNumber:27},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:360,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:351,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:345,columnNumber:19},void 0),V.analysis&&e.jsxDEV("div",{className:"space-y-2",children:[((U=V.analysis.corrections)==null?void 0:U.length)>0&&e.jsxDEV("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"text-xs font-medium text-red-700 dark:text-red-300 mb-1",children:"Grammar Corrections"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:377,columnNumber:27},void 0),V.analysis.corrections.map((k,q)=>e.jsxDEV("div",{className:"text-xs text-red-600 dark:text-red-400",children:[e.jsxDEV("span",{className:"line-through",children:(k==null?void 0:k.original)||"Original text"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:380,columnNumber:31},void 0)," ‚Üí ",e.jsxDEV("span",{className:"font-medium",children:(k==null?void 0:k.corrected)||"Corrected text"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:380,columnNumber:113},void 0),e.jsxDEV("p",{className:"text-red-500 dark:text-red-400 mt-1",children:(k==null?void 0:k.explanation)||"No explanation available"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:381,columnNumber:31},void 0)]},q,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:379,columnNumber:29},void 0))]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:376,columnNumber:25},void 0),((I=V.analysis.suggestions)==null?void 0:I.length)>0&&e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Vocabulary Suggestions"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:390,columnNumber:27},void 0),V.analysis.suggestions.map((k,q)=>{var re;return e.jsxDEV("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:[e.jsxDEV("span",{className:"font-medium",children:(k==null?void 0:k.word)||"Unknown word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:393,columnNumber:31},void 0)," ‚Üí ",((re=k==null?void 0:k.alternatives)==null?void 0:re.length)>0?k.alternatives.join(", "):"No alternatives available"]},q,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:392,columnNumber:29},void 0)})]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:389,columnNumber:25},void 0),((y=V.analysis.vocabulary)==null?void 0:y.length)>0&&e.jsxDEV("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"text-xs font-medium text-green-700 dark:text-green-300 mb-1",children:"Vocabulary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:402,columnNumber:27},void 0),V.analysis.vocabulary.map((k,q)=>e.jsxDEV("div",{className:"text-xs text-green-600 dark:text-green-400",children:[e.jsxDEV("span",{className:"font-medium",children:(k==null?void 0:k.word)||"Unknown word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:405,columnNumber:31},void 0)," - ",(k==null?void 0:k.definition)||"No definition available"]},q,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:404,columnNumber:29},void 0))]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:401,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:373,columnNumber:21},void 0),V.features&&e.jsxDEV("div",{className:"space-y-2",children:((T=V.features.corrections)==null?void 0:T.length)>0&&e.jsxDEV("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300 mb-1",children:"Feedback"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:418,columnNumber:27},void 0),V.features.corrections.map((k,q)=>e.jsxDEV("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:k.explanation},q,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:420,columnNumber:29},void 0))]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:417,columnNumber:25},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:415,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:344,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:327,columnNumber:15},void 0)},V.id,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:320,columnNumber:13},void 0)})},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:318,columnNumber:9},void 0),i&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:e.jsxDEV("div",{className:"flex items-start space-x-3 max-w-xs",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:e.jsxDEV(W,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:443,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:442,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-muted rounded-2xl rounded-bl-md px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Ur,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:447,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Analyzing..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:448,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:446,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:445,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:441,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:436,columnNumber:11},void 0),e.jsxDEV("div",{ref:F},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:455,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:317,columnNumber:7},void 0),e.jsxDEV("div",{className:"border-t border-border p-4 flex-shrink-0 bg-background",children:[e.jsxDEV("div",{className:"flex items-end space-x-3",children:[e.jsxDEV("button",{onClick:ee,className:`p-3 rounded-full transition-all duration-200 ${C?"bg-red-500 text-white animate-pulse":"bg-accent hover:bg-accent/80 text-accent-foreground"}`,title:C?"Stop recording":"Start voice input",children:C?e.jsxDEV(_e,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:472,columnNumber:15},void 0):e.jsxDEV(he,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:474,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:462,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex-1 relative",children:e.jsxDEV("textarea",{ref:G,value:s,onChange:V=>n(V.target.value),onKeyPress:B,placeholder:`Type your message for ${l} practice...`,className:"w-full resize-none rounded-lg border border-input bg-background px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all",rows:1,style:{minHeight:"48px",maxHeight:"120px",height:"auto"},onInput:V=>{V.target.style.height="auto",V.target.style.height=Math.min(V.target.scrollHeight,120)+"px"}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:480,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:479,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>Y(),disabled:!s.trim()||i,className:"p-3 bg-primary text-primary-foreground rounded-full hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 relative",title:"Send message",children:[e.jsxDEV(Mr,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:507,columnNumber:13},void 0),l!=="conversation"&&e.jsxDEV("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsxDEV(Ee,{className:"w-2 h-2 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:510,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:509,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:501,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:460,columnNumber:9},void 0),C&&e.jsxDEV(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 flex items-center justify-center space-x-2 text-red-500",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:523,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:["Recording for ",l," analysis..."]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:524,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:518,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:459,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/EnhancedChat.jsx",lineNumber:247,columnNumber:5},void 0)},Le={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},en=5e3,rn=5;let sn=0,we=[],qe=[];const mr=()=>{qe.forEach(o=>o(we))},Ie=o=>{const r=++sn,s={id:r,type:Le.INFO,duration:en,...o,timestamp:Date.now()};return we=[s,...we].slice(0,rn),mr(),s.duration>0&&setTimeout(()=>{Yr(r)},s.duration),r},Yr=o=>{we=we.filter(r=>r.id!==o),mr()},nn=()=>{we=[],mr()},tn=()=>{const[o,r]=a.useState(we),s=a.useCallback(c=>{r([...c])},[]);a.useEffect(()=>(qe.push(s),()=>{qe=qe.filter(c=>c!==s)}),[s]);const n=a.useCallback((c,b={})=>Ie({message:c,...b}),[]),i=a.useCallback((c,b={})=>Ie({message:c,type:Le.SUCCESS,...b}),[]),t=a.useCallback((c,b={})=>Ie({message:c,type:Le.ERROR,...b}),[]),l=a.useCallback((c,b={})=>Ie({message:c,type:Le.WARNING,...b}),[]),u=a.useCallback((c,b={})=>Ie({message:c,type:Le.INFO,...b}),[]),m=a.useCallback(c=>{Yr(c)},[]),d=a.useCallback(()=>{nn()},[]);return{toasts:o,toast:n,success:i,error:t,warning:l,info:u,dismiss:m,clear:d}};class on{constructor(){this.events={}}on(r,s){this.events[r]||(this.events[r]=[]),this.events[r].push(s)}off(r,s){this.events[r]&&(this.events[r]=this.events[r].filter(n=>n!==s))}emit(r,...s){this.events[r]&&this.events[r].forEach(n=>{try{n(...s)}catch(i){console.error("EventEmitter error:",i)}})}removeAllListeners(r){r?delete this.events[r]:this.events={}}}class an extends on{constructor(){super(),this.session=null,this.isInitialized=!1,this.sessionActive=!1,this.apiKey=null,this.responseQueue=[],this.audioParts=[],this.userHasInteracted=!1,this.model="models/gemini-2.0-flash-exp",this.voiceName="Zephyr",this.systemInstruction="You are a helpful language learning assistant.",this.audioContext=null,this.mediaRecorder=null,this.audioStream=null,this.isRecording=!1,this.audioElement=null,this._stoppingAudio=!1,this._endingSession=!1,this.setupUserInteractionDetection()}setupUserInteractionDetection(){const r=["click","touchstart","keydown"],s=()=>{this.userHasInteracted=!0,r.forEach(n=>{document.removeEventListener(n,s)})};r.forEach(n=>{document.addEventListener(n,s,{once:!0})})}async initialize(r,s={}){try{return this.apiKey=r,this.model=s.model||this.model,this.voiceName=s.voiceName||this.voiceName,this.systemInstruction=s.systemInstruction||this.systemInstruction,this.isInitialized=!0,{success:!0}}catch(n){return console.error("Failed to initialize modern service:",n),{success:!1,error:n.message}}}handleMessage(r){var s,n,i,t;try{if((n=(s=r.serverContent)==null?void 0:s.modelTurn)!=null&&n.parts){const l=r.serverContent.modelTurn.parts;for(const u of l){if(u.fileData&&(console.log(`File: ${u.fileData.fileUri}`),this.emit("fileData",u.fileData)),u.inlineData){const m=u.inlineData;this.audioParts.push(m.data||"")}u.text&&(console.log("AI Response:",u.text),this.emit("message",{type:"text",content:u.text,isComplete:!0,timestamp:Date.now()}))}}if((i=r.serverContent)!=null&&i.turnComplete){if(this.audioParts.length>0){const l=this.convertToWav(this.audioParts,"audio/webm;codecs=opus");this.handleAudioResponse({buffer:l})}this.audioParts=[],this.emit("turn-complete")}(t=r.serverContent)!=null&&t.interrupted&&this.emit("interrupted")}catch(l){console.error("Error handling message:",l),this.emit("error",{error:l.message||l})}}async startLiveSession(r={}){if(!this.isInitialized||!this.apiKey)return{success:!1,error:"Service not initialized"};try{const s=new Vs({apiKey:this.apiKey});return this.session=await s.live.connect({model:this.model,callbacks:{onopen:()=>{console.debug("Gemini Live session opened"),this.sessionActive=!0,this.emit("connected")},onmessage:n=>{this.responseQueue.push(n),this.handleMessage(n)},onerror:n=>{console.debug("Gemini Live error:",n.message),this.emit("error",{error:n.message})},onclose:n=>{console.debug("Gemini Live session closed:",n.reason),this.sessionActive=!1,this.emit("close",{reason:n.reason})}}}),r.autoStartSTT&&await this.setupAudioRecording(),{success:!0}}catch(s){return console.error("Failed to start live session:",s),{success:!1,error:s.message}}}async setupAudioRecording(){try{if(console.log("Requesting microphone access..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser");this.audioStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:24e3}}),console.log("Microphone access granted"),this.audioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),this.mediaRecorder=new MediaRecorder(this.audioStream,{mimeType:"audio/webm;codecs=opus"});let r=[];this.mediaRecorder.ondataavailable=s=>{s.data.size>0&&r.push(s.data)},this.mediaRecorder.onstop=async()=>{if(r.length>0){const n=await new Blob(r,{type:"audio/webm;codecs=opus"}).arrayBuffer(),i=btoa(String.fromCharCode(...new Uint8Array(n)));try{if(this.session&&this.sessionActive)this.session.sendClientContent({turns:[{parts:[{inlineData:{mimeType:"audio/webm;codecs=opus",data:i}}]}]}),this.emit("stt-final",{transcript:"[Audio sent to AI]"});else throw new Error("Session not active")}catch(t){console.error("Failed to send audio:",t),this.emit("stt-error",{error:t.message})}}r=[],this.isRecording=!1,this.emit("stt-end")},this.mediaRecorder.onstart=()=>{this.isRecording=!0,this.emit("stt-start")},this.mediaRecorder.onerror=s=>{console.error("MediaRecorder error:",s),this.emit("stt-error",{error:s.message||"Recording error"})}}catch(r){console.error("Failed to setup audio recording:",r);let s=r.message;throw r.name==="NotAllowedError"?s="Microphone access denied. Please allow microphone permissions and try again.":r.name==="NotFoundError"?s="No microphone found. Please connect a microphone and try again.":r.name==="NotReadableError"?s="Microphone is being used by another application. Please close other apps and try again.":r.name==="OverconstrainedError"&&(s="Microphone does not support the required audio settings."),this.emit("stt-error",{error:s}),new Error(s)}}async sendMessage(r){try{if(!this.session||!this.sessionActive)throw new Error("Session not active");return this.session.sendClientContent({turns:[{parts:[{text:r}]}]}),{success:!0}}catch(s){return console.error("Failed to send message:",s),{success:!1,error:s.message}}}async startRecording(){try{if(!this.mediaRecorder&&(console.log("Setting up audio recording..."),await this.setupAudioRecording(),!this.mediaRecorder))throw new Error("Failed to initialize microphone. Please check permissions.");if(this.mediaRecorder&&this.mediaRecorder.state==="inactive")return console.log("Starting microphone recording..."),this.mediaRecorder.start(1e3),{success:!0};throw new Error("Microphone is not available or already recording")}catch(r){return console.error("Failed to start recording:",r),this.emit("stt-error",{error:r.message}),{success:!1,error:r.message}}}async stopRecording(){try{if(this.mediaRecorder&&this.mediaRecorder.state==="recording")return this.mediaRecorder.stop(),{success:!0}}catch(r){return console.error("Failed to stop recording:",r),{success:!1,error:r.message}}}async stopAudioRecording(){try{return this._stoppingAudio?{success:!0}:(this._stoppingAudio=!0,this.isRecording&&this.mediaRecorder&&(this.mediaRecorder.state==="recording"&&this.mediaRecorder.stop(),this.isRecording=!1),this.audioStream&&(this.audioStream.getTracks().forEach(r=>r.stop()),this.audioStream=null),this.audioContext&&this.audioContext.state!=="closed"&&(await this.audioContext.close(),this.audioContext=null),this.mediaRecorder=null,this._stoppingAudio=!1,{success:!0})}catch(r){return this._stoppingAudio=!1,console.error("Failed to stop audio recording:",r),{success:!1,error:r.message}}}async handleAudioResponse(r){try{const s=new Blob([r.buffer],{type:"audio/wav"}),n=URL.createObjectURL(s);if(this.audioElement&&(this.audioElement.pause(),URL.revokeObjectURL(this.audioElement.src)),this.audioElement=new Audio(n),this.userHasInteracted)this.audioElement.play().catch(i=>{console.error("Audio playback failed:",i),this.emit("audio-error",{error:i.message})});else{console.warn("Audio playback requires user interaction. Audio will be queued."),this.emit("audio-queued",{type:"audio",audioUrl:n,timestamp:Date.now(),message:"Click anywhere to enable audio playback"});const i=()=>{this.audioElement.play().catch(t=>{console.error("Audio playback failed:",t),this.emit("audio-error",{error:t.message})}),document.removeEventListener("click",i)};document.addEventListener("click",i,{once:!0})}this.emit("audio",{type:"audio",audioUrl:n,timestamp:Date.now()}),this.audioElement.addEventListener("ended",()=>{URL.revokeObjectURL(n)})}catch(s){console.error("Failed to handle audio response:",s),this.emit("error",{error:s.message})}}convertToWav(r,s){const n=this.parseMimeType(s),i=r.map(d=>{const c=atob(d),b=new Uint8Array(c.length);for(let w=0;w<c.length;w++)b[w]=c.charCodeAt(w);return b}),t=i.reduce((d,c)=>d+c.length,0),l=this.createWavHeader(t,n),u=new Uint8Array(l.length+t);u.set(l,0);let m=l.length;for(const d of i)u.set(d,m),m+=d.length;return u}parseMimeType(r){const[s,...n]=r.split(";").map(u=>u.trim()),[i,t]=s.split("/"),l={numChannels:1,bitsPerSample:16,sampleRate:24e3};if(t&&t.startsWith("L")){const u=parseInt(t.slice(1),10);isNaN(u)||(l.bitsPerSample=u)}for(const u of n){const[m,d]=u.split("=").map(c=>c.trim());m==="rate"&&(l.sampleRate=parseInt(d,10))}return l}createWavHeader(r,s){const{numChannels:n,sampleRate:i,bitsPerSample:t}=s,l=i*n*t/8,u=n*t/8,m=new ArrayBuffer(44),d=new DataView(m);return d.setUint32(0,1380533830,!1),d.setUint32(4,36+r,!0),d.setUint32(8,1463899717,!1),d.setUint32(12,1718449184,!1),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,n,!0),d.setUint32(24,i,!0),d.setUint32(28,l,!0),d.setUint16(32,u,!0),d.setUint16(34,t,!0),d.setUint32(36,1684108385,!1),d.setUint32(40,r,!0),new Uint8Array(m)}async playTTS(r){return{success:!0}}enableAudio(){return this.userHasInteracted=!0,this.emit("audio-enabled"),{success:!0}}async initializeAudioContext(){try{return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&await this.audioContext.resume(),{success:!0}}catch(r){return console.error("Failed to initialize audio context:",r),{success:!1,error:r.message}}}async toggleSpeechRecognition(r={}){try{return this.isRecording?(await this.stopRecording(),{success:!0,status:"stopped",recording:!1}):(await this.startRecording(),{success:!0,status:"started",recording:!0})}catch(s){return console.error("Failed to toggle speech recognition:",s),{success:!1,error:s.message}}}stopTTS(){try{return this.audioElement&&(this.audioElement.pause(),this.audioElement.currentTime=0),this.emit("tts-end"),{success:!0}}catch(r){return console.error("Failed to stop TTS:",r),{success:!1,error:r.message}}}async endLiveSession(){try{return this.session&&this.sessionActive&&(this.session.close(),this.session=null),await this.stopAudioRecording(),this.audioParts=[],this.responseQueue=[],this.sessionActive=!1,{success:!0}}catch(r){return console.error("Failed to end live session:",r),{success:!1,error:r.message}}}async endSession(){try{return this._endingSession?{success:!0}:(this._endingSession=!0,this.isRecording&&await this.stopRecording(),await this.stopAudioRecording(),this.session&&this.sessionActive&&(this.session.close(),this.session=null),this.sessionActive=!1,this.audioElement=null,this.audioParts=[],this.responseQueue=[],this._endingSession=!1,{success:!0})}catch(r){return this._endingSession=!1,console.error("Failed to end session:",r),{success:!1,error:r.message}}}isSessionActive(){return this.sessionActive}on(r,s){super.on(r,s)}off(r,s){super.off(r,s)}emit(r,...s){super.emit(r,...s)}}const H=new an,ln=()=>{const[o,r]=a.useState(!1),[s,n]=a.useState(!1),[i,t]=a.useState(null),[l,u]=a.useState("disconnected"),[m,d]=a.useState(!0),[c,b]=a.useState(!0),[w,C]=a.useState(!1),[p,D]=a.useState(0),[f,h]=a.useState([]),[v,x]=a.useState(""),[N,g]=a.useState(!1),[S,A]=a.useState(!1),[F,G]=a.useState(!1),[$,_]=a.useState(""),[O,Y]=a.useState(!0),[ee,j]=a.useState({duration:0,messagesExchanged:0,wordsSpoken:0}),[B,z]=a.useState({language:"en-US",voice:"Alloy",speed:1,pitch:1}),W=a.useRef(null);a.useRef(null),a.useRef(null);const V=a.useRef(null),U=a.useRef(null),{addXP:I,level:y}=Ne(),{toast:T}=tn(),{isGeminiAvailable:k}=ze();a.useEffect(()=>{var L;(L=W.current)==null||L.scrollIntoView({behavior:"smooth"})},[f]),a.useEffect(()=>{const L=()=>{console.log("STT started"),C(!0)},J=K=>{console.log("STT interim:",K.transcript),x(K.transcript)},X=K=>{console.log("STT final:",K.transcript),x(""),h(Pe=>[...Pe,{id:Date.now(),type:"user",content:K.transcript,timestamp:new Date().toLocaleTimeString()}]),j(Pe=>({...Pe,messagesExchanged:Pe.messagesExchanged+1,wordsSpoken:Pe.wordsSpoken+K.transcript.split(" ").length}))},ne=()=>{console.log("STT ended"),C(!1)},pr=K=>{console.error("STT error:",K.error),C(!1),T({title:"Speech Recognition Error",description:`Failed to recognize speech: ${K.error}`,variant:"destructive"})},br=K=>{console.log("TTS started:",K.text),g(!0)},fr=()=>{console.log("TTS ended"),g(!1)},Nr=K=>{console.error("TTS error:",K.error),g(!1),T({title:"Text-to-Speech Error",description:`Failed to play audio: ${K.error}`,variant:"destructive"})},xr=K=>{console.error("Live session error:",K),u("error"),r(!1),n(!1),T({title:"Session Error",description:K.error||"An error occurred during the live session.",variant:"destructive"})},gr=K=>{console.log("Live session closed:",K),u("disconnected"),r(!1),n(!1),t(null),C(!1),g(!1)},hr=K=>{console.log("Audio queued due to autoplay policy:",K),T({title:"Audio Requires Interaction",description:K.message||"Click anywhere to enable audio playback",variant:"default"})},vr=K=>{console.error("Audio playback error:",K.error),T({title:"Audio Playback Failed",description:`Audio error: ${K.error}`,variant:"destructive"})},yr=()=>{console.log("Audio playback enabled"),T({title:"Audio Enabled",description:"Audio playback is now active",variant:"default"})};return H&&(H.on("stt-start",L),H.on("stt-interim",J),H.on("stt-final",X),H.on("stt-end",ne),H.on("stt-error",pr),H.on("tts-start",br),H.on("tts-end",fr),H.on("tts-error",Nr),H.on("message",q),H.on("error",xr),H.on("close",gr),H.on("audio-queued",hr),H.on("audio-error",vr),H.on("audio-enabled",yr)),()=>{H&&(H.off("stt-start",L),H.off("stt-interim",J),H.off("stt-final",X),H.off("stt-end",ne),H.off("stt-error",pr),H.off("tts-start",br),H.off("tts-end",fr),H.off("tts-error",Nr),H.off("message",q),H.off("error",xr),H.off("close",gr),H.off("audio-queued",hr),H.off("audio-error",vr),H.off("audio-enabled",yr)),o&&P(),V.current&&V.current.getTracks().forEach(K=>K.stop())}},[I,T]);const q=a.useCallback(L=>{L.type==="text"&&(L.isComplete?(h(J=>{const X=[...J],ne=X[X.length-1];return ne&&ne.isStreaming?(ne.content=L.content,ne.isStreaming=!1,ne.timestamp=new Date().toLocaleTimeString()):X.push({id:Date.now(),type:"ai",content:L.content,timestamp:new Date().toLocaleTimeString(),isStreaming:!1}),X}),g(!1),G(!1),_(""),I(10,"conversation"),c&&L.content&&H.playTTS(L.content).catch(J=>{console.error("Failed to play TTS:",J)})):(G(!0),_(L.content),h(J=>{const X=[...J],ne=X[X.length-1];return ne&&ne.isStreaming?ne.content=L.content:X.push({id:Date.now(),type:"ai",content:L.content,timestamp:new Date().toLocaleTimeString(),isStreaming:!0}),X})))},[I,c]);a.useCallback(L=>{c&&L&&xe(L)},[c]);const re=a.useCallback(()=>{H.enableAudio()},[]),ce=a.useCallback(async()=>{if(console.log("Starting live session..."),!k()){console.log("Gemini not available"),T({title:"AI Service Unavailable",description:"Please configure your AI settings first.",variant:"destructive"});return}try{console.log("Setting connection status to connecting..."),u("connecting"),n(!0),A(!0);const L="AIzaSyByTDREdEdtVu2CkAyWDZ8rHyg3Jyikmv4";console.log("API key available:",!!L),console.log("Initializing modernGeminiLiveService...");const J=await H.initialize(L);console.log("Initialization result:",J),await H.initializeAudioContext(),console.log("Audio context initialized"),console.log("Starting live session with options...");const X=await H.startLiveSession({targetLanguage:"English",userLevel:y?y.toString():"intermediate",language:B.language,temperature:.7,autoStartSTT:m});if(console.log("Live session start result:",X),X.success)t(X.sessionId),u("connected"),r(!0),h([{id:Date.now(),type:"system",content:"üéôÔ∏è Live conversation with voice started! Speak naturally or type your messages. The AI will respond with realistic voice.",timestamp:new Date().toLocaleTimeString()}]),U.current=Date.now(),T({title:"Voice Session Started",description:"Live conversation with STT/TTS is now active. Start speaking!"});else throw new Error(X.error||"Failed to start session")}catch(L){console.error("Failed to start session:",L),u("error"),T({title:"Connection Failed",description:L.message||"Failed to start live session. Please try again.",variant:"destructive"})}finally{n(!1),A(!1)}},[k,T,B.language,m,y]),P=a.useCallback(async()=>{try{if(A(!0),w&&stopRecording(),U.current){const L=Math.floor((Date.now()-U.current)/1e3);j(J=>({...J,duration:L}))}H.isSessionActive()&&await H.endSession(),r(!1),t(null),u("disconnected"),C(!1),G(!1),_(""),h(L=>[...L,{id:Date.now(),type:"system",content:`Session ended. Duration: ${U.current?Math.floor((Date.now()-U.current)/1e3):0}s, Messages: ${ee.messagesExchanged}`,timestamp:new Date().toLocaleTimeString()}]),T({title:"Session Ended",description:"Your live conversation session has been ended."})}catch(L){console.error("Failed to end session:",L),T({title:"Error",description:"Failed to properly end the session.",variant:"destructive"})}finally{A(!1)}},[w,ee.messagesExchanged,T]),M=async()=>{if(!o){T({title:"No Active Session",description:"Please start a live session first.",variant:"destructive"});return}if(!m){T({title:"Microphone Disabled",description:"Please enable the microphone first.",variant:"destructive"});return}try{const L=await H.toggleSpeechRecognition({language:B.language});if(L.success)L.status==="stopped"?(C(!1),T({title:"Speech Recognition Stopped",description:"Voice input has been disabled."})):(C(!0),T({title:"Speech Recognition Started",description:"Listening for your voice input..."}));else throw new Error(L.error||"Failed to toggle speech recognition")}catch(L){console.error("Failed to toggle recording:",L),C(!1),T({title:"Speech Recognition Error",description:L.message||"Failed to control speech recognition.",variant:"destructive"})}},se=()=>{H&&H.stopTTS(),g(!1),T({title:"Audio Stopped",description:"Text-to-speech playback has been stopped."})},xe=async L=>{console.log("Audio response received:",L)},Q=async L=>{if(!(!L.trim()||!i||!o))try{if(g(!0),!f.some(X=>X.content===L&&X.type==="user")){const X={id:Date.now(),type:"user",content:L,timestamp:new Date().toLocaleTimeString()};h(ne=>[...ne,X]),j(ne=>({...ne,messagesExchanged:ne.messagesExchanged+1,wordsSpoken:ne.wordsSpoken+L.split(" ").length}))}const J=await H.sendMessage(L);if(J.success)I(5,"conversation");else throw new Error(J.error||"Failed to send message")}catch(J){console.error("Failed to send message:",J),h(X=>[...X,{id:Date.now(),type:"error",content:`Failed to send message: ${J.message}`,timestamp:new Date().toLocaleTimeString()}]),g(!1)}},sr=()=>{h([]),x("")},nr=()=>{switch(l){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";case"error":return"text-red-500";default:return"text-gray-500"}},Zr=()=>{switch(l){case"connected":return"Connected";case"connecting":return"Connecting...";case"error":return"Connection Error";default:return"Disconnected"}};return e.jsxDEV("div",{className:"h-full flex flex-col bg-background",children:[e.jsxDEV("div",{className:"bg-card border-b border-border p-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(He,{className:`w-6 h-6 ${o?"text-green-500 animate-pulse":"text-gray-400"}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:605,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-xl font-bold text-foreground",children:"Live Conversation"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:607,columnNumber:17},void 0),e.jsxDEV("p",{className:`text-sm ${nr()}`,children:Zr()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:608,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:606,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:604,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:603,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("button",{onClick:()=>d(!m),className:`p-2 rounded-lg transition-colors ${m?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,title:m?"Disable microphone":"Enable microphone",children:m?e.jsxDEV(he,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:626,columnNumber:31},void 0):e.jsxDEV(_e,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:626,columnNumber:61},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:617,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>b(!c),className:`p-2 rounded-lg transition-colors ${c?"bg-blue-100 text-blue-600 hover:bg-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:c?"Disable speaker":"Enable speaker",children:c?e.jsxDEV(je,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:638,columnNumber:35},void 0):e.jsxDEV(ar,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:638,columnNumber:69},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:629,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>Y(!O),className:`p-2 rounded-lg transition-colors ${O?"bg-purple-100 text-purple-600 hover:bg-purple-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:O?"Disable voice mode":"Enable voice mode",children:e.jsxDEV(Er,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:650,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:641,columnNumber:13},void 0),e.jsxDEV("button",{onClick:sr,className:"p-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",title:"Clear conversation",children:e.jsxDEV(er,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:659,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:654,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:615,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:602,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:601,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[e.jsxDEV(be,{children:[f.map(L=>e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`flex ${L.type==="user"?"justify-end":"justify-start"}`,children:e.jsxDEV("div",{className:`max-w-[80%] rounded-lg p-3 ${L.type==="user"?"bg-primary text-primary-foreground":L.type==="system"?"bg-blue-100 text-blue-800 border border-blue-200":L.type==="error"?"bg-red-100 text-red-800 border border-red-200":"bg-card border border-border"}`,children:e.jsxDEV("div",{className:"flex items-start space-x-2",children:[L.type==="ai"&&e.jsxDEV("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsxDEV(Ee,{className:"w-3 h-3 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:692,columnNumber:23},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:691,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-sm leading-relaxed",children:[L.content,L.isStreaming&&e.jsxDEV("span",{className:"inline-block w-2 h-4 bg-current opacity-75 animate-pulse ml-1",children:"|"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:699,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:696,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-2",children:[e.jsxDEV("span",{className:"text-xs opacity-70",children:L.timestamp},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:703,columnNumber:23},void 0),L.isRecording&&e.jsxDEV("span",{className:"text-xs text-red-500",children:"‚óè Recording"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:705,columnNumber:25},void 0),L.isStreaming&&e.jsxDEV("div",{className:"flex items-center space-x-1 text-xs opacity-70",children:[e.jsxDEV(He,{className:"w-3 h-3 animate-pulse"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:709,columnNumber:27},void 0),e.jsxDEV("span",{children:"streaming"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:710,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:708,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:702,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:695,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:689,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:678,columnNumber:15},void 0)},L.id,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:669,columnNumber:13},void 0)),F&&$&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:e.jsxDEV("div",{className:"max-w-[80%] rounded-lg p-3 bg-card border border-border",children:e.jsxDEV("div",{className:"flex items-start space-x-2",children:[e.jsxDEV("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsxDEV(Ee,{className:"w-3 h-3 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:730,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:729,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-sm leading-relaxed",children:[$,e.jsxDEV("span",{className:"inline-block w-2 h-4 bg-current opacity-75 animate-pulse ml-1",children:"|"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:735,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:733,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-xs opacity-70 mt-2",children:"Streaming..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:737,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:732,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:728,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:727,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:722,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:667,columnNumber:9},void 0),N&&!v&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:e.jsxDEV("div",{className:"bg-card border border-border rounded-lg p-3",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsxDEV(Ee,{className:"w-3 h-3 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:757,columnNumber:19},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:756,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Er,{className:"w-4 h-4 animate-pulse"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:760,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"AI is responding..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:761,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:759,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:755,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:749,columnNumber:11},void 0),e.jsxDEV("div",{ref:W},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:768,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:666,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-card border-t border-border p-4",children:o?e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("button",{onClick:M,disabled:!m||S,className:`relative p-4 rounded-full transition-all duration-200 ${w?"bg-red-500 text-white scale-110 shadow-lg animate-pulse":m?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:w?"Stop listening":m?"Start listening":"Microphone disabled",children:[w?e.jsxDEV(_e,{className:"w-6 h-6"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:813,columnNumber:34},void 0):e.jsxDEV(he,{className:"w-6 h-6"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:813,columnNumber:67},void 0),w&&e.jsxDEV(E.div,{className:"absolute inset-0 rounded-full border-2 border-white",animate:{scale:[1,1.3,1]},transition:{duration:1.5,repeat:1/0}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:815,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:801,columnNumber:17},void 0),w&&e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((L,J)=>e.jsxDEV(E.div,{className:"w-1 bg-green-500 rounded-full",animate:{height:[4,Math.random()*16+4,4]},transition:{duration:.5+Math.random()*.5,repeat:1/0,repeatType:"reverse"}},J,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:828,columnNumber:25},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:826,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs text-green-600 font-medium",children:"Listening..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:842,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:825,columnNumber:19},void 0),v&&e.jsxDEV("div",{className:"max-w-xs p-2 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxDEV("p",{className:"text-sm text-blue-800",children:['"',v,'"',e.jsxDEV("span",{className:"inline-block w-1 h-4 bg-blue-500 opacity-75 animate-pulse ml-1",children:"|"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:851,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:849,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:848,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:800,columnNumber:15},void 0),N&&e.jsxDEV("button",{onClick:se,className:"p-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",title:"Stop AI speech",children:e.jsxDEV(ar,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:864,columnNumber:19},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:859,columnNumber:17},void 0),e.jsxDEV("button",{onClick:re,className:"p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Enable audio playback",children:e.jsxDEV(je,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:874,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:869,columnNumber:15},void 0),e.jsxDEV("button",{onClick:P,className:"p-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"End conversation",children:e.jsxDEV(bs,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:883,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:878,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:798,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("input",{type:"text",placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",onKeyPress:L=>{L.key==="Enter"&&L.target.value.trim()&&(Q(L.target.value),L.target.value="")}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:889,columnNumber:15},void 0),e.jsxDEV("button",{onClick:L=>{const J=L.target.parentElement.querySelector("input");J.value.trim()&&(Q(J.value),J.value="")},disabled:S||N,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Send"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:900,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:888,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:796,columnNumber:11},void 0):e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV("button",{onClick:ce,disabled:s,className:"flex items-center space-x-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(He,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:783,columnNumber:19},void 0),e.jsxDEV("span",{children:"Connecting..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:784,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:782,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ke,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:788,columnNumber:19},void 0),e.jsxDEV("span",{children:"Start Live Conversation"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:789,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:787,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:776,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:775,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:772,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/LiveConversation.jsx",lineNumber:599,columnNumber:5},void 0)},dn=()=>{const[o,r]=a.useState(null),[s,n]=a.useState(null),[i,t]=a.useState(!1),[l,u]=a.useState(null),[m,d]=a.useState(null),[c,b]=a.useState(0),[w,C]=a.useState("common"),[p,D]=a.useState("beginner"),[f,h]=a.useState([]),{isRecording:v,startRecording:x,stopRecording:N,speakText:g}=Me(),{addXP:S,updateProgress:A}=Ne(),F=a.useRef(null),G=a.useRef(null),$={common:{beginner:[{word:"hello",phonetic:"/h…ôÀàlo ä/",difficulty:1},{word:"water",phonetic:"/Ààw…îÀêt…ôr/",difficulty:2},{word:"beautiful",phonetic:"/ÀàbjuÀêt…™f…ôl/",difficulty:3},{word:"computer",phonetic:"/k…ômÀàpjuÀêt…ôr/",difficulty:2},{word:"important",phonetic:"/…™mÀàp…îÀêrt…ônt/",difficulty:3}],intermediate:[{word:"pronunciation",phonetic:"/pr…ôÀån ånsiÀàe…™ É…ôn/",difficulty:4},{word:"comfortable",phonetic:"/Ààk åmft…ôrb…ôl/",difficulty:4},{word:"development",phonetic:"/d…™Ààvel…ôpm…ônt/",difficulty:3},{word:"responsibility",phonetic:"/r…™Àåsp…ëÀêns…ôÀàb…™l…ôti/",difficulty:5},{word:"communication",phonetic:"/k…ôÀåmjuÀên…™Ààke…™ É…ôn/",difficulty:4}],advanced:[{word:"entrepreneurship",phonetic:"/Àå…ëÀêntr…ôpr…ôÀàn…úÀêr É…™p/",difficulty:5},{word:"pharmaceutical",phonetic:"/Àåf…ëÀêrm…ôÀàsuÀêt…™k…ôl/",difficulty:5},{word:"conscientious",phonetic:"/Àåk…ëÀên ÉiÀàen É…ôs/",difficulty:4},{word:"deteriorate",phonetic:"/d…™Ààt…™ri…ôre…™t/",difficulty:4},{word:"incomprehensible",phonetic:"/…™nÀåk…ëÀêmpr…™Ààhens…ôb…ôl/",difficulty:5}]},sounds:{beginner:[{word:"think",phonetic:"/Œ∏…™≈ãk/",difficulty:2,focus:"th sound"},{word:"ship",phonetic:"/ É…™p/",difficulty:2,focus:"sh sound"},{word:"red",phonetic:"/red/",difficulty:1,focus:"r sound"},{word:"light",phonetic:"/la…™t/",difficulty:2,focus:"l sound"},{word:"very",phonetic:"/Ààveri/",difficulty:2,focus:"v sound"}],intermediate:[{word:"through",phonetic:"/Œ∏ru/",difficulty:3,focus:"th + r sounds"},{word:"measure",phonetic:"/Ààme í…ôr/",difficulty:3,focus:"zh sound"},{word:"rural",phonetic:"/Ààr är…ôl/",difficulty:4,focus:"multiple r sounds"},{word:"clothes",phonetic:"/klo ä√∞z/",difficulty:3,focus:"th + z sounds"},{word:"sixth",phonetic:"/s…™ksŒ∏/",difficulty:4,focus:"ks + th sounds"}],advanced:[{word:"thoroughly",phonetic:"/ÀàŒ∏…úÀêro äli/",difficulty:4,focus:"th + r combination"},{word:"strength",phonetic:"/stre≈ãŒ∏/",difficulty:5,focus:"str + ng + th"},{word:"squirrel",phonetic:"/Ààskw…úÀêr…ôl/",difficulty:4,focus:"skw + r sounds"},{word:"brewery",phonetic:"/ÀàbruÀê…ôri/",difficulty:3,focus:"br + oo sounds"},{word:"rhythm",phonetic:"/Ààr…™√∞…ôm/",difficulty:4,focus:"r + th sounds"}]}};a.useEffect(()=>{_()},[w,p]),a.useEffect(()=>(v?O():Y(),()=>Y()),[v]);const _=()=>{const I=$[w][p],y=I[Math.floor(Math.random()*I.length)];r(y),u(null),d(null),b(0),n(null)},O=()=>{const I=F.current;if(!I)return;const y=I.getContext("2d"),T=I.width,k=I.height,q=()=>{y.clearRect(0,0,T,k);const re=50,ce=T/re;for(let P=0;P<re;P++){const M=Math.random()*k*.8+10,se=P*ce,xe=(k-M)/2;y.fillStyle=`hsl(${200+Math.random()*60}, 70%, ${50+Math.random()*30}%)`,y.fillRect(se,xe,ce-2,M)}G.current=requestAnimationFrame(q)};q()},Y=()=>{G.current&&(cancelAnimationFrame(G.current),G.current=null);const I=F.current;I&&I.getContext("2d").clearRect(0,0,I.width,I.height)},ee=async()=>{try{await x(),n(null),u(null)}catch(I){console.error("Failed to start recording:",I)}},j=async()=>{try{const I=await N();n(I),b(y=>y+1),setTimeout(()=>{B()},1e3)}catch(I){console.error("Failed to stop recording:",I)}},B=()=>{const I=Math.random()*40+40,y=o.difficulty*5,T=Math.max(0,(3-c)*5),k=Math.min(100,Math.max(0,I-y+T+Math.random()*20));d(Math.round(k));let q="",re="good";k>=85?(q="Excellent pronunciation! You nailed it!",re="excellent",S(25,"pronunciation")):k>=70?(q="Good job! Your pronunciation is quite clear.",re="good",S(15,"pronunciation")):k>=50?(q="Not bad, but there's room for improvement. Try focusing on the stressed syllables.",re="okay",S(10,"pronunciation")):(q="Keep practicing! Listen to the example again and try to match the rhythm.",re="needs-work",S(5,"pronunciation")),u({text:q,type:re}),A("pronunciationAccuracy",k)},z=()=>{o&&g(o.word,{lang:"en-US",rate:.8})},W=()=>{s&&console.log("Playing user recording...")},V=I=>{switch(I){case"excellent":return"text-green-600 dark:text-green-400";case"good":return"text-blue-600 dark:text-blue-400";case"okay":return"text-yellow-600 dark:text-yellow-400";case"needs-work":return"text-red-600 dark:text-red-400";default:return"text-muted-foreground"}},U=I=>I>=85?"text-green-600 dark:text-green-400":I>=70?"text-blue-600 dark:text-blue-400":I>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return e.jsxDEV("div",{className:"flex flex-col h-full bg-background p-6",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h1",{className:"text-2xl font-bold mb-2",children:"Pronunciation Practice"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:234,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Improve your pronunciation with AI-powered feedback"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:235,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:233,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Category"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:241,columnNumber:11},void 0),e.jsxDEV("select",{value:w,onChange:I=>C(I.target.value),className:"w-full p-3 rounded-lg border border-input bg-background",children:[e.jsxDEV("option",{value:"common",children:"Common Words"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV("option",{value:"sounds",children:"Difficult Sounds"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:248,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:242,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:240,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Difficulty"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:252,columnNumber:11},void 0),e.jsxDEV("select",{value:p,onChange:I=>D(I.target.value),className:"w-full p-3 rounded-lg border border-input bg-background",children:[e.jsxDEV("option",{value:"beginner",children:"Beginner"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:258,columnNumber:13},void 0),e.jsxDEV("option",{value:"intermediate",children:"Intermediate"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:259,columnNumber:13},void 0),e.jsxDEV("option",{value:"advanced",children:"Advanced"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:260,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:253,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:251,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:239,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 flex flex-col items-center justify-center space-y-8",children:[o&&e.jsxDEV(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[e.jsxDEV("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-lg",children:[e.jsxDEV("h2",{className:"text-4xl font-bold mb-2",children:o.word},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:276,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xl text-muted-foreground mb-4",children:o.phonetic},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:277,columnNumber:15},void 0),o.focus&&e.jsxDEV("p",{className:"text-sm text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full inline-block",children:["Focus: ",o.focus]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:279,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-center mt-4 space-x-1",children:[[...Array(5)].map((I,y)=>e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${y<o.difficulty?"bg-yellow-400":"bg-gray-200 dark:bg-gray-700"}`},y,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:287,columnNumber:19},void 0)),e.jsxDEV("span",{className:"ml-2 text-xs text-muted-foreground",children:["Difficulty: ",o.difficulty,"/5"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:296,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:285,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:275,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("button",{onClick:z,className:"flex items-center space-x-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsxDEV(je,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:308,columnNumber:17},void 0),e.jsxDEV("span",{children:"Listen"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:309,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:304,columnNumber:15},void 0),s&&e.jsxDEV("button",{onClick:W,className:"flex items-center space-x-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsxDEV(ke,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:317,columnNumber:19},void 0),e.jsxDEV("span",{children:"Your Recording"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:318,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:313,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:303,columnNumber:13},void 0)]},o.word,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:268,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-full max-w-md",children:[e.jsxDEV("div",{className:"bg-card border border-border rounded-lg p-4 mb-4",children:[e.jsxDEV("canvas",{ref:F,width:400,height:100,className:"w-full h-20 rounded"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:329,columnNumber:13},void 0),!v&&e.jsxDEV("div",{className:"flex items-center justify-center h-20 text-muted-foreground",children:[e.jsxDEV(he,{className:"w-8 h-8"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:337,columnNumber:17},void 0),e.jsxDEV("span",{className:"ml-2",children:"Ready to record"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:338,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:336,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:328,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV("button",{onClick:v?j:ee,className:`w-20 h-20 rounded-full flex items-center justify-center transition-all duration-200 ${v?"bg-red-500 text-white animate-pulse scale-110":"bg-primary text-primary-foreground hover:scale-105"}`,children:v?e.jsxDEV(_e,{className:"w-8 h-8"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:354,columnNumber:17},void 0):e.jsxDEV(he,{className:"w-8 h-8"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:356,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:345,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:344,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-center text-sm text-muted-foreground mt-2",children:v?"Recording... Click to stop":"Click to start recording"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:361,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:326,columnNumber:9},void 0),e.jsxDEV(be,{children:l&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full max-w-md",children:e.jsxDEV("div",{className:"bg-card border border-border rounded-lg p-6 text-center",children:[m!==null&&e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("div",{className:`text-3xl font-bold ${U(m)}`,children:[m,"%"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:378,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-center mt-2",children:[m>=85?e.jsxDEV(de,{className:"w-6 h-6 text-green-500 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:383,columnNumber:25},void 0):m>=50?e.jsxDEV(Ce,{className:"w-6 h-6 text-yellow-500 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:385,columnNumber:25},void 0):e.jsxDEV(De,{className:"w-6 h-6 text-red-500 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:387,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:["Attempt ",c]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:389,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:381,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:377,columnNumber:19},void 0),e.jsxDEV("p",{className:`text-sm ${V(l.type)}`,children:l.text},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:396,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:375,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:369,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:367,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex space-x-4",children:[e.jsxDEV("button",{onClick:_,className:"flex items-center space-x-2 px-6 py-3 bg-accent text-accent-foreground rounded-lg hover:bg-accent/80 transition-colors",children:[e.jsxDEV(er,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:410,columnNumber:13},void 0),e.jsxDEV("span",{children:"New Word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:411,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:406,columnNumber:11},void 0),m&&m>=85&&e.jsxDEV(E.button,{initial:{scale:0},animate:{scale:1},onClick:_,className:"flex items-center space-x-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsxDEV(cr,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:421,columnNumber:15},void 0),e.jsxDEV("span",{children:"Next Challenge"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:422,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:415,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:405,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:266,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Pronunciation.jsx",lineNumber:231,columnNumber:5},void 0)},un=()=>{const[o,r]=a.useState([]),[s,n]=a.useState(null),[i,t]=a.useState(!1),[l,u]=a.useState("flashcards"),[m,d]=a.useState("all"),[c,b]=a.useState("all"),[w,C]=a.useState(""),[p,D]=a.useState(""),[f,h]=a.useState(null),[v,x]=a.useState({correct:0,total:0}),[N,g]=a.useState(!1),[S,A]=a.useState({word:"",definition:"",category:"general",difficulty:"beginner"}),{addXP:F,updateProgress:G}=Ne(),{speakText:$}=Me(),_=[{id:1,word:"serendipity",definition:"The occurrence and development of events by chance in a happy or beneficial way",category:"advanced",difficulty:"advanced",example:"Meeting my best friend was pure serendipity.",pronunciation:"/Àåser…ônÀàd…™p…ôti/",learned:!1,lastReviewed:null,correctCount:0,totalAttempts:0},{id:2,word:"ubiquitous",definition:"Present, appearing, or found everywhere",category:"academic",difficulty:"advanced",example:"Smartphones have become ubiquitous in modern society.",pronunciation:"/juÀêÀàb…™kw…™t…ôs/",learned:!1,lastReviewed:null,correctCount:0,totalAttempts:0},{id:3,word:"ephemeral",definition:"Lasting for a very short time",category:"literature",difficulty:"intermediate",example:"The beauty of cherry blossoms is ephemeral.",pronunciation:"/…™Ààfem…ôr…ôl/",learned:!0,lastReviewed:new Date,correctCount:3,totalAttempts:4},{id:4,word:"resilient",definition:"Able to withstand or recover quickly from difficult conditions",category:"general",difficulty:"intermediate",example:"Children are remarkably resilient.",pronunciation:"/r…™Ààz…™li…ônt/",learned:!0,lastReviewed:new Date,correctCount:5,totalAttempts:6},{id:5,word:"meticulous",definition:"Showing great attention to detail; very careful and precise",category:"professional",difficulty:"intermediate",example:"She was meticulous in her research.",pronunciation:"/m…ôÀàt…™kj…ôl…ôs/",learned:!1,lastReviewed:null,correctCount:1,totalAttempts:3},{id:6,word:"ambiguous",definition:"Open to more than one interpretation; having a double meaning",category:"academic",difficulty:"intermediate",example:"The politician's statement was deliberately ambiguous.",pronunciation:"/√¶mÀàb…™…°ju…ôs/",learned:!1,lastReviewed:null,correctCount:0,totalAttempts:2}];a.useEffect(()=>{try{const y=localStorage.getItem("vocabularyWords");if(y){const T=JSON.parse(y);r(T)}else r(_),localStorage.setItem("vocabularyWords",JSON.stringify(_))}catch(y){console.warn("Failed to load vocabulary from localStorage:",y),r(_);try{localStorage.setItem("vocabularyWords",JSON.stringify(_))}catch(T){console.error("Failed to save vocabulary to localStorage:",T)}}},[]),a.useEffect(()=>{o.length>0&&!s&&ee()},[o,m,c]);const O=y=>{r(y);try{localStorage.setItem("vocabularyWords",JSON.stringify(y))}catch(T){console.error("Failed to save vocabulary to localStorage:",T)}},Y=o.filter(y=>{const T=m==="all"||y.category===m,k=c==="all"||y.difficulty===c,q=y.word.toLowerCase().includes(w.toLowerCase())||y.definition.toLowerCase().includes(w.toLowerCase());return T&&k&&q}),ee=()=>{const y=Y.filter(k=>l==="review"?k.learned&&k.lastReviewed:!k.learned||k.correctCount<3);if(y.length===0){n(null);return}const T=y.sort((k,q)=>{const re=k.totalAttempts>0?k.correctCount/k.totalAttempts:0,ce=q.totalAttempts>0?q.correctCount/q.totalAttempts:0;if(re!==ce)return re-ce;const P=k.lastReviewed?new Date(k.lastReviewed).getTime():0,M=q.lastReviewed?new Date(q.lastReviewed).getTime():0;return P-M});n(T[0]),t(!1),D(""),h(null)},j=()=>{t(!i)},B=y=>{if(!s)return;const T=o.map(k=>{if(k.id===s.id){const q=y?k.correctCount+1:k.correctCount,re=k.totalAttempts+1,ce=q>=3;return{...k,correctCount:q,totalAttempts:re,learned:ce,lastReviewed:new Date}}return k});O(T),x(k=>({correct:k.correct+(y?1:0),total:k.total+1})),F(y?10:5,"vocabulary"),y&&s.correctCount+1>=3&&G("learnedWords",1),ee()},z=()=>{if(!s||!p.trim())return;const y=p.toLowerCase().trim()===s.word.toLowerCase();h({correct:y,message:y?"Correct! Well done!":`Incorrect. The answer was "${s.word}".`}),setTimeout(()=>{B(y)},2e3)},W=()=>{if(!S.word.trim()||!S.definition.trim())return;const y={id:Date.now(),...S,learned:!1,lastReviewed:null,correctCount:0,totalAttempts:0,pronunciation:"",example:""},T=[...o,y];O(T),A({word:"",definition:"",category:"general",difficulty:"beginner"}),g(!1),F(5,"vocabulary")},V=y=>{$(y,{lang:"en-US",rate:.8})},U=["all","general","academic","professional","literature","advanced"],I=["all","beginner","intermediate","advanced"];return e.jsxDEV("div",{className:"flex flex-col h-full bg-background p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold mb-2",children:"Vocabulary Builder"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:280,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Expand your vocabulary with spaced repetition"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:281,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:279,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"bg-card border border-border rounded-lg px-4 py-2",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Session Progress"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:287,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-lg font-semibold",children:[v.correct,"/",v.total,v.total>0&&e.jsxDEV("span",{className:"text-sm text-muted-foreground ml-2",children:["(",Math.round(v.correct/v.total*100),"%)"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:291,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:288,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:286,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsxDEV(We,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:302,columnNumber:13},void 0),e.jsxDEV("span",{children:"Add Word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:303,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:298,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:284,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:278,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Study Mode"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:312,columnNumber:11},void 0),e.jsxDEV("select",{value:l,onChange:y=>u(y.target.value),className:"w-full p-2 rounded border border-input bg-background",children:[e.jsxDEV("option",{value:"flashcards",children:"Flashcards"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:318,columnNumber:13},void 0),e.jsxDEV("option",{value:"quiz",children:"Definition Quiz"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:319,columnNumber:13},void 0),e.jsxDEV("option",{value:"review",children:"Review Learned"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:320,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:313,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:311,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Category"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:326,columnNumber:11},void 0),e.jsxDEV("select",{value:m,onChange:y=>d(y.target.value),className:"w-full p-2 rounded border border-input bg-background",children:U.map(y=>e.jsxDEV("option",{value:y,children:y.charAt(0).toUpperCase()+y.slice(1)},y,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:333,columnNumber:15},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:327,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:325,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Difficulty"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:342,columnNumber:11},void 0),e.jsxDEV("select",{value:c,onChange:y=>b(y.target.value),className:"w-full p-2 rounded border border-input bg-background",children:I.map(y=>e.jsxDEV("option",{value:y,children:y.charAt(0).toUpperCase()+y.slice(1)},y,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:349,columnNumber:15},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:343,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:341,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Search"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:358,columnNumber:11},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:360,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:w,onChange:y=>C(y.target.value),placeholder:"Search words...",className:"w-full pl-10 pr-4 py-2 rounded border border-input bg-background"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:361,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:359,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:357,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:309,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:s?e.jsxDEV("div",{className:"w-full max-w-2xl",children:[l==="flashcards"&&e.jsxDEV(E.div,{initial:{opacity:0,rotateY:180},animate:{opacity:1,rotateY:0},className:"relative",children:[e.jsxDEV("div",{onClick:j,className:"bg-card border border-border rounded-2xl p-8 shadow-lg cursor-pointer hover:shadow-xl transition-all duration-300 min-h-[300px] flex flex-col justify-center",style:{perspective:"1000px"},children:e.jsxDEV(be,{mode:"wait",children:i?e.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[e.jsxDEV("h3",{className:"text-2xl font-semibold mb-4",children:s.word},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:439,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-lg mb-6",children:s.definition},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:440,columnNumber:25},void 0),s.example&&e.jsxDEV("div",{className:"bg-muted rounded-lg p-4 mb-6",children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-1",children:"Example:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:444,columnNumber:29},void 0),e.jsxDEV("p",{className:"italic",children:['"',s.example,'"']},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:445,columnNumber:29},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:443,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex items-center justify-center text-muted-foreground",children:[e.jsxDEV(Ke,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:450,columnNumber:27},void 0),e.jsxDEV("span",{children:"Click to hide definition"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:451,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:449,columnNumber:25},void 0)]},"back",!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:432,columnNumber:23},void 0):e.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[e.jsxDEV("div",{className:"flex items-center justify-center mb-4",children:[e.jsxDEV("h2",{className:"text-4xl font-bold",children:s.word},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:399,columnNumber:27},void 0),e.jsxDEV("button",{onClick:y=>{y.stopPropagation(),V(s.word)},className:"ml-4 p-2 rounded-full hover:bg-accent transition-colors",children:e.jsxDEV(je,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:407,columnNumber:29},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:400,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:398,columnNumber:25},void 0),s.pronunciation&&e.jsxDEV("p",{className:"text-lg text-muted-foreground mb-4",children:s.pronunciation},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:412,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsxDEV("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:s.category},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:418,columnNumber:27},void 0),e.jsxDEV("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm",children:s.difficulty},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:421,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:417,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center justify-center text-muted-foreground",children:[e.jsxDEV(Fe,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:427,columnNumber:27},void 0),e.jsxDEV("span",{children:"Click to reveal definition"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:428,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:426,columnNumber:25},void 0)]},"front",!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:391,columnNumber:23},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:389,columnNumber:19},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:384,columnNumber:17},void 0),i&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-center space-x-4 mt-6",children:[e.jsxDEV("button",{onClick:()=>B(!1),className:"flex items-center space-x-2 px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[e.jsxDEV(De,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:469,columnNumber:23},void 0),e.jsxDEV("span",{children:"Don't Know"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:470,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:465,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>B(!0),className:"flex items-center space-x-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsxDEV(de,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:477,columnNumber:23},void 0),e.jsxDEV("span",{children:"Know It"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:478,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:473,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:460,columnNumber:19},void 0)]},s.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:377,columnNumber:15},void 0),l==="quiz"&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card border border-border rounded-2xl p-8 shadow-lg",children:[e.jsxDEV("div",{className:"text-center mb-6",children:[e.jsxDEV("h3",{className:"text-xl font-semibold mb-4",children:"What word matches this definition?"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:493,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-muted rounded-lg p-6",children:[e.jsxDEV("p",{className:"text-lg",children:s.definition},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:495,columnNumber:21},void 0),s.example&&e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-4 italic",children:['Example: "',s.example,'"']},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:497,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:494,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:492,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("input",{type:"text",value:p,onChange:y=>D(y.target.value),onKeyPress:y=>y.key==="Enter"&&z(),placeholder:"Type the word...",className:"w-full p-4 text-center text-lg rounded-lg border border-input bg-background",disabled:!!f},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:505,columnNumber:19},void 0),!f&&e.jsxDEV("button",{onClick:z,disabled:!p.trim(),className:"w-full py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Submit Answer"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:516,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:504,columnNumber:17},void 0),f&&e.jsxDEV(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`mt-4 p-4 rounded-lg text-center ${f.correct?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:e.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[f.correct?e.jsxDEV(de,{className:"w-6 h-6 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:538,columnNumber:25},void 0):e.jsxDEV(De,{className:"w-6 h-6 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:540,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-semibold",children:f.message},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:542,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:536,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:527,columnNumber:19},void 0)]},s.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:486,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:375,columnNumber:11},void 0):e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(zr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:551,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-xl font-semibold mb-2",children:"No words to study"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:552,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-muted-foreground mb-4",children:Y.length===0?"No words match your current filters.":"You've mastered all words in this category!"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:553,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>{d("all"),b("all"),C("")},className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"Reset Filters"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:558,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:550,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:373,columnNumber:7},void 0),e.jsxDEV(be,{children:N&&e.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>g(!1),children:e.jsxDEV(E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:y=>y.stopPropagation(),className:"bg-card border border-border rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Add New Word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:589,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:593,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",value:S.word,onChange:y=>A(T=>({...T,word:y.target.value})),className:"w-full p-2 rounded border border-input bg-background",placeholder:"Enter the word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:594,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:592,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Definition"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:604,columnNumber:19},void 0),e.jsxDEV("textarea",{value:S.definition,onChange:y=>A(T=>({...T,definition:y.target.value})),className:"w-full p-2 rounded border border-input bg-background h-20 resize-none",placeholder:"Enter the definition"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:605,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:603,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Category"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:615,columnNumber:21},void 0),e.jsxDEV("select",{value:S.category,onChange:y=>A(T=>({...T,category:y.target.value})),className:"w-full p-2 rounded border border-input bg-background",children:U.filter(y=>y!=="all").map(y=>e.jsxDEV("option",{value:y,children:y.charAt(0).toUpperCase()+y.slice(1)},y,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:622,columnNumber:25},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:616,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:614,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Difficulty"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:630,columnNumber:21},void 0),e.jsxDEV("select",{value:S.difficulty,onChange:y=>A(T=>({...T,difficulty:y.target.value})),className:"w-full p-2 rounded border border-input bg-background",children:I.filter(y=>y!=="all").map(y=>e.jsxDEV("option",{value:y,children:y.charAt(0).toUpperCase()+y.slice(1)},y,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:637,columnNumber:25},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:631,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:629,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:613,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:591,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsxDEV("button",{onClick:()=>g(!1),className:"px-4 py-2 text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:647,columnNumber:17},void 0),e.jsxDEV("button",{onClick:W,disabled:!S.word.trim()||!S.definition.trim(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Word"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:653,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:646,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:582,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:575,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:573,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Vocabulary.jsx",lineNumber:276,columnNumber:5},void 0)},cn=()=>{const[o,r]=a.useState(null),[s,n]=a.useState(""),[i,t]=a.useState(!1),[l,u]=a.useState("multiple-choice"),[m,d]=a.useState("all"),[c,b]=a.useState("beginner"),[w,C]=a.useState({correct:0,total:0}),[p,D]=a.useState(!1),[f,h]=a.useState(""),{addXP:v,updateProgress:x}=Ne(),N={"present-tense":{beginner:[{id:1,type:"multiple-choice",question:"She _____ to school every day.",options:["go","goes","going","gone"],correct:"goes",explanation:'Use "goes" with third person singular (he, she, it) in present simple tense.',topic:"Present Simple",difficulty:"beginner"},{id:2,type:"fill-blank",question:"I _____ (work) in an office.",correct:"work",explanation:'Use the base form of the verb with "I" in present simple tense.',topic:"Present Simple",difficulty:"beginner"},{id:3,type:"multiple-choice",question:"They _____ playing football right now.",options:["is","are","am","be"],correct:"are",explanation:'Use "are" with plural subjects (they, we) in present continuous tense.',topic:"Present Continuous",difficulty:"beginner"}],intermediate:[{id:4,type:"multiple-choice",question:"She _____ been working here for five years.",options:["have","has","had","having"],correct:"has",explanation:'Use "has" with third person singular in present perfect tense.',topic:"Present Perfect",difficulty:"intermediate"},{id:5,type:"sentence-correction",question:"I am knowing the answer.",correct:"I know the answer.",explanation:'Stative verbs like "know" are not used in continuous tenses.',topic:"Stative Verbs",difficulty:"intermediate"}]},"past-tense":{beginner:[{id:6,type:"multiple-choice",question:"Yesterday, I _____ to the store.",options:["go","went","going","gone"],correct:"went",explanation:'Use the past form "went" for past simple tense.',topic:"Past Simple",difficulty:"beginner"},{id:7,type:"fill-blank",question:"She _____ (study) all night yesterday.",correct:"studied",explanation:'Add "-ed" to regular verbs to form past simple tense.',topic:"Past Simple",difficulty:"beginner"}],intermediate:[{id:8,type:"multiple-choice",question:"When I arrived, they _____ already left.",options:["have","has","had","having"],correct:"had",explanation:"Use past perfect (had + past participle) for actions completed before another past action.",topic:"Past Perfect",difficulty:"intermediate"}]},articles:{beginner:[{id:9,type:"multiple-choice",question:"I saw _____ elephant at the zoo.",options:["a","an","the","no article"],correct:"an",explanation:'Use "an" before words starting with vowel sounds.',topic:"Indefinite Articles",difficulty:"beginner"},{id:10,type:"multiple-choice",question:"_____ sun rises in the east.",options:["A","An","The","No article"],correct:"The",explanation:'Use "the" with unique objects like the sun, moon, earth.',topic:"Definite Articles",difficulty:"beginner"}],intermediate:[{id:11,type:"sentence-correction",question:"I love the music.",correct:"I love music.",explanation:`Don't use "the" with uncountable nouns when speaking generally.`,topic:"Articles with Uncountable Nouns",difficulty:"intermediate"}]},prepositions:{beginner:[{id:12,type:"multiple-choice",question:"The book is _____ the table.",options:["in","on","at","by"],correct:"on",explanation:'Use "on" for surfaces.',topic:"Prepositions of Place",difficulty:"beginner"},{id:13,type:"multiple-choice",question:"I wake up _____ 7 o'clock.",options:["in","on","at","by"],correct:"at",explanation:'Use "at" with specific times.',topic:"Prepositions of Time",difficulty:"beginner"}],intermediate:[{id:14,type:"fill-blank",question:"She is good _____ mathematics.",correct:"at",explanation:'Use "good at" for skills and abilities.',topic:"Dependent Prepositions",difficulty:"intermediate"}]}},g={all:"All Topics","present-tense":"Present Tense","past-tense":"Past Tense",articles:"Articles",prepositions:"Prepositions"};a.useEffect(()=>{A()},[m,c,l]);const S=()=>{let _=[];return m==="all"?Object.values(N).forEach(O=>{O[c]&&(_=_.concat(O[c]))}):N[m]&&N[m][c]&&(_=N[m][c]),_.filter(O=>l==="all"||O.type===l)},A=()=>{const _=S();if(_.length===0){r(null);return}const O=_[Math.floor(Math.random()*_.length)];r(O),n(""),h(""),t(!1),D(!1)},F=()=>{if(!o)return;let _=!1,O="";o.type==="multiple-choice"?(O=s,_=s===o.correct):(o.type==="fill-blank"||o.type==="sentence-correction")&&(O=f.trim(),_=O.toLowerCase()===o.correct.toLowerCase()),t(!0),C(ee=>({correct:ee.correct+(_?1:0),total:ee.total+1})),v(_?15:5,"grammar"),_&&x("completedLessons",1)},G=()=>{A()},$=()=>o?e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card border border-border rounded-2xl p-8 shadow-lg max-w-2xl mx-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsxDEV(ye,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:296,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:295,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold",children:o.topic},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:299,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground capitalize",children:[o.type.replace("-"," ")," ‚Ä¢ ",o.difficulty]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:300,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:298,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:294,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Progress"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:307,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-lg font-semibold",children:[w.correct,"/",w.total]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:308,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:306,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:293,columnNumber:9},void 0),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h2",{className:"text-xl font-medium mb-4",children:o.question},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:316,columnNumber:11},void 0),o.type==="multiple-choice"&&e.jsxDEV("div",{className:"space-y-3",children:o.options.map((_,O)=>e.jsxDEV("label",{className:`flex items-center p-4 rounded-lg border cursor-pointer transition-all ${s===_?"border-primary bg-primary/5":"border-border hover:border-primary/50"} ${i?_===o.correct?"border-green-500 bg-green-50 dark:bg-green-900/20":s===_&&_!==o.correct?"border-red-500 bg-red-50 dark:bg-red-900/20":"opacity-50":""}`,children:[e.jsxDEV("input",{type:"radio",name:"answer",value:_,checked:s===_,onChange:Y=>n(Y.target.value),disabled:i,className:"mr-3"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:338,columnNumber:19},void 0),e.jsxDEV("span",{className:"flex-1",children:_},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:347,columnNumber:19},void 0),i&&_===o.correct&&e.jsxDEV(de,{className:"w-5 h-5 text-green-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:349,columnNumber:21},void 0),i&&s===_&&_!==o.correct&&e.jsxDEV(De,{className:"w-5 h-5 text-red-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:352,columnNumber:21},void 0)]},O,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:322,columnNumber:17},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:320,columnNumber:13},void 0),(o.type==="fill-blank"||o.type==="sentence-correction")&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("input",{type:"text",value:f,onChange:_=>h(_.target.value),onKeyPress:_=>_.key==="Enter"&&!i&&F(),placeholder:o.type==="fill-blank"?"Fill in the blank...":"Correct the sentence...",disabled:i,className:`w-full p-4 text-lg rounded-lg border transition-all ${i?f.toLowerCase().trim()===o.correct.toLowerCase()?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-red-500 bg-red-50 dark:bg-red-900/20":"border-input bg-background"}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:362,columnNumber:15},void 0),i&&f.toLowerCase().trim()!==o.correct.toLowerCase()&&e.jsxDEV("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center mb-2",children:[e.jsxDEV(de,{className:"w-5 h-5 text-green-500 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:381,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Correct Answer:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:382,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:380,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-green-600 dark:text-green-400",children:o.correct},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:384,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:379,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:361,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:315,columnNumber:9},void 0),e.jsxDEV(be,{children:i&&e.jsxDEV(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:e.jsxDEV("div",{className:`p-4 rounded-lg border ${o.type==="multiple-choice"&&s===o.correct||(o.type==="fill-blank"||o.type==="sentence-correction")&&f.toLowerCase().trim()===o.correct.toLowerCase()?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"}`,children:[e.jsxDEV("div",{className:"flex items-center mb-2",children:o.type==="multiple-choice"&&s===o.correct||(o.type==="fill-blank"||o.type==="sentence-correction")&&f.toLowerCase().trim()===o.correct.toLowerCase()?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(de,{className:"w-5 h-5 text-green-500 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:411,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Correct!"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:412,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:410,columnNumber:21},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(De,{className:"w-5 h-5 text-red-500 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:416,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium text-red-700 dark:text-red-300",children:"Incorrect"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:417,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:415,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:406,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>D(!p),className:"flex items-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[e.jsxDEV(fs,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:426,columnNumber:19},void 0),p?"Hide":"Show"," Explanation"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:422,columnNumber:17},void 0),e.jsxDEV(be,{children:p&&e.jsxDEV(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 pt-3 border-t border-current/20",children:e.jsxDEV("p",{className:"text-sm",children:o.explanation},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:438,columnNumber:23},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:432,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:430,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:399,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:394,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:392,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex justify-center space-x-4",children:[i?e.jsxDEV("button",{onClick:G,className:"flex items-center space-x-2 px-8 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsxDEV("span",{children:"Next Exercise"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:466,columnNumber:15},void 0),e.jsxDEV(Fr,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:467,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:462,columnNumber:13},void 0):e.jsxDEV("button",{onClick:F,disabled:o.type==="multiple-choice"&&!s||(o.type==="fill-blank"||o.type==="sentence-correction")&&!f.trim(),className:"flex items-center space-x-2 px-8 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsxDEV(Ce,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:458,columnNumber:15},void 0),e.jsxDEV("span",{children:"Submit Answer"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:459,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:450,columnNumber:13},void 0),e.jsxDEV("button",{onClick:A,className:"flex items-center space-x-2 px-6 py-3 bg-accent text-accent-foreground rounded-lg hover:bg-accent/80 transition-colors",children:[e.jsxDEV(er,{className:"w-5 h-5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:475,columnNumber:13},void 0),e.jsxDEV("span",{children:"Skip"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:476,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:471,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:448,columnNumber:9},void 0)]},o.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:286,columnNumber:7},void 0):e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(zr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:266,columnNumber:11},void 0),e.jsxDEV("h3",{className:"text-xl font-semibold mb-2",children:"No exercises available"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:267,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your filters to find exercises."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:268,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>{d("all"),b("beginner"),u("multiple-choice")},className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"Reset Filters"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:271,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:265,columnNumber:9},void 0);return e.jsxDEV("div",{className:"flex flex-col h-full bg-background p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold mb-2",children:"Grammar Exercises"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:488,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Master English grammar with interactive exercises"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:489,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:487,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-card border border-border rounded-lg px-4 py-2",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Session Score"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:494,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-lg font-semibold",children:[w.correct,"/",w.total,w.total>0&&e.jsxDEV("span",{className:"text-sm text-muted-foreground ml-2",children:["(",Math.round(w.correct/w.total*100),"%)"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:498,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:495,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:493,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:486,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Grammar Topic"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:510,columnNumber:11},void 0),e.jsxDEV("select",{value:m,onChange:_=>d(_.target.value),className:"w-full p-3 rounded-lg border border-input bg-background",children:Object.entries(g).map(([_,O])=>e.jsxDEV("option",{value:_,children:O},_,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:517,columnNumber:15},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:511,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:509,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Difficulty Level"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:524,columnNumber:11},void 0),e.jsxDEV("select",{value:c,onChange:_=>b(_.target.value),className:"w-full p-3 rounded-lg border border-input bg-background",children:[e.jsxDEV("option",{value:"beginner",children:"Beginner"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:530,columnNumber:13},void 0),e.jsxDEV("option",{value:"intermediate",children:"Intermediate"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:531,columnNumber:13},void 0),e.jsxDEV("option",{value:"advanced",children:"Advanced"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:532,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:525,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:523,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Exercise Type"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:538,columnNumber:11},void 0),e.jsxDEV("select",{value:l,onChange:_=>u(_.target.value),className:"w-full p-3 rounded-lg border border-input bg-background",children:[e.jsxDEV("option",{value:"multiple-choice",children:"Multiple Choice"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:544,columnNumber:13},void 0),e.jsxDEV("option",{value:"fill-blank",children:"Fill in the Blank"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:545,columnNumber:13},void 0),e.jsxDEV("option",{value:"sentence-correction",children:"Sentence Correction"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:546,columnNumber:13},void 0),e.jsxDEV("option",{value:"all",children:"All Types"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:547,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:539,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:537,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:507,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:$()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:553,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Grammar.jsx",lineNumber:484,columnNumber:5},void 0)},mn=()=>{const[o,r]=a.useState("en"),[s,n]=a.useState(!0),[i,t]=a.useState(!0),[l,u]=a.useState(80),[m,d]=a.useState(!1),{theme:c,setTheme:b}=$r(),{aiSettings:w,saveAISettings:C,aiStatus:p,getStatusMessage:D}=ze();a.useEffect(()=>{f()},[]);const f=async()=>{var x,N;try{const g=await((N=(x=window.electronAPI)==null?void 0:x.getSettings)==null?void 0:N.call(x))||{};r(g.language||"en"),u(g.volume||50),n(g.notifications!==!1),t(g.autoSave!==!1)}catch(g){console.error("Failed to load settings:",g)}},h=async()=>{var x,N;try{const g={language:o,volume:l,notifications:s,autoSave:i};await((N=(x=window.electronAPI)==null?void 0:x.saveSettings)==null?void 0:N.call(x,g)),console.log("Settings saved successfully")}catch(g){console.error("Failed to save settings:",g)}},v=async x=>{try{await C(x),console.log("AI settings saved successfully")}catch(N){console.error("Failed to save AI settings:",N)}};return e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 max-w-4xl mx-auto",children:e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Settings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:67,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Appearance"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:74,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300",children:"Theme:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:78,columnNumber:15},void 0),e.jsxDEV("select",{value:c,onChange:x=>b(x.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsxDEV("option",{value:"light",children:"Light"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:84,columnNumber:17},void 0),e.jsxDEV("option",{value:"dark",children:"Dark"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:85,columnNumber:17},void 0),e.jsxDEV("option",{value:"system",children:"System"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:86,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:79,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:77,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:73,columnNumber:11},void 0),e.jsxDEV("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Language"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:93,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300",children:"Interface Language:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:97,columnNumber:15},void 0),e.jsxDEV("select",{value:o,onChange:x=>r(x.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsxDEV("option",{value:"en",children:"English"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:103,columnNumber:17},void 0),e.jsxDEV("option",{value:"es",children:"Espa√±ol"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:104,columnNumber:17},void 0),e.jsxDEV("option",{value:"fr",children:"Fran√ßais"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:105,columnNumber:17},void 0),e.jsxDEV("option",{value:"de",children:"Deutsch"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:106,columnNumber:17},void 0),e.jsxDEV("option",{value:"it",children:"Italiano"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:107,columnNumber:17},void 0),e.jsxDEV("option",{value:"pt",children:"Portugu√™s"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:108,columnNumber:17},void 0),e.jsxDEV("option",{value:"zh",children:"‰∏≠Êñá"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:109,columnNumber:17},void 0),e.jsxDEV("option",{value:"ja",children:"Êó•Êú¨Ë™û"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:110,columnNumber:17},void 0),e.jsxDEV("option",{value:"ko",children:"ÌïúÍµ≠Ïñ¥"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:111,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:98,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:96,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:92,columnNumber:11},void 0),e.jsxDEV("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Audio"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300 min-w-[100px]",children:"Volume:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:123,columnNumber:17},void 0),e.jsxDEV("input",{type:"range",min:"0",max:"100",value:l,onChange:x=>u(parseInt(x.target.value)),className:"flex-1"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:124,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-gray-700 dark:text-gray-300 min-w-[40px]",children:[l,"%"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:132,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:122,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:117,columnNumber:11},void 0),e.jsxDEV("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"AI Configuration"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:139,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"AI Status"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:144,columnNumber:17},void 0),e.jsxDEV("span",{className:`text-sm px-2 py-1 rounded ${p==="ready"?"bg-green-100 text-green-800":p==="initializing"?"bg-yellow-100 text-yellow-800":p==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:D()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:145,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:143,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300 min-w-[120px]",children:"AI Provider:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:156,columnNumber:17},void 0),e.jsxDEV("select",{value:w.provider,onChange:x=>v({provider:x.target.value}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsxDEV("option",{value:"transformers",children:"Transformers.js (Local)"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:162,columnNumber:19},void 0),e.jsxDEV("option",{value:"openai",children:"OpenAI API"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:163,columnNumber:19},void 0),e.jsxDEV("option",{value:"vertex-ai",children:"Google Vertex AI"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:165,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:157,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:155,columnNumber:15},void 0),w.provider!=="transformers"&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300 min-w-[120px]",children:"API Key:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:172,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV("input",{type:m?"text":"password",value:w.apiKey,onChange:x=>v({apiKey:x.target.value}),placeholder:`Enter your ${w.provider} API key`,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:174,columnNumber:23},void 0),e.jsxDEV("button",{type:"button",onClick:()=>d(!m),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:m?"Hide":"Show"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:181,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:173,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:171,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-[120px]",children:[w.provider==="openai"&&"Get your API key from https://platform.openai.com/api-keys",w.provider==="vertex-ai"&&"Configure Google Cloud authentication with: gcloud auth application-default login"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:190,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:170,columnNumber:17},void 0),w.provider==="transformers"&&e.jsxDEV("div",{className:"ml-[120px]",children:[e.jsxDEV("p",{className:"text-sm text-green-600 dark:text-green-400",children:"‚úì Using local AI models - no API key required"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:199,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Models run locally in your browser for privacy and offline use"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:202,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:198,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300 min-w-[120px]",children:"AI Model:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:209,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:w.model,onChange:x=>v({model:x.target.value}),placeholder:"Model name or ID",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:210,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:208,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-[120px]",children:"Specify the AI model to use (e.g., gpt-3.5-turbo for OpenAI)"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:218,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:142,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:138,columnNumber:11},void 0),e.jsxDEV("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"General"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:226,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300",children:"Enable Notifications"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:231,columnNumber:17},void 0),e.jsxDEV("input",{type:"checkbox",checked:s,onChange:x=>n(x.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:234,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:230,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("label",{className:"text-gray-700 dark:text-gray-300",children:"Auto-save Progress"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:242,columnNumber:17},void 0),e.jsxDEV("input",{type:"checkbox",checked:i,onChange:x=>t(x.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:245,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:241,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:229,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:225,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{onClick:h,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors duration-200",children:"Save Settings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:257,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:256,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:71,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:66,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Settings.jsx",lineNumber:60,columnNumber:5},void 0)},pn=({question:o,onSave:r,onCancel:s})=>{const[n,i]=a.useState({question:"",type:"multiple-choice",options:["","","",""],correct_answer:"",explanation:"",difficulty:"medium",points:1});a.useEffect(()=>{o&&i({question:o.question||"",type:o.type||"multiple-choice",options:o.options||["","","",""],correct_answer:o.correct_answer||"",explanation:o.explanation||"",difficulty:o.difficulty||"medium",points:o.points||1})},[o]);const t=d=>{if(d.preventDefault(),!n.question.trim()){alert("Please enter a question");return}if(n.type==="multiple-choice"){if(n.options.filter(w=>w.trim()).length<2){alert("Please provide at least 2 options");return}if(!n.correct_answer.trim()){alert("Please select a correct answer");return}}const c={...n,options:n.type==="multiple-choice"?n.options.filter(b=>b.trim()):void 0};r(c)},l=(d,c)=>{const b=[...n.options];b[d]=c,i({...n,options:b})},u=()=>{i({...n,options:[...n.options,""]})},m=d=>{const c=n.options.filter((b,w)=>w!==d);i({...n,options:c,correct_answer:n.correct_answer===n.options[d]?"":n.correct_answer})};return e.jsxDEV("form",{onSubmit:t,className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:o?"Edit Question":"Add New Question"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:86,columnNumber:9},void 0),e.jsxDEV("button",{type:"button",onClick:s,className:"p-2 hover:bg-muted rounded-lg",children:e.jsxDEV(Tr,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:94,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:89,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:85,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Question Type"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:100,columnNumber:9},void 0),e.jsxDEV("select",{value:n.type,onChange:d=>i({...n,type:d.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background",children:[e.jsxDEV("option",{value:"multiple-choice",children:"Multiple Choice"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:106,columnNumber:11},void 0),e.jsxDEV("option",{value:"true-false",children:"True/False"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:107,columnNumber:11},void 0),e.jsxDEV("option",{value:"short-answer",children:"Short Answer"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:108,columnNumber:11},void 0),e.jsxDEV("option",{value:"essay",children:"Essay"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:109,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:101,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:99,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Question *"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:115,columnNumber:9},void 0),e.jsxDEV("textarea",{value:n.question,onChange:d=>i({...n,question:d.target.value}),placeholder:"Enter your question here...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background h-24 resize-none",required:!0},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:114,columnNumber:7},void 0),n.type==="multiple-choice"&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Answer Options *"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:128,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[n.options.map((d,c)=>e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("input",{type:"radio",name:"correct_answer",checked:n.correct_answer===d,onChange:()=>i({...n,correct_answer:d}),className:"text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:d,onChange:b=>l(c,b.target.value),placeholder:`Option ${c+1}`,className:"flex-1 px-3 py-2 border border-border rounded-lg bg-background"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:139,columnNumber:17},void 0),n.options.length>2&&e.jsxDEV("button",{type:"button",onClick:()=>m(c),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:e.jsxDEV(lr,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:152,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:147,columnNumber:19},void 0)]},c,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:131,columnNumber:15},void 0)),n.options.length<6&&e.jsxDEV("button",{type:"button",onClick:u,className:"flex items-center space-x-2 text-primary hover:bg-primary/10 px-3 py-2 rounded-lg",children:[e.jsxDEV(We,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:163,columnNumber:17},void 0),e.jsxDEV("span",{children:"Add Option"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:164,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:158,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:129,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:127,columnNumber:9},void 0),n.type==="true-false"&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Correct Answer *"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:174,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex space-x-4",children:[e.jsxDEV("label",{className:"flex items-center space-x-2",children:[e.jsxDEV("input",{type:"radio",name:"tf_answer",value:"true",checked:n.correct_answer==="true",onChange:d=>i({...n,correct_answer:d.target.value}),className:"text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:177,columnNumber:15},void 0),e.jsxDEV("span",{children:"True"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:176,columnNumber:13},void 0),e.jsxDEV("label",{className:"flex items-center space-x-2",children:[e.jsxDEV("input",{type:"radio",name:"tf_answer",value:"false",checked:n.correct_answer==="false",onChange:d=>i({...n,correct_answer:d.target.value}),className:"text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:188,columnNumber:15},void 0),e.jsxDEV("span",{children:"False"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:196,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:175,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:173,columnNumber:9},void 0),(n.type==="short-answer"||n.type==="essay")&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:n.type==="essay"?"Sample Answer":"Correct Answer"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:205,columnNumber:11},void 0),e.jsxDEV("textarea",{value:n.correct_answer,onChange:d=>i({...n,correct_answer:d.target.value}),placeholder:n.type==="essay"?"Provide a sample answer or key points...":"Enter the correct answer...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background h-20 resize-none"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:204,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Explanation (Optional)"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:219,columnNumber:9},void 0),e.jsxDEV("textarea",{value:n.explanation,onChange:d=>i({...n,explanation:d.target.value}),placeholder:"Explain why this is the correct answer...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background h-20 resize-none"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:220,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:218,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Difficulty"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:231,columnNumber:11},void 0),e.jsxDEV("select",{value:n.difficulty,onChange:d=>i({...n,difficulty:d.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background",children:[e.jsxDEV("option",{value:"easy",children:"Easy"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:237,columnNumber:13},void 0),e.jsxDEV("option",{value:"medium",children:"Medium"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:238,columnNumber:13},void 0),e.jsxDEV("option",{value:"hard",children:"Hard"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:239,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:232,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:230,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Points"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:243,columnNumber:11},void 0),e.jsxDEV("input",{type:"number",min:"1",max:"10",value:n.points,onChange:d=>i({...n,points:parseInt(d.target.value)||1}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:244,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:242,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:229,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-border",children:[e.jsxDEV("button",{type:"button",onClick:s,className:"px-4 py-2 text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:257,columnNumber:9},void 0),e.jsxDEV("button",{type:"submit",className:"btn btn-primary flex items-center space-x-2",children:[e.jsxDEV(Ns,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:268,columnNumber:11},void 0),e.jsxDEV("span",{children:o?"Update Question":"Save Question"},void 0,!1,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:269,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:264,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:256,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/components/admin/QuestionForm.jsx",lineNumber:84,columnNumber:5},void 0)},bn=()=>{var Y,ee;const[o,r]=a.useState({totalStudents:0,activeCourses:0,totalAssignments:0,totalTeachers:0}),[s,n]=a.useState([]),[i,t]=a.useState([]),[l,u]=a.useState([]),[m,d]=a.useState(null),[c,b]=a.useState(null),[w,C]=a.useState(!1),[p,D]=a.useState(!0),[f,h]=a.useState(null),[v,x]=a.useState("overview");a.useEffect(()=>{N(),v==="questions"&&F()},[v]),a.useEffect(()=>{N()},[]);const N=async()=>{try{D(!0),h(null),await g(),await S(),v==="students"&&await A()}catch(j){console.error("Error loading dashboard data:",j),h("Failed to load dashboard data")}finally{D(!1)}},g=async()=>{try{r({totalStudents:156,activeCourses:12,totalAssignments:48,totalTeachers:8})}catch(j){console.error("Error loading stats:",j)}},S=async()=>{try{n([{id:1,type:"enrollment",message:"New student enrolled in Spanish Basics",timestamp:new Date(Date.now()-1e3*60*30),user:"John Doe"},{id:2,type:"assignment",message:'Assignment "Grammar Exercise 1" submitted',timestamp:new Date(Date.now()-1e3*60*60),user:"Jane Smith"},{id:3,type:"completion",message:'Course "French Intermediate" completed',timestamp:new Date(Date.now()-1e3*60*60*2),user:"Mike Johnson"}])}catch(j){console.error("Error loading recent activity:",j)}},A=async()=>{try{t([{id:1,name:"John Doe",email:"john@example.com",level:"Beginner",progress:65,lastActive:new Date(Date.now()-1e3*60*30)},{id:2,name:"Jane Smith",email:"jane@example.com",level:"Intermediate",progress:82,lastActive:new Date(Date.now()-1e3*60*60)}])}catch(j){console.error("Error loading users:",j)}},F=async()=>{try{const{default:j}=await tr(async()=>{const{default:z}=await Promise.resolve().then(()=>or);return{default:z}},void 0,import.meta.url),B=await j.getContentModules();B.success?u(B.data.filter(z=>z.module_type==="assignment"||z.module_type==="test")):h("Failed to load content modules")}catch(j){console.error("Error loading content modules:",j),h("Failed to load content modules")}},G=async(j,B)=>{try{const{default:z}=await tr(async()=>{const{default:I}=await Promise.resolve().then(()=>or);return{default:I}},void 0,import.meta.url),W=l.find(I=>I.id===j);if(!W)return;const V={...W.content};if(V.questions||(V.questions=[]),c){const I=V.questions.findIndex(y=>y.id===c.id);I!==-1&&(V.questions[I]={...B,id:c.id})}else{const I={...B,id:Date.now().toString()};V.questions.push(I)}(await z.updateContentModule(j,{content:V})).success?(await F(),b(null),C(!1)):h("Failed to save question")}catch(z){console.error("Error saving question:",z),h("Failed to save question")}},$=async(j,B)=>{try{const{default:z}=await tr(async()=>{const{default:I}=await Promise.resolve().then(()=>or);return{default:I}},void 0,import.meta.url),W=l.find(I=>I.id===j);if(!W)return;const V={...W.content};V.questions&&(V.questions=V.questions.filter(I=>I.id!==B)),(await z.updateContentModule(j,{content:V})).success?await F():h("Failed to delete question")}catch(z){console.error("Error deleting question:",z),h("Failed to delete question")}},_=({title:j,value:B,icon:z,color:W,change:V})=>e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-1",children:j},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:243,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-3xl font-bold",children:B},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:244,columnNumber:11},void 0),V&&e.jsxDEV("p",{className:`text-sm mt-1 ${V>0?"text-green-600":"text-red-600"}`,children:[V>0?"+":"",V,"% from last month"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:246,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:242,columnNumber:9},void 0),e.jsxDEV("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${W}`,children:e.jsxDEV(z,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:252,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:251,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:241,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:236,columnNumber:5},void 0),O=({activity:j})=>{const z=(W=>{switch(W){case"enrollment":return wr;case"assignment":return ye;case"completion":return cr;default:return Ge}})(j.type);return e.jsxDEV("div",{className:"flex items-start space-x-3 p-3 hover:bg-muted/50 rounded-lg transition-colors",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxDEV(z,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:273,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:272,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium",children:j.message},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:276,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[j.user," ‚Ä¢ ",j.timestamp.toLocaleTimeString()]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:277,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:275,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:271,columnNumber:7},void 0)};return p?e.jsxDEV("div",{className:"flex items-center justify-center h-full",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:288,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:287,columnNumber:7},void 0):e.jsxDEV("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Admin Dashboard"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:301,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Manage courses, students, and monitor system activity"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:304,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:296,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg w-fit",children:[{id:"overview",label:"Overview",icon:Gr},{id:"students",label:"Students",icon:Dr},{id:"courses",label:"Courses",icon:ye},{id:"questions",label:"Questions",icon:ir},{id:"settings",label:"Settings",icon:Ze}].map(j=>{const B=j.icon;return e.jsxDEV("button",{onClick:()=>x(j.id),className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors ${v===j.id?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[e.jsxDEV(B,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:329,columnNumber:15},void 0),e.jsxDEV("span",{children:j.label},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:330,columnNumber:15},void 0)]},j.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:320,columnNumber:13},void 0)})},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:310,columnNumber:7},void 0),f&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-2",children:[e.jsxDEV(Ge,{className:"w-5 h-5 text-red-600"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:342,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-red-800",children:f},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:343,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:337,columnNumber:9},void 0),v==="overview"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxDEV(_,{title:"Total Students",value:o.totalStudents,icon:Dr,color:"bg-gradient-to-br from-blue-500 to-blue-600",change:12},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:352,columnNumber:13},void 0),e.jsxDEV(_,{title:"Active Courses",value:o.activeCourses,icon:ye,color:"bg-gradient-to-br from-green-500 to-green-600",change:5},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:359,columnNumber:13},void 0),e.jsxDEV(_,{title:"Total Assignments",value:o.totalAssignments,icon:dr,color:"bg-gradient-to-br from-purple-500 to-purple-600",change:-2},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:366,columnNumber:13},void 0),e.jsxDEV(_,{title:"Teachers",value:o.totalTeachers,icon:wr,color:"bg-gradient-to-br from-orange-500 to-orange-600",change:0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:373,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:351,columnNumber:11},void 0),e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Recent Activity"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:390,columnNumber:15},void 0),e.jsxDEV("button",{className:"text-sm text-primary hover:underline",children:"View All"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:391,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:389,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:s.map(j=>e.jsxDEV(O,{activity:j},j.id,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:397,columnNumber:17},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:395,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:349,columnNumber:9},void 0),v==="students"&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Student Management"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:412,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(ur,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:415,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",placeholder:"Search students...",className:"pl-10 pr-4 py-2 border border-border rounded-lg bg-background"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:416,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:414,columnNumber:15},void 0),e.jsxDEV("button",{className:"btn btn-primary",children:[e.jsxDEV(We,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:423,columnNumber:17},void 0),"Add Student"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:422,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:413,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:411,columnNumber:11},void 0),e.jsxDEV("div",{className:"card overflow-hidden",children:e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-muted/50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"text-left p-4 font-medium",children:"Student"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:434,columnNumber:21},void 0),e.jsxDEV("th",{className:"text-left p-4 font-medium",children:"Level"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:435,columnNumber:21},void 0),e.jsxDEV("th",{className:"text-left p-4 font-medium",children:"Progress"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:436,columnNumber:21},void 0),e.jsxDEV("th",{className:"text-left p-4 font-medium",children:"Last Active"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:437,columnNumber:21},void 0),e.jsxDEV("th",{className:"text-left p-4 font-medium",children:"Actions"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:438,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:433,columnNumber:19},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:432,columnNumber:17},void 0),e.jsxDEV("tbody",{children:i.map(j=>e.jsxDEV("tr",{className:"border-t border-border",children:[e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:j.name},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:446,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:j.email},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:447,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:445,columnNumber:25},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:444,columnNumber:23},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded-full text-sm",children:j.level},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:451,columnNumber:25},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:450,columnNumber:23},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"w-20 h-2 bg-muted rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-primary rounded-full",style:{width:`${j.progress}%`}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:458,columnNumber:29},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:457,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-sm",children:[j.progress,"%"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:463,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:456,columnNumber:25},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:455,columnNumber:23},void 0),e.jsxDEV("td",{className:"p-4 text-sm text-muted-foreground",children:j.lastActive.toLocaleDateString()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:466,columnNumber:23},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("button",{className:"p-1 hover:bg-muted rounded",children:e.jsxDEV(Fe,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:472,columnNumber:29},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:471,columnNumber:27},void 0),e.jsxDEV("button",{className:"p-1 hover:bg-muted rounded",children:e.jsxDEV(Vr,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:475,columnNumber:29},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:474,columnNumber:27},void 0),e.jsxDEV("button",{className:"p-1 hover:bg-muted rounded text-red-600",children:e.jsxDEV(lr,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:478,columnNumber:29},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:477,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:470,columnNumber:25},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:469,columnNumber:23},void 0)]},j.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:443,columnNumber:21},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:441,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:431,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:430,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:429,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:406,columnNumber:9},void 0),v==="questions"&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Question Management"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:499,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("select",{value:(m==null?void 0:m.id)||"",onChange:j=>{const B=l.find(z=>z.id===j.target.value);d(B||null)},className:"px-3 py-2 border border-border rounded-lg bg-background",children:[e.jsxDEV("option",{value:"",children:"Select Assignment/Test"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:509,columnNumber:17},void 0),l.map(j=>e.jsxDEV("option",{value:j.id,children:[j.title," (",j.module_type,")"]},j.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:511,columnNumber:19},void 0))]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:501,columnNumber:15},void 0),m&&e.jsxDEV("button",{onClick:()=>C(!0),className:"btn btn-primary",children:[e.jsxDEV(We,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:521,columnNumber:19},void 0),"Add Question"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:517,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:500,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:498,columnNumber:11},void 0),m?e.jsxDEV("div",{className:"card p-6",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:m.title},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:531,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[m.description," ‚Ä¢ Level: ",m.cefr_level]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:532,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:530,columnNumber:15},void 0),((ee=(Y=m.content)==null?void 0:Y.questions)==null?void 0:ee.length)>0?e.jsxDEV("div",{className:"space-y-4",children:m.content.questions.map((j,B)=>e.jsxDEV("div",{className:"border border-border rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-primary",children:["Question ",B+1]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:544,columnNumber:29},void 0),e.jsxDEV("span",{className:"px-2 py-1 bg-muted text-muted-foreground rounded text-xs",children:j.type||"multiple-choice"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:547,columnNumber:29},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:543,columnNumber:27},void 0),e.jsxDEV("p",{className:"font-medium mb-2",children:j.question},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:551,columnNumber:27},void 0),j.options&&e.jsxDEV("div",{className:"space-y-1",children:j.options.map((z,W)=>e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:`w-2 h-2 rounded-full ${z===j.correct_answer?"bg-green-500":"bg-muted"}`},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:556,columnNumber:35},void 0),e.jsxDEV("span",{className:z===j.correct_answer?"text-green-700 font-medium":"",children:z},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:559,columnNumber:35},void 0)]},W,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:555,columnNumber:33},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:553,columnNumber:29},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:542,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("button",{onClick:()=>b(j),className:"p-1 hover:bg-muted rounded",children:e.jsxDEV(Vr,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:572,columnNumber:29},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:568,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>$(m.id,j.id),className:"p-1 hover:bg-muted rounded text-red-600",children:e.jsxDEV(lr,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:578,columnNumber:29},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:574,columnNumber:27},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:567,columnNumber:25},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:541,columnNumber:23},void 0)},j.id,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:540,columnNumber:21},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:538,columnNumber:17},void 0):e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV(ir,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:587,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"No questions found"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:588,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Add your first question to get started"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:589,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:586,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:529,columnNumber:13},void 0):e.jsxDEV("div",{className:"card p-8 text-center",children:[e.jsxDEV(ir,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:595,columnNumber:15},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold mb-2",children:"Select an Assignment or Test"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:596,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Choose an assignment or test from the dropdown above to manage its questions"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:597,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:594,columnNumber:13},void 0),(w||c)&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-background rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxDEV(pn,{question:c,onSave:j=>G(m.id,j),onCancel:()=>{b(null),C(!1)}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:607,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:606,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:605,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:493,columnNumber:9},void 0),(v==="courses"||v==="settings")&&e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-8 text-center",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-2",children:v==="courses"?"Course Management":"Settings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:628,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"This section is under development."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:631,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:623,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AdminDashboard.jsx",lineNumber:294,columnNumber:5},void 0)},Ue=({size:o="md",message:r="Loading...",className:s=""})=>{const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"};return e.jsxDEV("div",{className:`flex flex-col items-center justify-center p-8 ${s}`,children:[e.jsxDEV("div",{className:`${n[o]} border-4 border-primary/20 border-t-primary rounded-full animate-spin`,role:"status","aria-label":"Loading"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingSpinner.jsx",lineNumber:21,columnNumber:7},void 0),r&&e.jsxDEV("p",{className:"mt-4 text-sm text-muted-foreground animate-pulse",children:r},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingSpinner.jsx",lineNumber:27,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/ui/LoadingSpinner.jsx",lineNumber:20,columnNumber:5},void 0)},fn=()=>{var h,v;const[o,r]=a.useState(""),[s,n]=a.useState(""),[i,t]=a.useState(!1),[l,u]=a.useState(""),[m,d]=a.useState(!1),{signIn:c,signInWithGoogle:b,user:w}=Ve(),C=rr(),D=((v=(h=Ye().state)==null?void 0:h.from)==null?void 0:v.pathname)||"/";a.useEffect(()=>{w&&C(D,{replace:!0})},[w,C,D]);const f=async x=>{if(x.preventDefault(),u(""),d(!0),!o||!s){u("Please fill in all fields"),d(!1);return}const{error:N}=await c(o,s);N&&u(N.message),d(!1)};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:e.jsxDEV(te,{className:"p-8 shadow-xl",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV(E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:"EL"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:76,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:70,columnNumber:13},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:78,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:"Sign in to continue your learning journey"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:69,columnNumber:11},void 0),l&&e.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsxDEV(Ge,{className:"w-4 h-4 flex-shrink-0"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:92,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm",children:l},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:93,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:87,columnNumber:13},void 0),e.jsxDEV("form",{onSubmit:f,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:99,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:103,columnNumber:17},void 0),e.jsxDEV(ve,{id:"email",type:"email",value:o,onChange:x=>r(x.target.value),placeholder:"Enter your email",className:"pl-10",disabled:m,required:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:104,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:102,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:98,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:118,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:122,columnNumber:17},void 0),e.jsxDEV(ve,{id:"password",type:i?"text":"password",value:s,onChange:x=>n(x.target.value),placeholder:"Enter your password",className:"pl-10 pr-10",disabled:m,required:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:123,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:()=>t(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:m,children:i?e.jsxDEV(Ke,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:139,columnNumber:35},void 0):e.jsxDEV(Fe,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:139,columnNumber:68},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:133,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:121,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV(Qe,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Forgot password?"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:145,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:144,columnNumber:13},void 0),e.jsxDEV(Z,{type:"submit",className:"w-full",disabled:m,children:m?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ue,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:160,columnNumber:19},void 0),"Signing In..."]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:159,columnNumber:17},void 0):"Sign In"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:153,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:97,columnNumber:11},void 0),!1,e.jsxDEV("div",{className:"mt-6 text-center",children:e.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsxDEV(Qe,{to:"/auth/signup",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Sign up"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:220,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:218,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:217,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:68,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:62,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/Login.jsx",lineNumber:61,columnNumber:5},void 0)},Nn=()=>{const[o,r]=a.useState({fullName:"",email:"",password:"",confirmPassword:""}),[s,n]=a.useState(!1),[i,t]=a.useState(!1),[l,u]=a.useState(""),[m,d]=a.useState(""),[c,b]=a.useState(!1),[w,C]=a.useState(0),{signUp:p,signInWithGoogle:D,user:f}=Ve(),h=rr();a.useEffect(()=>{f&&h("/",{replace:!0})},[f,h]),a.useEffect(()=>{const A=o.password;let F=0;A.length>=8&&(F+=1),/[A-Z]/.test(A)&&(F+=1),/[a-z]/.test(A)&&(F+=1),/[0-9]/.test(A)&&(F+=1),/[^A-Za-z0-9]/.test(A)&&(F+=1),C(F)},[o.password]);const v=A=>{const{name:F,value:G}=A.target;r($=>({...$,[F]:G})),u(""),d("")},x=()=>o.fullName.trim()?o.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)?o.password.length<8?(u("Password must be at least 8 characters long"),!1):o.password!==o.confirmPassword?(u("Passwords do not match"),!1):!0:(u("Please enter a valid email address"),!1):(u("Email is required"),!1):(u("Full name is required"),!1),N=async A=>{if(A.preventDefault(),u(""),d(""),!x())return;b(!0);const{data:F,error:G}=await p(o.email,o.password,{full_name:o.fullName});G?u(G.message):(d("Account created successfully! Please check your email to verify your account."),r({fullName:"",email:"",password:"",confirmPassword:""})),b(!1)},g=()=>w<=2?"bg-red-500":w<=3?"bg-yellow-500":"bg-green-500",S=()=>w<=2?"Weak":w<=3?"Medium":"Strong";return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:e.jsxDEV(te,{className:"p-8 shadow-xl",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV(E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:"EL"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:161,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:155,columnNumber:13},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Create Account"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:163,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:"Start your language learning journey today"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:166,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:154,columnNumber:11},void 0),l&&e.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsxDEV(Ge,{className:"w-4 h-4 flex-shrink-0"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:177,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm",children:l},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:178,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:172,columnNumber:13},void 0),m&&e.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400",children:[e.jsxDEV(de,{className:"w-4 h-4 flex-shrink-0"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:188,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm",children:m},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:189,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:183,columnNumber:13},void 0),e.jsxDEV("form",{onSubmit:N,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:195,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:199,columnNumber:17},void 0),e.jsxDEV(ve,{id:"fullName",name:"fullName",type:"text",value:o.fullName,onChange:v,placeholder:"Enter your full name",className:"pl-10",disabled:c,required:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:200,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:198,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:194,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:215,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:219,columnNumber:17},void 0),e.jsxDEV(ve,{id:"email",name:"email",type:"email",value:o.email,onChange:v,placeholder:"Enter your email",className:"pl-10",disabled:c,required:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:220,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:218,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:214,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:235,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:239,columnNumber:17},void 0),e.jsxDEV(ve,{id:"password",name:"password",type:s?"text":"password",value:o.password,onChange:v,placeholder:"Create a password",className:"pl-10 pr-10",disabled:c,required:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:240,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:()=>n(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:c,children:s?e.jsxDEV(Ke,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:257,columnNumber:35},void 0):e.jsxDEV(Fe,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:257,columnNumber:68},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:251,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:238,columnNumber:15},void 0),o.password&&e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxDEV("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsxDEV("div",{className:`h-2 rounded-full transition-all duration-300 ${g()}`,style:{width:`${w/5*100}%`}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:265,columnNumber:23},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:264,columnNumber:21},void 0),e.jsxDEV("span",{className:`text-xs font-medium ${w<=2?"text-red-500":w<=3?"text-yellow-500":"text-green-500"}`,children:S()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:270,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:263,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Use 8+ characters with uppercase, lowercase, numbers & symbols"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:277,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:262,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:234,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:285,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:289,columnNumber:17},void 0),e.jsxDEV(ve,{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",value:o.confirmPassword,onChange:v,placeholder:"Confirm your password",className:"pl-10 pr-10",disabled:c,required:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:290,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:()=>t(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:c,children:i?e.jsxDEV(Ke,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:307,columnNumber:42},void 0):e.jsxDEV(Fe,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:307,columnNumber:75},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:301,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:288,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:284,columnNumber:13},void 0),e.jsxDEV(Z,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ue,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:319,columnNumber:19},void 0),"Creating Account..."]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:318,columnNumber:17},void 0):"Create Account"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:312,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:193,columnNumber:11},void 0),!1,e.jsxDEV("div",{className:"mt-6 text-center",children:e.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",e.jsxDEV(Qe,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Sign in"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:379,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:377,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:376,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:153,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:147,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/SignUp.jsx",lineNumber:146,columnNumber:5},void 0)},xn=()=>{const o=rr();xs();const{supabase:r}=Fs(),[s,n]=a.useState("loading"),[i,t]=a.useState("Processing authentication...");a.useEffect(()=>{(async()=>{try{const{data:d,error:c}=await r.auth.getSession();if(c){console.error("Auth callback error:",c),n("error"),t(c.message||"Authentication failed"),setTimeout(()=>o("/auth/login"),3e3);return}d.session?(n("success"),t("Authentication successful! Redirecting..."),setTimeout(()=>o("/dashboard"),2e3)):(n("error"),t("No session found. Redirecting to login..."),setTimeout(()=>o("/auth/login"),3e3))}catch(d){console.error("Unexpected error during auth callback:",d),n("error"),t("An unexpected error occurred"),setTimeout(()=>o("/auth/login"),3e3)}})()},[o,r.auth]);const l=()=>{switch(s){case"loading":return e.jsxDEV(Sr,{className:"w-12 h-12 animate-spin text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:51,columnNumber:16},void 0);case"success":return e.jsxDEV(de,{className:"w-12 h-12 text-green-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:53,columnNumber:16},void 0);case"error":return e.jsxDEV(De,{className:"w-12 h-12 text-red-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:55,columnNumber:16},void 0);default:return e.jsxDEV(Sr,{className:"w-12 h-12 animate-spin text-primary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:57,columnNumber:16},void 0)}},u=()=>{switch(s){case"success":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-600"}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5 flex items-center justify-center p-4",children:e.jsxDEV(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"bg-card border border-border rounded-2xl shadow-xl p-8 w-full max-w-md text-center",children:[e.jsxDEV(E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"flex justify-center mb-6",children:l()},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:80,columnNumber:9},void 0),e.jsxDEV(E.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-2xl font-bold text-foreground mb-4",children:"Authentication"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:89,columnNumber:9},void 0),e.jsxDEV(E.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`text-lg ${u()} mb-6`,children:i},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:98,columnNumber:9},void 0),s==="loading"&&e.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex justify-center space-x-1",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:114,columnNumber:13},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:115,columnNumber:13},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:116,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:108,columnNumber:11},void 0),s==="error"&&e.jsxDEV(E.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},onClick:()=>o("/auth/login"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"Return to Login"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:121,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:74,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AuthCallback.jsx",lineNumber:73,columnNumber:5},void 0)};class gn{constructor(){this.conversationLevel="Basic",this.structuredLevels={Elementary:{fkRange:[0,1],cefr:"A2"},"Pre-Intermediate":{fkRange:[1,1.5],cefr:"B1"},Intermediate:{fkRange:[1.5,2.5],cefr:"B2"},"Upper-Intermediate":{fkRange:[2.5,3.5],cefr:"C1"},Advanced:{fkRange:[3.5,4.5],cefr:"C2"}}}calculateModifiedFK(r){if(!r||r.trim().length===0)return 0;const s=r.replace(/[^\w\s\.\!\?]/g," ").trim(),i=s.split(/[.!?]+/).filter(b=>b.trim().length>0).length;if(i===0)return 0;const t=s.split(/\s+/).filter(b=>b.length>0),l=t.length;if(l===0)return 0;let u=0;t.forEach(b=>{u+=this.countSyllables(b)});const m=l/i,d=u/l,c=.39*m+11.8*d-15.59;return Math.max(0,Math.min(4.5,c/10))}countSyllables(r){if(!r||r.length===0)return 0;if(r=r.toLowerCase(),r.length<=3)return 1;let s=0,n=!1;for(let i=0;i<r.length;i++){const t="aeiouy".includes(r[i]);t&&!n&&s++,n=t}return r.endsWith("e")&&s>1&&s--,Math.max(1,s)}assignUnifiedLevel(r,s=!1){if(s)return{level:"Basic",fleschKincaid:null,cefr:"A1",usage:"General conversation/Simple sentences",confidence:.95};const n=this.calculateModifiedFK(r);let i,t;return n<1?(i="Elementary",t="A2"):n<1.5?(i="Pre-Intermediate",t="B1"):n<2.5?(i="Intermediate",t="B2"):n<3.5?(i="Upper-Intermediate",t="C1"):(i="Advanced",t="C2"),{level:i,fleschKincaid:n,cefr:t,usage:"Structured learning content",confidence:this.calculateConfidence(n)}}calculateConfidence(r){const s=[0,1,1.5,2.5,3.5,4.5];for(let n=0;n<s.length-1;n++){const i=s[n],t=s[n+1];if(r>=i&&r<t){const l=t-i,u=r-i,d=Math.abs(u-l/2)/(l/2);return Math.max(.6,1-d*.4)}}return .6}getContentForStudent(r,s){return s==="conversation"?this.getConversationContent():this.getStructuredContent(r)}getConversationContent(){return{level:"Basic",cefr:"A1",fkRange:null,vocabulary:"Basic 500 most common words",grammar:"Present tense, simple sentence patterns",complexity:"Simple everyday exchanges",focus:"Conversational fluency"}}getStructuredContent(r){if(!this.structuredLevels[r])throw new Error(`Invalid structured level: ${r}`);return{Elementary:{level:"Elementary",cefr:"A2",fkRange:[0,1],vocabulary:"First 1000 common words",grammar:"Simple past/present tenses, basic connectors",complexity:"Simple structured content",focus:"Basic language structures"},"Pre-Intermediate":{level:"Pre-Intermediate",cefr:"B1",fkRange:[1,1.5],vocabulary:"Extended vocabulary, some idioms",grammar:"Future tense, conditionals, intermediate structures",complexity:"Moderate complexity with clear structure",focus:"Practical communication skills"},Intermediate:{level:"Intermediate",cefr:"B2",fkRange:[1.5,2.5],vocabulary:"Advanced vocabulary, idioms, phrasal verbs",grammar:"Complex grammar, passive voice, advanced structures",complexity:"Complex ideas with sophisticated language",focus:"Fluent communication in various contexts"},"Upper-Intermediate":{level:"Upper-Intermediate",cefr:"C1",fkRange:[2.5,3.5],vocabulary:"Academic vocabulary, specialized terms",grammar:"Sophisticated grammar, nuanced expressions",complexity:"Abstract and complex topics",focus:"Academic and professional proficiency"},Advanced:{level:"Advanced",cefr:"C2",fkRange:[3.5,4.5],vocabulary:"Unrestricted vocabulary, native-like expressions",grammar:"Unrestricted complexity, subtle distinctions",complexity:"Highly complex and nuanced content",focus:"Native-like proficiency"}}[r]}generateAIContentPrompt(r,s,n){const i={Basic:`Create simple conversation about ${n}. Use only present tense, basic vocabulary (500 most common words), and simple sentence patterns. Focus on everyday exchanges.`,Elementary:`Generate Elementary level content about ${n}. Use simple past/present tenses, basic connectors, vocabulary from first 1000 common words. Target FK score 0-1, A2 CEFR level.`,"Pre-Intermediate":`Create Pre-Intermediate content about ${n}. Include future tense, conditionals, intermediate vocabulary. Target FK score 1-1.5, B1 CEFR level.`,Intermediate:`Develop Intermediate content about ${n}. Use complex grammar, passive voice, advanced vocabulary, idioms. Target FK score 1.5-2.5, B2 CEFR level.`,"Upper-Intermediate":`Generate Upper-Intermediate content about ${n}. Employ sophisticated grammar, academic vocabulary, complex sentences. Target FK score 2.5-3.5, C1 CEFR level.`,Advanced:`Create Advanced content about ${n}. Use unrestricted complexity, specialized vocabulary, native-like expressions. Target FK score 3.5-4.5, C2 CEFR level.`};return i[r]||i.Elementary}cefrToUnifiedLevel(r){return{A1:"Basic",A2:"Elementary",B1:"Pre-Intermediate",B2:"Intermediate",C1:"Upper-Intermediate",C2:"Advanced"}[r]||"Elementary"}unifiedLevelToCefr(r){return{Basic:"A1",Elementary:"A2","Pre-Intermediate":"B1",Intermediate:"B2","Upper-Intermediate":"C1",Advanced:"C2"}[r]||"A2"}validateContentLevel(r,s,n=!1){const i=this.assignUnifiedLevel(r,n),t=i.level===s;return{isValid:t,actualLevel:i.level,targetLevel:s,fkScore:i.fleschKincaid,confidence:i.confidence,suggestions:t?[]:this.generateLevelAdjustmentSuggestions(i.level,s)}}generateLevelAdjustmentSuggestions(r,s){const n=[],i=["Basic","Elementary","Pre-Intermediate","Intermediate","Upper-Intermediate","Advanced"],t=i.indexOf(r),l=i.indexOf(s);return t<l?(n.push("Increase sentence complexity"),n.push("Use more advanced vocabulary"),n.push("Add complex grammatical structures"),n.push("Include longer, more detailed explanations")):t>l&&(n.push("Simplify sentence structure"),n.push("Use more basic vocabulary"),n.push("Break down complex ideas into simpler parts"),n.push("Reduce sentence length")),n}}const Ae=new gn;class hn{constructor(){this.isInitialized=!1,this.currentSession=null,this.assessmentTasks=[],this.conversationHistory=[]}async initialize(){if(!this.isInitialized)try{await pe.initialize(),this.isInitialized=!0,console.log("Assessment service initialized")}catch(r){throw console.error("Failed to initialize assessment service:",r),r}}async startAssessment(r,s="English",n="initial"){this.isInitialized||await this.initialize();try{const i={user_id:r,session_type:n,target_language:s,status:"in_progress",started_at:new Date().toISOString()},{data:t,error:l}=await R.client.from("assessment_sessions").insert([i]).select().single();if(l)throw l;return this.currentSession=t,this.assessmentTasks=[],this.conversationHistory=[],await this.generateAssessmentTasks(t.id,s),{success:!0,sessionId:t.id,tasks:this.assessmentTasks}}catch(i){return console.error("Failed to start assessment:",i),{success:!1,error:i.message}}}async generateAssessmentTasks(r,s){try{const{data:n,error:i}=await R.client.from("cefr_assessment_questions").select("*").eq("is_active",!0).order("cefr_level").order("skill_type");if(i)throw i;if(!n||n.length===0)throw new Error("No CEFR questions found in database");const t=this.groupQuestionsBySkill(n),u=this.selectBalancedQuestions(t).map((c,b)=>({session_id:r,task_type:this.mapQuestionTypeToTaskType(c.question_type),task_order:b+1,prompt:this.buildTaskPrompt(c),expected_duration_minutes:this.getExpectedDuration(c.question_type),max_score:c.points||100,cefr_question_id:c.id,cefr_level:c.cefr_level,skill_type:c.skill_type,question_data:{question_text:c.question_text,instructions:c.instructions,options:c.options,correct_answer:c.correct_answer,question_type:c.question_type}})),{data:m,error:d}=await R.client.from("assessment_tasks").insert(u).select();if(d)throw d;return this.assessmentTasks=m,m}catch(n){throw console.error("Error generating assessment tasks:",n),n}}groupQuestionsBySkill(r){const s={};return r.forEach(n=>{const i=`${n.skill_type}_${n.cefr_level}`;s[i]||(s[i]=[]),s[i].push(n)}),s}selectBalancedQuestions(r){const s=[],n=["vocabulary","grammar","reading","writing","speaking"],i=["A1","A2","B1","B2","C1","C2"];n.forEach(l=>{for(const u of i){const m=`${l}_${u}`;if(r[m]&&r[m].length>0){s.push(r[m][0]);break}}});const t=Object.values(r).flat();for(;s.length<8&&s.length<t.length;){const l=t.filter(u=>!s.find(m=>m.id===u.id));if(l.length>0)s.push(l[0]);else break}return s.slice(0,8)}mapQuestionTypeToTaskType(r){return{"multiple-choice":"multiple-choice","true-false":"true-false","short-answer":"writing",essay:"writing","fill-in-blank":"grammar",listening:"listening",speaking:"conversation",reading:"reading",conversation:"conversation"}[r]||"general"}buildTaskPrompt(r){let s=r.question_text;return r.instructions&&(s=`${r.instructions}

${s}`),r.options&&Array.isArray(r.options)&&(s+=`

Options:`,r.options.forEach((n,i)=>{s+=`
${i+1}. ${n}`})),s}getExpectedDuration(r){return{"multiple-choice":1,"true-false":1,"short-answer":3,essay:8,"fill-in-blank":2,listening:3,speaking:4,reading:3,conversation:5}[r]||3}async submitTaskResponse(r,s,n=null){try{const i=this.assessmentTasks.find(b=>b.id===r);if(!i)throw new Error("Task not found");let t=null,l=null,u=null;if(i.question_data&&i.question_data.correct_answer){const b=i.question_data.correct_answer.toLowerCase().trim(),w=s.toLowerCase().trim();l=b===w,t=l?i.max_score||100:0,u={score:t,feedback:{overall:l?"Correct answer!":`Incorrect. The correct answer is: ${i.question_data.correct_answer}`,strengths:l?["Accurate response"]:[],weaknesses:l?[]:["Review this topic area"],errorExamples:[]},skillScores:{grammar:t,vocabulary:t,fluency:t,accuracy:t,complexity:t}}}else u=await this.analyzeResponse(i,s,n),t=u.score;const{data:m,error:d}=await R.client.from("assessment_tasks").update({user_response:s,audio_response_url:n,score:t,is_correct:l,ai_feedback:u.feedback,skill_scores:u.skillScores,completed_at:new Date().toISOString()}).eq("id",r).select().single();if(d)throw d;const c=this.assessmentTasks.findIndex(b=>b.id===r);return c!==-1&&(this.assessmentTasks[c]=m),{success:!0,score:t,isCorrect:l,feedback:u.feedback,skillScores:u.skillScores}}catch(i){return console.error("Failed to submit task response:",i),{success:!1,error:i.message}}}async analyzeResponse(r,s,n=null){const i=this.buildAnalysisPrompt(r,s);try{let t;ie.isReady()?(console.log("Using Gemini for assessment analysis"),t=await ie.generateResponse(i)):(console.log("Using fallback AI service for assessment analysis"),t=await pe.generateResponse(i)),console.log("AI response received, length:",(t==null?void 0:t.length)||0);const l=this.parseAIAnalysis(t,r.task_type);return console.log("Analysis parsed successfully:",{score:l.score,cefrLevel:l.cefrLevel,hasSkillScores:!!l.skillScores}),l}catch(t){return console.error("AI analysis failed:",t),console.log("Falling back to basic analysis"),this.getFallbackAnalysis(r,s)}}buildAnalysisPrompt(r,s){const n=`
You are an expert language assessment specialist. Analyze the following ${r.task_type} response according to CEFR standards.

Task: ${r.prompt}
User Response: ${s}

Provide a detailed analysis including:
1. Overall score (0-100)
2. CEFR level estimate (A1, A2, B1, B2, C1, C2)
3. Skill breakdown scores for:
   - Grammar (0-100)
   - Vocabulary (0-100)
   - Fluency (0-100)
   - Accuracy (0-100)
   - Complexity (0-100)
4. Specific strengths and weaknesses
5. Detailed feedback for improvement
6. Examples of errors with corrections

IMPORTANT: Respond with ONLY valid JSON. No additional text before or after the JSON.

Format your response as JSON with the following structure:
{
  "overall_score": 75,
  "cefr_level": "B1",
  "skill_scores": {
    "grammar": 70,
    "vocabulary": 80,
    "fluency": 75,
    "accuracy": 70,
    "complexity": 65
  },
  "strengths": ["Good vocabulary usage", "Clear communication"],
  "weaknesses": ["Minor grammar errors", "Could improve complexity"],
  "feedback": "Overall good performance with room for improvement in grammar accuracy.",
  "error_examples": [{"error": "I was go", "correction": "I went", "explanation": "Past tense form needed"}]
}

Ensure all strings are properly quoted and no trailing commas exist.
`;switch(r.task_type){case"conversation":return n+`
Focus on natural flow, pronunciation indicators in text, and conversational appropriateness.`;case"writing":return n+`
Focus on coherence, cohesion, paragraph structure, and written accuracy.`;case"grammar":return n+`
Focus specifically on grammatical accuracy and understanding of complex structures.`;case"vocabulary":return n+`
Focus on vocabulary range, precision, and understanding of nuanced meanings.`;case"pronunciation":return n+`
Note: This is text analysis of a pronunciation task. Focus on phonetic awareness and potential pronunciation issues.`;default:return n}}parseAIAnalysis(r,s){try{let n=this.extractJsonFromResponse(r);if(n){n=this.cleanJsonString(n);const i=JSON.parse(n);return{score:i.overall_score||50,cefrLevel:i.cefr_level||"A2",skillScores:i.skill_scores||{},feedback:{overall:i.feedback||"Analysis completed",strengths:i.strengths||[],weaknesses:i.weaknesses||[],errorExamples:i.error_examples||[]}}}}catch(n){console.error("Failed to parse AI analysis:",n),console.log("Raw AI response:",r.substring(0,500)+"...")}return this.extractAnalysisFromText(r,s)}extractJsonFromResponse(r){const s=r.match(/```(?:json)?\s*([\s\S]*?)```/);if(s)return s[1].trim();const n=r.indexOf("{");if(n!==-1){let i=0,t=n;for(let l=n;l<r.length;l++)if(r[l]==="{"&&i++,r[l]==="}"&&i--,i===0){t=l;break}if(i===0)return r.substring(n,t+1)}return null}cleanJsonString(r){return r.replace(/,\s*([}\]])/g,"$1").replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)\s*:/g,'$1"$2":').replace(/'/g,'"').replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*$/gm,"").trim()}extractAnalysisFromText(r,s){const n=r.match(/score[:\s]*(\d+)/i),i=r.match(/([ABC][12])/i);return{score:n?parseInt(n[1]):60,cefrLevel:i?i[1].toUpperCase():"B1",skillScores:{grammar:60,vocabulary:60,fluency:60,accuracy:60,complexity:60},feedback:{overall:r.substring(0,500)+"...",strengths:["Analysis completed"],weaknesses:["Detailed analysis available"],errorExamples:[]}}}getFallbackAnalysis(r,s){const n=s.split(" ").length,i=s.split(/[.!?]+/).length;let t=50;return n>50&&(t+=10),i>3&&(t+=10),(s.includes("because")||s.includes("although"))&&(t+=10),{score:Math.min(t,100),cefrLevel:t>70?"B1":"A2",skillScores:{grammar:t,vocabulary:t,fluency:t-10,accuracy:t,complexity:t-20},feedback:{overall:"Basic assessment completed. For detailed feedback, please ensure AI services are properly configured.",strengths:["Response provided"],weaknesses:["Detailed analysis unavailable"],errorExamples:[]}}}async completeAssessment(){if(!this.currentSession)throw new Error("No active assessment session");try{const{data:r,error:s}=await R.client.from("assessment_tasks").select("*").eq("session_id",this.currentSession.id).not("completed_at","is",null);if(s)throw s;const n=this.calculateOverallResults(r),{data:i,error:t}=await R.client.from("assessment_sessions").update({status:"completed",total_duration_minutes:n.totalDuration,overall_score:n.overallScore,cefr_level:n.cefrLevel,ielts_equivalent:n.ieltsEquivalent,proficiency_breakdown:n.skillBreakdown,ai_analysis:n.analysis,completed_at:new Date().toISOString()}).eq("id",this.currentSession.id).select().single();if(t)throw t;return this.currentSession=null,this.assessmentTasks=[],{success:!0,results:{sessionId:i.id,overallScore:n.overallScore,cefrLevel:n.cefrLevel,ieltsEquivalent:n.ieltsEquivalent,skillBreakdown:n.skillBreakdown,recommendations:n.recommendations}}}catch(r){return console.error("Failed to complete assessment:",r),{success:!1,error:r.message}}}calculateOverallResults(r){if(!r||r.length===0)throw new Error("No completed tasks found");const s=r.filter(b=>b.task_type==="conversation"||b.task_type==="pronunciation"),n=r.filter(b=>!s.includes(b));let i=0,t="A1",l="Basic",u=null;if(n.length>0){const b=n.reduce((C,p)=>C+(p.score||0),0)/n.length,w=n.filter(C=>C.user_response&&typeof C.user_response=="string").map(C=>C.user_response).join(" ");w.length>0?(u=Ae.assignUnifiedLevel(w,!1),t=u.cefr,l=u.level):(t=this.scoreToCEFR(b,null,!1),l=Ae.cefrToUnifiedLevel(t)),i=b}if(s.length>0){const b=s.reduce((w,C)=>w+(C.score||0),0)/s.length;n.length===0?(i=b,t="A1",l="Basic"):i=i*.7+b*.3}const m=this.cefrToIELTS(t,l),d=this.calculateSkillBreakdown(r),c=this.generateUnifiedRecommendations(l,t,d,u);return{totalDuration:r.reduce((b,w)=>b+(w.expected_duration_minutes||0),0),overallScore:Math.round(i*100)/100,cefrLevel:t,unifiedLevel:l,ieltsEquivalent:m,skillBreakdown:d,fleschKincaidAnalysis:u,analysis:{taskResults:r.map(b=>({type:b.task_type,score:b.score,feedback:b.ai_feedback,isConversational:s.includes(b)})),overallAssessment:`Based on the assessment, the user demonstrates ${l} level (${t}) proficiency.`,levelingApproach:u?"Flesch-Kincaid based analysis for structured content":"Score-based analysis"},recommendations:c}}scoreToCEFR(r,s=null,n=!1){return s&&!n?Ae.assignUnifiedLevel(s,!1).cefr:n?"A1":r>=90?"C2":r>=80?"C1":r>=70?"B2":r>=60?"B1":r>=45?"A2":"A1"}cefrToIELTS(r,s=null){let i={A1:2.5,A2:3.5,B1:5,B2:6.5,C1:7.5,C2:8.5}[r]||5;return s==="Basic"&&(i=Math.min(i,3)),i}calculateSkillBreakdown(r){const s=["grammar","vocabulary","fluency","accuracy","complexity"],n={};return s.forEach(i=>{const t=r.map(l=>{var u;return(u=l.skill_scores)==null?void 0:u[i]}).filter(l=>l!=null);t.length>0?n[i]=t.reduce((l,u)=>l+u,0)/t.length:n[i]=60}),n}generateUnifiedRecommendations(r,s,n,i){const t={unifiedLevel:r,cefrLevel:s,focusAreas:[],suggestedActivities:[],nextSteps:[],contentTypes:[],fleschKincaidGuidance:null};switch(Object.entries(n).forEach(([l,u])=>{u<60&&t.focusAreas.push(l)}),r){case"Basic":t.suggestedActivities=["Simple conversation practice","Basic vocabulary building (500 most common words)","Present tense practice","Everyday situation dialogues","Pronunciation fundamentals"],t.contentTypes=["conversation","basic_dialogue","pronunciation"];break;case"Elementary":t.suggestedActivities=["Structured grammar exercises","Simple reading comprehension","Basic writing tasks","Past and present tense practice","Vocabulary expansion (1000 common words)"],t.contentTypes=["structured_exercises","simple_reading","basic_writing"];break;case"Pre-Intermediate":t.suggestedActivities=["Future tense and conditionals","Intermediate conversation topics","Reading short articles","Paragraph writing","Listening comprehension"],t.contentTypes=["intermediate_reading","structured_writing","conversation"];break;case"Intermediate":t.suggestedActivities=["Complex grammar structures","Advanced reading comprehension","Essay writing practice","Debate and discussion","Idioms and phrasal verbs"],t.contentTypes=["advanced_reading","essay_writing","discussion"];break;case"Upper-Intermediate":t.suggestedActivities=["Academic writing","Complex literature reading","Professional communication","Advanced grammar nuances","Specialized vocabulary"],t.contentTypes=["academic_content","literature","professional_communication"];break;case"Advanced":t.suggestedActivities=["Native-level literature","Academic research writing","Professional presentations","Subtle language distinctions","Cultural nuances"],t.contentTypes=["native_content","academic_research","professional_advanced"];break}if(i&&i.fleschKincaid!==null){const l=Ae.getStructuredContent(r).fkRange;t.fleschKincaidGuidance={currentScore:i.fleschKincaid,targetRange:l,suggestions:Ae.generateLevelAdjustmentSuggestions(i.level,r)}}return t.nextSteps=[`Continue ${r} level structured learning (${s} CEFR)`,r==="Basic"?"Practice conversation skills without complexity pressure":"Balance structured learning with conversation practice","Focus on identified weak areas: "+(t.focusAreas.length>0?t.focusAreas.join(", "):"Continue current progress"),"Regular assessment to track improvement",r!=="Advanced"?`Prepare for progression to ${this.getNextLevel(r)} level`:"Maintain and refine native-level proficiency"],t}getNextLevel(r){return{Basic:"Elementary",Elementary:"Pre-Intermediate","Pre-Intermediate":"Intermediate",Intermediate:"Upper-Intermediate","Upper-Intermediate":"Advanced",Advanced:"Advanced"}[r]||"Elementary"}generateRecommendations(r,s){const n=Ae.cefrToUnifiedLevel(r);return this.generateUnifiedRecommendations(n,r,s,null)}getCurrentSession(){return this.currentSession}async getAssessmentHistory(r,s=null){try{let n=R.client.from("assessment_sessions").select("*").eq("user_id",r).eq("status","completed").order("completed_at",{ascending:!1});s&&(n=n.eq("target_language",s));const{data:i,error:t}=await n;if(t)throw t;return{success:!0,history:i}}catch(n){return console.error("Failed to get assessment history:",n),{success:!1,error:n.message}}}async getUserProficiencyProfile(r,s){try{const{data:n,error:i}=await R.client.from("user_proficiency_profiles").select("*").eq("user_id",r).eq("language",s).single();if(i&&i.code!=="PGRST116")throw i;return{success:!0,profile:n}}catch(n){return console.error("Failed to get proficiency profile:",n),{success:!1,error:n.message}}}}const Be=new hn,vn=({onComplete:o,targetLanguage:r="English"})=>{const{user:s}=Ve(),[n,i]=a.useState("intro"),[t,l]=a.useState(null),[u,m]=a.useState([]),[d,c]=a.useState(0),[b,w]=a.useState({}),[C,p]=a.useState(!1),[D,f]=a.useState(null),[h,v]=a.useState(null),[x,N]=a.useState(!1),[g,S]=a.useState(null),[A,F]=a.useState(null),G=a.useRef(null),$=a.useRef([]),_=a.useRef(null),O=a.useRef(null);a.useEffect(()=>()=>{_.current&&clearInterval(_.current),G.current&&G.current.state==="recording"&&G.current.stop()},[]);const Y=async()=>{p(!0),f(null);try{const P=await Be.startAssessment(s.id,r,"initial");P.success?(l(P.sessionId),m(P.tasks),i("assessment"),c(0),ee(P.tasks[0])):f(P.error)}catch{f("Failed to start assessment. Please try again.")}finally{p(!1)}},ee=P=>{P.expected_duration_minutes&&(F(P.expected_duration_minutes*60),_.current=setInterval(()=>{F(M=>M<=1?(clearInterval(_.current),0):M-1)},1e3))},j=()=>{_.current&&(clearInterval(_.current),_.current=null),F(null)},B=async()=>{try{const P=await navigator.mediaDevices.getUserMedia({audio:!0});G.current=new MediaRecorder(P),$.current=[],G.current.ondataavailable=M=>{$.current.push(M.data)},G.current.onstop=()=>{const M=new Blob($.current,{type:"audio/wav"});S(M),P.getTracks().forEach(se=>se.stop())},G.current.start(),N(!0)}catch{f("Could not access microphone. Please check permissions.")}},z=()=>{G.current&&G.current.state==="recording"&&(G.current.stop(),N(!1))},W=async()=>{const P=u[d],M=b[P.id]||"";if(!M.trim()&&!g){f("Please provide a response before continuing.");return}p(!0),f(null);try{let se=null;g&&(se=URL.createObjectURL(g));const xe=await Be.submitTaskResponse(P.id,M,se);if(xe.success)if(j(),d<u.length-1)c(d+1),S(null),ee(u[d+1]);else{const Q=await Be.completeAssessment();Q.success?(v(Q.results),i("results")):f(Q.error)}else f(xe.error)}catch{f("Failed to submit response. Please try again.")}finally{p(!1)}},V=P=>{const M=u[d];w(se=>({...se,[M.id]:P}))},U=P=>{const M=Math.floor(P/60),se=P%60;return`${M}:${se.toString().padStart(2,"0")}`},I=P=>{try{let M=P.question_data;return typeof M=="string"&&(M=JSON.parse(M)),!M||typeof M!="object"?null:M}catch(M){return console.error("Error parsing question_data:",M),null}},y=P=>{const M=I(P);if(!M||!M.options)return[];if(Array.isArray(M.options))return M.options;if(typeof M.options=="string")try{const se=JSON.parse(M.options);return Array.isArray(se)?se:[]}catch(se){return console.error("Error parsing options:",se),[]}return[]},T=P=>{switch(P){case"conversation":return"üí¨";case"writing":return"‚úçÔ∏è";case"grammar":return"üìù";case"vocabulary":return"üìö";case"pronunciation":return"üó£Ô∏è";case"multiple-choice":return"‚òëÔ∏è";case"true-false":return"‚úÖ";case"speaking":return"üó£Ô∏è";default:return"üìã"}},k=P=>({A1:"text-red-600",A2:"text-orange-600",B1:"text-yellow-600",B2:"text-green-600",C1:"text-blue-600",C2:"text-purple-600"})[P]||"text-gray-600",q=()=>e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto text-center",children:[e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Language Proficiency Assessment"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:270,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:["This assessment will help us determine your current ",r," proficiency level and create a personalized learning path for you."]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:273,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:269,columnNumber:7},void 0),e.jsxDEV(te,{className:"p-6 mb-8",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"What to Expect"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:280,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4 text-left",children:[e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:"üí¨"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:284,columnNumber:15},void 0),e.jsxDEV("span",{children:"Conversation practice (3 minutes)"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:285,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:283,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:"‚úçÔ∏è"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:288,columnNumber:15},void 0),e.jsxDEV("span",{children:"Writing sample (5 minutes)"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:289,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:287,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:"üìù"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:292,columnNumber:15},void 0),e.jsxDEV("span",{children:"Grammar exercises (2 minutes)"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:293,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:291,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:282,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:"üìö"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:298,columnNumber:15},void 0),e.jsxDEV("span",{children:"Vocabulary assessment (4 minutes)"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:299,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:297,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:"üó£Ô∏è"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:302,columnNumber:15},void 0),e.jsxDEV("span",{children:"Pronunciation check (2 minutes)"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:303,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:301,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:"‚è±Ô∏è"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:306,columnNumber:15},void 0),e.jsxDEV("span",{children:"Total time: ~15 minutes"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:307,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:296,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:281,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:279,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-8",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV(Ge,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:315,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Before You Begin"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:317,columnNumber:13},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsxDEV("li",{children:"‚Ä¢ Ensure you have a quiet environment"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:319,columnNumber:15},void 0),e.jsxDEV("li",{children:"‚Ä¢ Allow microphone access for speaking tasks"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:320,columnNumber:15},void 0),e.jsxDEV("li",{children:"‚Ä¢ Answer naturally and honestly"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:321,columnNumber:15},void 0),e.jsxDEV("li",{children:"‚Ä¢ Don't worry about making mistakes"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:322,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:318,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:316,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:314,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:313,columnNumber:7},void 0),e.jsxDEV(Z,{onClick:Y,disabled:C,className:"px-8 py-3 text-lg",children:[C?e.jsxDEV(Ue,{size:"sm",message:"",className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:333,columnNumber:22},void 0):null,"Start Assessment"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:328,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:264,columnNumber:5},void 0),re=()=>{var xe;const P=u[d],M=(d+1)/u.length*100,se=P.task_type==="conversation"||P.task_type==="pronunciation";return e.jsxDEV(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"max-w-4xl mx-auto",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Task ",d+1," of ",u.length]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:355,columnNumber:13},void 0),A!==null&&e.jsxDEV("span",{className:`text-sm font-medium ${A<60?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-300"}`,children:["Time remaining: ",U(A)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:359,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:354,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsxDEV("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:367,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:366,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:353,columnNumber:9},void 0),e.jsxDEV(te,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-3xl",children:T(P.task_type)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:378,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-xl font-semibold capitalize",children:[P.task_type," Assessment"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:380,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxDEV("span",{children:["Expected time: ",P.expected_duration_minutes," minutes"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:384,columnNumber:19},void 0),P.cefr_level&&e.jsxDEV("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-xs font-medium",children:P.cefr_level},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:386,columnNumber:21},void 0),P.skill_type&&e.jsxDEV("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-xs font-medium capitalize",children:P.skill_type},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:391,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:383,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:379,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:377,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:376,columnNumber:11},void 0),(()=>{const Q=I(P);return(Q==null?void 0:Q.instructions)&&Q.instructions!==(Q==null?void 0:Q.question_text)&&e.jsxDEV("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:"Instructions:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:405,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed text-sm",children:Q.instructions},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:406,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:404,columnNumber:15},void 0)})(),e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxDEV("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:((xe=I(P))==null?void 0:xe.question_text)||P.prompt},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:416,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:415,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:414,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-4",children:se?e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-center space-x-4 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxDEV(Z,{onClick:x?z:B,variant:x?"destructive":"default",className:"flex items-center space-x-2",children:x?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(_e,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:434,columnNumber:25},void 0)," Stop Recording"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:434,columnNumber:23},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(he,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:436,columnNumber:25},void 0)," Start Recording"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:436,columnNumber:23},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:428,columnNumber:19},void 0),g&&e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(de,{className:"w-5 h-5 text-green-600 dark:text-green-400"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:442,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Recording saved"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:443,columnNumber:23},void 0),e.jsxDEV(Z,{variant:"outline",size:"sm",onClick:()=>S(null),children:e.jsxDEV(er,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:449,columnNumber:25},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:444,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:441,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:427,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional notes (optional):"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:457,columnNumber:19},void 0),e.jsxDEV("textarea",{ref:O,value:b[P.id]||"",onChange:Q=>V(Q.target.value),placeholder:"Add any additional thoughts or notes here...",className:"w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:460,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:456,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:425,columnNumber:15},void 0):P.task_type==="multiple-choice"?e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select the best answer:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:472,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-3",children:y(P).map((Q,sr)=>e.jsxDEV("label",{className:"flex items-start space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsxDEV("input",{type:"radio",name:`question-${P.id}`,value:Q,checked:b[P.id]===Q,onChange:nr=>V(nr.target.value),className:"mt-1 text-blue-600 focus:ring-blue-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:478,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-gray-700 dark:text-gray-300",children:Q},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:486,columnNumber:23},void 0)]},sr,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:477,columnNumber:21},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:475,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:471,columnNumber:15},void 0):P.task_type==="true-false"?e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select True or False:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:493,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsxDEV("input",{type:"radio",name:`question-${P.id}`,value:"true",checked:b[P.id]==="true",onChange:Q=>V(Q.target.value),className:"text-blue-600 focus:ring-blue-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:498,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"True"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:506,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:497,columnNumber:19},void 0),e.jsxDEV("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsxDEV("input",{type:"radio",name:`question-${P.id}`,value:"false",checked:b[P.id]==="false",onChange:Q=>V(Q.target.value),className:"text-blue-600 focus:ring-blue-500"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:509,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"False"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:517,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:508,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:496,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:492,columnNumber:15},void 0):e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your response:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:523,columnNumber:17},void 0),e.jsxDEV("textarea",{ref:O,value:b[P.id]||"",onChange:Q=>V(Q.target.value),placeholder:"Type your response here...",className:"w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6,required:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:526,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:["Word count: ",(b[P.id]||"").split(" ").filter(Q=>Q).length]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:535,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:522,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:423,columnNumber:11},void 0),D&&e.jsxDEV("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxDEV("p",{className:"text-red-800 dark:text-red-200 text-sm",children:D},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:544,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:543,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-6 flex justify-between",children:[e.jsxDEV(Z,{variant:"outline",onClick:()=>{d>0&&(c(d-1),j(),ee(u[d-1]))},disabled:d===0||C,children:"Previous"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:549,columnNumber:13},void 0),e.jsxDEV(Z,{onClick:W,disabled:C||!b[P.id]&&!g,children:[C?e.jsxDEV(Ue,{size:"sm",message:"",className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:568,columnNumber:17},void 0):null,d===u.length-1?"Complete Assessment":"Next Task"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:563,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:548,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:375,columnNumber:9},void 0)]},d,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:345,columnNumber:7},void 0)},ce=()=>e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(de,{className:"w-8 h-8 text-green-600 dark:text-green-400"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:586,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:585,columnNumber:9},void 0),e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Assessment Complete!"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:588,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Here are your results and personalized recommendations."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:591,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:584,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[e.jsxDEV(te,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"Overall Results"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:599,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:[h.overallScore,"/100"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:602,columnNumber:15},void 0),e.jsxDEV("div",{className:`text-2xl font-semibold ${k(h.cefrLevel)}`,children:[h.cefrLevel," Level"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:605,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["IELTS Equivalent: ",h.ieltsEquivalent]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:608,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:601,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:600,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:598,columnNumber:9},void 0),e.jsxDEV(te,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"Skill Breakdown"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:617,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-3",children:Object.entries(h.skillBreakdown).map(([P,M])=>e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"capitalize text-sm font-medium",children:P},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:621,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsxDEV("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full",style:{width:`${M}%`}},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:624,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:623,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm font-medium w-8",children:Math.round(M)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:629,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:622,columnNumber:17},void 0)]},P,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:620,columnNumber:15},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:618,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:616,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:596,columnNumber:7},void 0),h.recommendations&&e.jsxDEV(te,{className:"p-6 mb-8",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"Personalized Recommendations"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:640,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Focus Areas"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:643,columnNumber:15},void 0),e.jsxDEV("ul",{className:"space-y-1",children:h.recommendations.focusAreas.map((P,M)=>e.jsxDEV("li",{className:"text-sm text-gray-600 dark:text-gray-300 capitalize",children:["‚Ä¢ ",P]},M,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:646,columnNumber:19},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:644,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:642,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Suggested Activities"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:653,columnNumber:15},void 0),e.jsxDEV("ul",{className:"space-y-1",children:h.recommendations.suggestedActivities.map((P,M)=>e.jsxDEV("li",{className:"text-sm text-gray-600 dark:text-gray-300",children:["‚Ä¢ ",P]},M,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:656,columnNumber:19},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:654,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:652,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:641,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:639,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV(Z,{onClick:()=>o&&o(h),className:"px-8 py-3 text-lg",children:"Continue to Learning Dashboard"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:667,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:666,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:579,columnNumber:5},void 0);return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:e.jsxDEV(be,{mode:"wait",children:[n==="intro"&&q(),n==="assessment"&&re(),n==="results"&&ce()]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:679,columnNumber:7},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/Assessment.jsx",lineNumber:678,columnNumber:5},void 0)},yn=()=>{const{user:o}=Ve(),r=rr(),[s,n]=a.useState(null),[i,t]=a.useState(!0),[l,u]=a.useState(null);a.useEffect(()=>{if(!o){r("/login");return}(async()=>{var b,w,C,p,D,f,h,v,x;try{console.log("Fetching profile for user:",o.id,"Email:",o.email);const{data:N,error:g}=await R.client.from("user_profiles").select("*").eq("id",o.id).single();if(g)if(g.code==="PGRST116"){console.log("User profile not found, creating new profile for user:",o.id,"Email:",o.email);try{const{data:S,error:A}=await R.client.rpc("create_missing_user_profile",{user_id:o.id,user_email:o.email,user_name:((b=o.user_metadata)==null?void 0:b.name)||((w=o.email)==null?void 0:w.split("@")[0])||"User"});if(A){console.log("Helper function error:",A.message,"Trying direct insert with proper auth context");const F={id:o.id,email:o.email,full_name:((C=o.user_metadata)==null?void 0:C.name)||((p=o.user_metadata)==null?void 0:p.full_name)||((D=o.email)==null?void 0:D.split("@")[0])||"User",preferred_language:"en",target_languages:"{}",target_language:"English",native_language:"Unknown",learning_level:"beginner",assessment_completed:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Creating profile with data:",F);const{data:G,error:$}=await R.client.from("user_profiles").upsert([F],{onConflict:"id"}).select().single();if($){console.error("Error creating user profile:",$);const _={id:o.id,email:o.email,full_name:((f=o.user_metadata)==null?void 0:f.name)||((h=o.email)==null?void 0:h.split("@")[0])||"User",target_language:"English",native_language:"Unknown",learning_level:"beginner",assessment_completed:!1};n(_),console.log("Using fallback profile for session")}else n(G)}else{const{data:F,error:G}=await R.client.from("user_profiles").select("*").eq("id",o.id).single();G?(console.error("Error fetching created profile:",G),u("Profile created but failed to load")):n(F)}}catch(S){console.error("Error in profile creation process:",S);const A={id:o.id,email:o.email,full_name:((v=o.user_metadata)==null?void 0:v.name)||((x=o.email)==null?void 0:x.split("@")[0])||"User",target_language:"English",native_language:"Unknown",learning_level:"beginner",assessment_completed:!1};n(A),console.log("Using fallback profile due to creation error")}}else console.error("Error fetching user profile:",g),u("Failed to load user profile");else n(N)}catch(N){console.error("Error:",N),u("An unexpected error occurred")}finally{t(!1)}})()},[o,r]);const m=async c=>{try{const{error:b}=await R.client.from("user_profiles").update({assessment_completed:!0,initial_assessment_date:new Date().toISOString(),placement_level:c.cefrLevel,learning_level:c.cefrLevel}).eq("id",o.id);b&&console.error("Error updating user profile:",b),r("/dashboard",{state:{assessmentResults:c,showWelcome:!0}})}catch(b){console.error("Error completing assessment:",b),r("/dashboard")}},d=()=>{n(c=>({...c,assessment_completed:!1}))};return i?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:181,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading your profile..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:182,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:180,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:179,columnNumber:7},void 0):l?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxDEV(te,{className:"p-8 max-w-md mx-auto",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV("span",{className:"text-red-600 dark:text-red-400 text-xl",children:"‚ö†Ô∏è"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:194,columnNumber:15},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:193,columnNumber:13},void 0),e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Error"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:196,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:l},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:197,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Z,{onClick:()=>window.location.reload(),className:"w-full",children:"Try Again"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:199,columnNumber:15},void 0),e.jsxDEV(Z,{variant:"outline",onClick:()=>r("/dashboard"),className:"w-full",children:"Go to Dashboard"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:202,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:198,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:192,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:191,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:190,columnNumber:7},void 0):s!=null&&s.assessment_completed?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto",children:[e.jsxDEV(Z,{variant:"outline",onClick:()=>r("/dashboard"),className:"mb-6 flex items-center space-x-2",children:[e.jsxDEV(Ar,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:226,columnNumber:13},void 0),e.jsxDEV("span",{children:"Back to Dashboard"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:227,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:221,columnNumber:11},void 0),e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:e.jsxDEV(te,{className:"p-8",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsxDEV(de,{className:"w-8 h-8 text-green-600 dark:text-green-400"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:237,columnNumber:17},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:236,columnNumber:15},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Assessment Already Completed"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:240,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4 mb-6",children:[e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-300",children:["You completed your initial language proficiency assessment on"," ",new Date(s.initial_assessment_date).toLocaleDateString(),"."]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:245,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center justify-center space-x-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Current Level"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:253,columnNumber:23},void 0),e.jsxDEV("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.placement_level||s.learning_level},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:256,columnNumber:23},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:252,columnNumber:21},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:251,columnNumber:19},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:250,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:244,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(Z,{onClick:()=>r("/dashboard"),className:"w-full",children:"Continue Learning"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:265,columnNumber:17},void 0),e.jsxDEV(Z,{variant:"outline",onClick:d,className:"w-full",children:"Retake Assessment"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:272,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:264,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"Note: Retaking the assessment will update your current proficiency level and may affect your learning path."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:281,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:235,columnNumber:13},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:230,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:220,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:219,columnNumber:7},void 0):e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute top-4 left-4 z-10",children:e.jsxDEV(Z,{variant:"outline",onClick:()=>r("/dashboard"),className:"flex items-center space-x-2 bg-white shadow-sm",children:[e.jsxDEV(Ar,{className:"w-4 h-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:302,columnNumber:11},void 0),e.jsxDEV("span",{children:"Back to Dashboard"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:303,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:297,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:296,columnNumber:7},void 0),e.jsxDEV(vn,{onComplete:m,targetLanguage:(s==null?void 0:s.target_language)||"English"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:307,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentPage.jsx",lineNumber:294,columnNumber:5},void 0)},jn=()=>{const[o,r]=a.useState([]),[s,n]=a.useState(!1),[i,t]=a.useState(""),{user:l}=Ve(),u=(p,D,f="")=>{r(h=>[...h,{id:Date.now(),test:p,status:D,details:f,timestamp:new Date().toLocaleTimeString()}])},m=async()=>{n(!0),r([]);try{t("Testing Database Connection...");try{const{data:f,error:h}=await R.client.from("assessment_sessions").select("count").limit(1);if(h)throw h;u("Database Connection","PASS","Successfully connected to Supabase")}catch(f){throw u("Database Connection","FAIL",f.message),f}t("Testing Assessment Service...");try{const f=Be.getCurrentSession();u("Assessment Service","PASS","Service initialized correctly")}catch(f){u("Assessment Service","FAIL",f.message)}t("Creating Test Assessment Session...");let p;try{const h={user_id:(l==null?void 0:l.id)||"test-user-"+Date.now(),target_language:"English",assessment_type:"proficiency",status:"in_progress"},{data:v,error:x}=await R.client.from("assessment_sessions").insert(h).select().single();if(x)throw x;p=v.id,u("Session Creation","PASS",`Session ID: ${p}`)}catch(f){throw u("Session Creation","FAIL",f.message),f}t("Creating Assessment Task...");let D;try{const f={session_id:p,task_type:"speaking",prompt:"Test prompt: Describe your favorite hobby",expected_duration_minutes:3,difficulty_level:"intermediate"},{data:h,error:v}=await R.client.from("assessment_tasks").insert(f).select().single();if(v)throw v;D=h.id,u("Task Creation","PASS",`Task ID: ${D}`)}catch(f){throw u("Task Creation","FAIL",f.message),f}t("Submitting Task Response...");try{const f={response_text:"Test response: I enjoy reading books because it expands my knowledge.",score:78,ai_feedback:"Good vocabulary usage and clear expression.",skill_scores:{grammar:75,vocabulary:85,fluency:80,accuracy:70,complexity:75},completed_at:new Date().toISOString()},{data:h,error:v}=await R.client.from("assessment_tasks").update(f).eq("id",D).select().single();if(v)throw v;u("Task Response","PASS",`Score: ${h.score}`)}catch(f){throw u("Task Response","FAIL",f.message),f}t("Completing Assessment Session...");try{const f={status:"completed",overall_score:78,cefr_level:"B2",ielts_equivalent:6.5,skill_breakdown:{grammar:75,vocabulary:85,fluency:80,accuracy:70,complexity:75},recommendations:["Focus on grammar accuracy","Continue vocabulary building"],completed_at:new Date().toISOString()},{data:h,error:v}=await R.client.from("assessment_sessions").update(f).eq("id",p).select().single();if(v)throw v;u("Session Completion","PASS",`CEFR Level: ${h.cefr_level}`)}catch(f){throw u("Session Completion","FAIL",f.message),f}t("Updating Proficiency Profile...");try{const h={user_id:(l==null?void 0:l.id)||"test-user-"+Date.now(),language:"English",current_cefr_level:"B2",overall_score:78,skill_breakdown:{grammar:75,vocabulary:85,fluency:80,accuracy:70,complexity:75},last_assessment_date:new Date().toISOString(),assessment_count:1},{data:v,error:x}=await R.client.from("user_proficiency_profiles").upsert(h,{onConflict:"user_id,language"}).select().single();if(x)throw x;u("Proficiency Profile","PASS",`Level: ${v.current_cefr_level}`)}catch(f){u("Proficiency Profile","FAIL",f.message)}t("Retrieving Assessment History...");try{const f=(l==null?void 0:l.id)||"test-user-"+Date.now(),{data:h,error:v}=await R.client.from("assessment_sessions").select(`
            *,
            assessment_tasks(*)
          `).eq("user_id",f).eq("status","completed").order("completed_at",{ascending:!1});if(v)throw v;u("Assessment History","PASS",`Found ${h.length} completed assessments`)}catch(f){u("Assessment History","FAIL",f.message)}t("Checking Data Consistency...");try{const{data:f,error:h}=await R.client.from("assessment_sessions").select("*").eq("id",p).single();if(h)throw h;const{data:v,error:x}=await R.client.from("assessment_tasks").select("*").eq("session_id",p);if(x)throw x;if(v.length===0)throw new Error("No tasks found for session");const N=v.map(S=>S.score).filter(S=>S!==null),g=N.reduce((S,A)=>S+A,0)/N.length;Math.abs(g-f.overall_score)<=1?u("Data Consistency","PASS","All data relationships verified"):u("Data Consistency","WARN","Minor score calculation discrepancy")}catch(f){u("Data Consistency","FAIL",f.message)}t("Cleaning up test data...");try{await R.client.from("assessment_tasks").delete().eq("session_id",p),await R.client.from("assessment_sessions").delete().eq("id",p),u("Cleanup","PASS","Test data cleaned up successfully")}catch(f){u("Cleanup","WARN","Some test data may remain: "+f.message)}t("All tests completed!")}catch(p){t("Test suite failed: "+p.message)}finally{n(!1)}},d=p=>{switch(p){case"PASS":return"text-green-600";case"FAIL":return"text-red-600";case"WARN":return"text-yellow-600";default:return"text-gray-600"}},c=p=>{switch(p){case"PASS":return"‚úÖ";case"FAIL":return"‚ùå";case"WARN":return"‚ö†Ô∏è";default:return"‚è≥"}},b=o.filter(p=>p.status==="PASS").length,w=o.filter(p=>p.status==="FAIL").length,C=o.filter(p=>p.status==="WARN").length;return e.jsxDEV("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Assessment-Supabase Synchronization Test"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:314,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Comprehensive test suite to verify assessment system integration with Supabase database."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:317,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:313,columnNumber:7},void 0),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV(Z,{onClick:m,disabled:s,className:"mr-4",children:s?"Running Tests...":"Run Comprehensive Test"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:323,columnNumber:9},void 0),o.length>0&&e.jsxDEV("div",{className:"inline-flex items-center space-x-4 text-sm",children:[e.jsxDEV("span",{className:"text-green-600",children:["‚úÖ Passed: ",b]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:333,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-red-600",children:["‚ùå Failed: ",w]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:334,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-yellow-600",children:["‚ö†Ô∏è Warnings: ",C]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:335,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:332,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:322,columnNumber:7},void 0),s&&e.jsxDEV(te,{className:"mb-6 p-4",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:i},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:344,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:342,columnNumber:11},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:341,columnNumber:9},void 0),o.length>0&&e.jsxDEV(te,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"Test Results"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:351,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-3",children:o.map(p=>e.jsxDEV("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-muted/50",children:[e.jsxDEV("span",{className:"text-lg",children:c(p.status)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:355,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-medium",children:p.test},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:358,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:p.timestamp},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:359,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:357,columnNumber:19},void 0),e.jsxDEV("span",{className:`text-sm font-medium ${d(p.status)}`,children:p.status},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:361,columnNumber:19},void 0),p.details&&e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:p.details},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:365,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:356,columnNumber:17},void 0)]},p.id,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:354,columnNumber:15},void 0))},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:352,columnNumber:11},void 0),!s&&o.length>0&&e.jsxDEV("div",{className:"mt-6 p-4 rounded-lg bg-muted",children:[e.jsxDEV("h3",{className:"font-semibold mb-2",children:"Test Summary"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:374,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxDEV("div",{className:"text-green-600",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:b},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:377,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-sm",children:"Passed"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:378,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:376,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-red-600",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:w},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:381,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-sm",children:"Failed"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:382,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:380,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-yellow-600",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:C},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:385,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-sm",children:"Warnings"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:386,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:384,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:375,columnNumber:15},void 0),w===0&&e.jsxDEV("div",{className:"mt-4 p-3 bg-green-100 text-green-800 rounded-lg text-center",children:"üéâ All critical tests passed! Assessment-Supabase synchronization is working correctly."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:391,columnNumber:17},void 0),w>0&&e.jsxDEV("div",{className:"mt-4 p-3 bg-red-100 text-red-800 rounded-lg text-center",children:"‚ö†Ô∏è Some tests failed. Please check the configuration and database setup."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:397,columnNumber:17},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:373,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:350,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/pages/AssessmentTest.jsx",lineNumber:312,columnNumber:5},void 0)},fe=({children:o})=>{const{user:r,loading:s}=Ve(),n=Ye();return s?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Ue,{className:"w-8 h-8 mx-auto mb-4"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/auth/ProtectedRoute.jsx",lineNumber:14,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/auth/ProtectedRoute.jsx",lineNumber:15,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/auth/ProtectedRoute.jsx",lineNumber:13,columnNumber:9},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/auth/ProtectedRoute.jsx",lineNumber:12,columnNumber:7},void 0):r?o:e.jsxDEV(gs,{to:"/auth/login",state:{from:n},replace:!0},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/auth/ProtectedRoute.jsx",lineNumber:23,columnNumber:12},void 0)},En=()=>{const[o,r]=a.useState({connected:!1,tablesExist:!1,loading:!0,error:null});a.useEffect(()=>{s()},[]);const s=async()=>{r(t=>({...t,loading:!0}));try{const t=R.isConnected;let l=!1,u=null;if(t)try{const m=await R.client.from("user_profiles").select("id").limit(1);l=!m.error||m.error.code!=="42P01",m.error&&m.error.code==="42P01"&&(u="Database tables not found")}catch(m){u=m.message}else u="Not connected to Supabase";r({connected:t,tablesExist:l,loading:!1,error:u})}catch(t){r({connected:!1,tablesExist:!1,loading:!1,error:t.message})}},n=t=>o.loading?"‚è≥":t?"‚úÖ":"‚ùå",i=t=>o.loading?"text-yellow-600":t?"text-green-600":"text-red-600";return e.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-2xl mx-auto",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Database Health Check"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:73,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:n(o.connected)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:77,columnNumber:11},void 0),e.jsxDEV("span",{className:`font-medium ${i(o.connected)}`,children:["Supabase Connection: ",o.connected?"Connected":"Disconnected"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:78,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:76,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-2xl",children:n(o.tablesExist)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:84,columnNumber:11},void 0),e.jsxDEV("span",{className:`font-medium ${i(o.tablesExist)}`,children:["Database Tables: ",o.tablesExist?"Found":"Missing"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:85,columnNumber:11},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:83,columnNumber:9},void 0),o.error&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[e.jsxDEV("p",{className:"text-red-800 font-medium",children:"Error Details:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:92,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-red-600",children:o.error},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:93,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:91,columnNumber:11},void 0),(!o.connected||!o.tablesExist)&&e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[e.jsxDEV("h3",{className:"text-blue-800 font-medium mb-2",children:"Setup Required"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:99,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-blue-700 space-y-2",children:[!o.connected&&e.jsxDEV("p",{children:"‚Ä¢ Check your .env file has correct VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:102,columnNumber:17},void 0),!o.tablesExist&&e.jsxDEV("div",{children:[e.jsxDEV("p",{children:"‚Ä¢ Database tables need to be created. Follow these steps:"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:106,columnNumber:19},void 0),e.jsxDEV("ol",{className:"list-decimal list-inside ml-4 mt-2 space-y-1",children:[e.jsxDEV("li",{children:["Open your ",e.jsxDEV("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Supabase Dashboard"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:108,columnNumber:35},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:108,columnNumber:21},void 0),e.jsxDEV("li",{children:"Go to SQL Editor"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:109,columnNumber:21},void 0),e.jsxDEV("li",{children:["Copy contents from ",e.jsxDEV("code",{className:"bg-gray-100 px-1 rounded",children:"database/migrations/001_initial_schema.sql"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:110,columnNumber:44},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:110,columnNumber:21},void 0),e.jsxDEV("li",{children:"Paste and run the migration"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:111,columnNumber:21},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:107,columnNumber:19},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:105,columnNumber:17},void 0),e.jsxDEV("p",{children:["‚Ä¢ See ",e.jsxDEV("code",{className:"bg-gray-100 px-1 rounded",children:"SETUP_DATABASE.md"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:115,columnNumber:24},void 0)," for detailed instructions"]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:115,columnNumber:15},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:100,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:98,columnNumber:11},void 0),o.connected&&o.tablesExist&&e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[e.jsxDEV("p",{className:"text-green-800 font-medium",children:"‚úÖ Database is properly configured!"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:122,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-green-700",children:"All systems are working correctly."},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:123,columnNumber:13},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:121,columnNumber:11},void 0),e.jsxDEV("button",{onClick:s,disabled:o.loading,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-md font-medium transition-colors",children:o.loading?"Checking...":"Recheck Status"},void 0,!1,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:127,columnNumber:9},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:75,columnNumber:7},void 0)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/components/DatabaseHealthCheck.jsx",lineNumber:72,columnNumber:5},void 0)};function Dn({children:o}){const r=Ye(),s=r.pathname.startsWith("/admin"),n=r.pathname.startsWith("/auth"),[i,t]=a.useState(!1);return s||n?e.jsxDEV("div",{className:"min-h-screen bg-background text-foreground",children:o},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:52,columnNumber:7},this):e.jsxDEV("div",{className:"flex h-screen bg-background text-foreground overflow-hidden",children:[e.jsxDEV(E.div,{initial:!1,animate:{width:i?"80px":"280px"},transition:{duration:.3,ease:"easeInOut"},className:"flex-shrink-0 border-r border-border",children:e.jsxDEV(Is,{collapsed:i,onToggle:()=>t(!i)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:70,columnNumber:9},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:62,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxDEV(Ms,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:79,columnNumber:9},this),e.jsxDEV("main",{className:"flex-1 overflow-auto",children:o},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:82,columnNumber:9},this)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:77,columnNumber:7},this)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:60,columnNumber:5},this)}function wn(){const[o,r]=a.useState(!0);return a.useEffect(()=>{(async()=>{var n,i,t,l;try{le.validate();const u=await((i=(n=window.electronAPI)==null?void 0:n.getTheme)==null?void 0:i.call(n))||"light";document.documentElement.classList.toggle("dark",u==="dark"),await((l=(t=window.electronAPI)==null?void 0:t.loadProgress)==null?void 0:l.call(t)),le.isDatabaseEnabled()?console.log("üóÑÔ∏è Database services initialized"):console.warn("‚ö†Ô∏è Database services disabled - check environment variables"),setTimeout(()=>r(!1),1500)}catch(u){console.error("Failed to initialize app:",u),r(!1)}})()},[]),o?e.jsxDEV(zs,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:129,columnNumber:12},this):e.jsxDEV(Ls,{children:e.jsxDEV(ks,{children:e.jsxDEV(Ts,{children:e.jsxDEV(_s,{children:e.jsxDEV(Ks,{children:e.jsxDEV(hs,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxDEV(Dn,{children:e.jsxDEV(be,{mode:"wait",children:e.jsxDEV(vs,{children:[e.jsxDEV(oe,{path:"/auth/login",element:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(fn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:158,columnNumber:27},this)},"login",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:151,columnNumber:25},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:148,columnNumber:21},this),e.jsxDEV(oe,{path:"/auth/signup",element:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(Nn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:172,columnNumber:28},this)},"signup",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:165,columnNumber:26},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:162,columnNumber:21},this),e.jsxDEV(oe,{path:"/auth/callback",element:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(xn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:186,columnNumber:28},this)},"auth-callback",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:179,columnNumber:26},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:176,columnNumber:22},this),e.jsxDEV(oe,{path:"/admin",element:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(bn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:202,columnNumber:28},this)},"admin-dashboard",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:195,columnNumber:26},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:192,columnNumber:22},this),e.jsxDEV(oe,{path:"/",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV($s,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:217,columnNumber:31},this)},"dashboard",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:210,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:209,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:206,columnNumber:23},this),e.jsxDEV(oe,{path:"/chat",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(Ys,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:233,columnNumber:31},this)},"chat",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:226,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:225,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:222,columnNumber:23},this),e.jsxDEV(oe,{path:"/enhanced-chat",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(Zs,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:249,columnNumber:31},this)},"enhanced-chat",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:242,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:241,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:238,columnNumber:23},this),e.jsxDEV(oe,{path:"/live-conversation",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(ln,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:265,columnNumber:31},this)},"live-conversation",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:258,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:257,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:254,columnNumber:23},this),e.jsxDEV(oe,{path:"/pronunciation",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(dn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:281,columnNumber:31},this)},"pronunciation",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:274,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:273,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:270,columnNumber:23},this),e.jsxDEV(oe,{path:"/vocabulary",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(un,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:297,columnNumber:31},this)},"vocabulary",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:290,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:289,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:286,columnNumber:23},this),e.jsxDEV(oe,{path:"/grammar",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(cn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:313,columnNumber:31},this)},"grammar",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:306,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:305,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:302,columnNumber:23},this),e.jsxDEV(oe,{path:"/settings",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(mn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:329,columnNumber:31},this)},"settings",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:322,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:321,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:318,columnNumber:23},this),e.jsxDEV(oe,{path:"/assessment",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(yn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:345,columnNumber:31},this)},"assessment",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:338,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:337,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:334,columnNumber:23},this),e.jsxDEV(oe,{path:"/assessment-test",element:e.jsxDEV(fe,{children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(jn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:361,columnNumber:31},this)},"assessment-test",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:354,columnNumber:29},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:353,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:350,columnNumber:23},this),e.jsxDEV(oe,{path:"/database-health",element:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxDEV(En,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:376,columnNumber:29},this)},"database-health",!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:369,columnNumber:27},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:366,columnNumber:23},this)]},void 0,!0,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:146,columnNumber:19},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:145,columnNumber:17},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:144,columnNumber:15},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:138,columnNumber:13},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:137,columnNumber:13},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:136,columnNumber:11},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:135,columnNumber:9},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:134,columnNumber:7},this)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/App.jsx",lineNumber:133,columnNumber:5},this)}const Vn=ys.createRoot(document.getElementById("root"));Vn.render(e.jsxDEV(ae.StrictMode,{children:e.jsxDEV(wn,{},void 0,!1,{fileName:"/opt/build/repo/src/renderer/main.jsx",lineNumber:10,columnNumber:5},void 0)},void 0,!1,{fileName:"/opt/build/repo/src/renderer/main.jsx",lineNumber:9,columnNumber:3},void 0));
//# sourceMappingURL=index-Dq3iQtLA.js.map
